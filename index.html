<!DOCTYPE html>





<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.9.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/avatar.png?v=7.4.1">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/avatar.png?v=7.4.1">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/avatar.png?v=7.4.1">
  <link rel="mask-icon" href="/images/avatar.svg?v=7.4.1" color="#222">

<link rel="stylesheet" href="/css/main.css?v=7.4.1">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.4.1',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: 'å¤åˆ¶',
      copy_success: 'å¤åˆ¶æˆåŠŸ',
      copy_failure: 'å¤åˆ¶å¤±è´¥'
    },
    sidebarPadding: 40
  };
</script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Mr.RS">
<meta property="og:url" content="https://mrrs878.github.io/index.html">
<meta property="og:site_name" content="Mr.RS">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Mr.RS">
  <link rel="canonical" href="https://mrrs878.github.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false,
    isPage: false,
    isArchive: false
  };
</script>

  <title>Mr.RS</title>
  








  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Mr.RS</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">Read The Fucking Source Code!</p>
      
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
        
        
        <li class="menu-item menu-item-home">
      
    

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>é¦–é¡µ</a>

  </li>
      
    
      
      
        
        
        <li class="menu-item menu-item-about">
      
    

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>å…³äº</a>

  </li>
      
    
      
      
        
        
        <li class="menu-item menu-item-tags">
      
    

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>æ ‡ç­¾</a>

  </li>
      
    
      
      
        
        
        <li class="menu-item menu-item-categories">
      
    

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>åˆ†ç±»</a>

  </li>
      
    
      
      
        
        
        <li class="menu-item menu-item-archives">
      
    

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>å½’æ¡£</a>

  </li>
      
    
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
            

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://mrrs878.github.io/2020/02/19/ES6é‡ç‚¹-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr.RS">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/imgs/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mr.RS">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            
            <a href="/2020/02/19/ES6é‡ç‚¹-1/" class="post-title-link" itemprop="url">ES6é‡ç‚¹-1</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-02-19 23:01:48" itemprop="dateCreated datePublished" datetime="2020-02-19T23:01:48+08:00">2020-02-19</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-02-21 23:12:12" itemprop="dateModified" datetime="2020-02-21T23:12:12+08:00">2020-02-21</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaScript/" itemprop="url" rel="index">
                    <span itemprop="name">JavaScript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="å­—ç¬¦ä¸²æ–°å¢æ–¹æ³•"><a href="#å­—ç¬¦ä¸²æ–°å¢æ–¹æ³•" class="headerlink" title="å­—ç¬¦ä¸²æ–°å¢æ–¹æ³•"></a>å­—ç¬¦ä¸²æ–°å¢æ–¹æ³•</h2><ul>
<li><p><code>padStart</code></p>
<p>ç”¨äºå­—ç¬¦ä¸²é•¿åº¦è¡¥å…¨ï¼Œå¦‚æœæŸä¸ªå­—ç¬¦ä¸²é•¿åº¦ä¸å¤ŸæŒ‡å®šé•¿åº¦ä¼šåœ¨å¤´éƒ¨æˆ–å°¾éƒ¨è¡¥å…¨</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">'xxx'</span>.padStart(<span class="number">4</span>, <span class="string">'ab'</span>));</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'x'</span>.padStart(<span class="number">4</span>, <span class="string">'ab'</span>)); <span class="comment">//è¡¥å…¨ä½æ•°ï¼Œæœ‰éœ€è¦ä¼šé‡å¤æˆ–æˆªå–</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'x'</span>.padStart(<span class="number">4</span>)); <span class="comment">// ä¸ä¼ ç¬¬äºŒä¸ªå‚æ•°é»˜è®¤ä½¿ç”¨ç©ºæ ¼è¡¥å…¨</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'xxx'</span>.padStart(<span class="number">2</span>)); <span class="comment">// è¡¥å…¨åçš„é•¿åº¦å°äºæºå­—ç¬¦ä¸²é•¿åº¦åˆ™ä¸åšä»»ä½•æ”¹å˜</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// abax</span></span><br><span class="line"><span class="comment">// axxx</span></span><br><span class="line"><span class="comment">//    x</span></span><br><span class="line"><span class="comment">// xxx</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>padEnd</code></p>
<p>å’Œ<code>padStart</code>æ•ˆæœç›¸åï¼Œä»å°¾éƒ¨å¼€å§‹è¡¥å…¨</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">'x'</span>.padEnd(<span class="number">5</span>, <span class="string">'abc'</span>));</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'x'</span>.padEnd(<span class="number">4</span>));</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'xxx'</span>.padEnd(<span class="number">2</span>));</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'xxx'</span>.padEnd(<span class="number">4</span>, <span class="string">'ab'</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// xabca</span></span><br><span class="line"><span class="comment">// x   </span></span><br><span class="line"><span class="comment">// xxx</span></span><br><span class="line"><span class="comment">// xxxa</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="å¯¹è±¡æ–°å¢æ‰©å±•"><a href="#å¯¹è±¡æ–°å¢æ‰©å±•" class="headerlink" title="å¯¹è±¡æ–°å¢æ‰©å±•"></a>å¯¹è±¡æ–°å¢æ‰©å±•</h2><ul>
<li><p>é“¾åˆ¤æ–­è¿ç®—ç¬¦</p>
<p>åœ¨ES5ä¸­ï¼Œå–å¯¹è±¡å±æ€§æ—¶ï¼Œå¾€å¾€éœ€è¦åˆ¤æ–­ä»¥ä¸‹è¯¥å¯¹è±¡æ˜¯å¦å­˜åœ¨ã€‚å¦‚ä¸‹</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> name = (store </span><br><span class="line">    &amp;&amp; store.state </span><br><span class="line">    &amp;&amp; store.state.user </span><br><span class="line">    &amp;&amp; store.state.user.name) || <span class="string">"tom"</span></span><br></pre></td></tr></table></figure>

<p>è¿™ç§å±‚å±‚åˆ¤æ–­è¿‡äºéº»çƒ¦ï¼Œå› æ­¤ES2020å¼•å…¥é“¾åˆ¤æ–­è¿ç®—ç¬¦<code>?.</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> name = store?.state?.user?.name</span><br></pre></td></tr></table></figure>

<p>å¦‚æœå·¦ä¾§çš„å¯¹è±¡ä¸º<code>null</code>æˆ–<code>undefined</code>åˆ™ç›´æ¥è¿”å›<code>undefined</code>ï¼Œä¸å†å¾€ä¸‹è¿ç®—</p>
</li>
<li><p><code>null</code>åˆ¤æ–­è¿ç®—ç¬¦</p>
<p>ç‹¬å»å¯¹è±¡å±æ€§æ—¶ï¼Œå¦‚æœæŸä¸ªå±æ€§çš„å€¼æ—¶<code>null</code>æˆ–<code>undefined</code>ï¼Œæœ‰æ—¶éœ€è¦ä¸ºå®ƒä»¬æŒ‡å®šé»˜è®¤å€¼ã€‚å¸¸è§åšæ³•æ˜¯é€šè¿‡<code>||</code>è¿ç®—ç¬¦æŒ‡å®šé»˜è®¤å€¼</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> name = user.name || <span class="string">"tom"</span></span><br><span class="line"><span class="keyword">const</span> age = user.age || <span class="number">20</span></span><br></pre></td></tr></table></figure>

<p>åŸæ„æ˜¯å±æ€§å€¼ä¸º<code>null</code>æˆ–<code>undefined</code>æ—¶é»˜è®¤å€¼å°±ç”Ÿæ•ˆï¼Œä½†å½“<code>user.name</code>ä¸ºç©ºä¸²æˆ–<code>user.age</code>ä¸º0æ—¶é»˜è®¤å€¼ä¹Ÿä¼šç”Ÿæ•ˆ</p>
<p>ä¸ºæ­¤ES2020å¼•å…¥æ–°çš„<code>null</code>åˆ¤æ–­è¿ç®—ç¬¦<code>??</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> name = user.name ?? <span class="string">"tom"</span></span><br><span class="line"><span class="keyword">const</span> age = user.age ?? <span class="number">20</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="å¯¹è±¡æ–°å¢æ–¹æ³•"><a href="#å¯¹è±¡æ–°å¢æ–¹æ³•" class="headerlink" title="å¯¹è±¡æ–°å¢æ–¹æ³•"></a>å¯¹è±¡æ–°å¢æ–¹æ³•</h2><ul>
<li><p><code>Object.is</code></p>
<p>ç”¨æ¥æ›¿ä»£ <code>==</code>å’Œ<code>===</code></p>
<p><code>==</code> ä¼šè¿›è¡Œè‡ªåŠ¨ç±»å‹è½¬æ¢ï¼Œ<code>===</code> åœ¨æ¯”è¾ƒ+0å’Œ-0æ—¶è¿”å›<code>true</code>ï¼Œ<code>NaN</code>ä¸ç­‰äºè‡ªèº«</p>
</li>
<li><p><code>Object.assign</code></p>
<p>ç”¨äºå¯¹è±¡åˆå¹¶</p>
<ul>
<li>åªæ‹·è´æºå¯¹è±¡çš„<strong>è‡ªèº«ã€å¯æšä¸¾å±æ€§ï¼ˆå«Symbolï¼‰</strong></li>
<li>æµ…æ‹·è´</li>
<li>åŒåå±æ€§ä¼šè¢«è¦†ç›–</li>
<li>é™¤é¦–å‚æ•°å¤–ï¼ˆ<code>null</code>ã€<code>undefined</code>ä¼šæŠ¥é”™ï¼‰ï¼Œéå¯¹è±¡ä¼šè¢«è½¬æ¢ä¸ºå¯¹è±¡</li>
</ul>
</li>
<li><p><code>Object.keys</code></p>
<p>è¿”å›å¯¹è±¡<strong>è‡ªèº«çš„</strong>ã€<strong>å¯éå†çš„</strong>å±æ€§çš„é”®å<strong>æ•°ç»„</strong></p>
</li>
<li><p><code>Object.fromEntries/Object.entries</code></p>
<p><code>Object.fromEntries</code>å°†ä¸€ä¸ªé”®å€¼å¯¹æ•°ç»„è½¬æ¢ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œé€‚åˆå°†<code>Map</code>è½¬æ¢ä¸º<code>Object</code></p>
<p><code>Object.entries</code>é€†æ“ä½œï¼Œç”¨äºå°†<code>Object</code>è½¬æ¢ä¸ºé”®å€¼å¯¹æ•°ç»„</p>
</li>
</ul>
<h2 id="Arrayæ‰©å±•"><a href="#Arrayæ‰©å±•" class="headerlink" title="Arrayæ‰©å±•"></a>Arrayæ‰©å±•</h2><ul>
<li><p><code>Array.of</code></p>
<p>å¼¥è¡¥æ•°ç»„æ„é€ å‡½æ•°<code>Array()</code>çš„ä¸è¶³ã€‚å› ä¸ºå‚æ•°ä¸ªæ•°çš„ä¸åŒï¼Œä¼šå¯¼è‡´<code>Array()</code>çš„è¡Œä¸ºæœ‰å·®å¼‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>() <span class="comment">//[]</span></span><br><span class="line"><span class="built_in">Array</span>(<span class="number">3</span>) <span class="comment">//[ , , ]</span></span><br><span class="line"><span class="built_in">Array</span>(<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>) <span class="comment">//[3, 4, 5]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Array</span>.of() <span class="comment">// []</span></span><br><span class="line"><span class="built_in">Array</span>.of(<span class="number">3</span>) <span class="comment">//[3]</span></span><br><span class="line"><span class="built_in">Array</span>.of(<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>) <span class="comment">//[3, 4, 5]</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>Array.prototype.copyWithin()</code></p>
<p>åœ¨å½“å‰æ•°ç»„å†…éƒ¨ï¼Œå°†æŒ‡å®šä½ç½®çš„æˆå‘˜å¤åˆ¶åˆ°å…¶ä»–ä½ç½®ï¼ˆä¼šè¦†ç›–åŸæœ‰æˆå‘˜ï¼‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.copyWithin(target, start = <span class="number">0</span>, end = <span class="keyword">this</span>.length)</span><br><span class="line"></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>].copyWithin(<span class="number">0</span>, <span class="number">3</span>)</span><br><span class="line"><span class="comment">// [4, 5, 3, 4, 5]</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>].copyWithin(<span class="number">0</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line"><span class="comment">// [4, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>Array.prototype.flat() &amp;&amp; Array.prototype.flatMap()</code></p>
<p><code>flat()</code>ç”¨äºå°†æ•°æ®é™ç»´ï¼Œå‚æ•°ä¸ºé™ä½çš„ç»´æ•°ï¼ˆé»˜è®¤ä¸º1ï¼‰,å¦‚æœä¸ç®¡æœ‰å¤šå°‘å±‚ç»´ï¼Œéƒ½è¦è½¬ä¸ºä¸€ç»´æ•°ç»„ï¼Œå¯ä½¿ç”¨<code>Infinity</code>å…³é”®å­—ä½œä¸ºå‚æ•°</p>
<p>å¦‚æœåŸæ•°ç»„æœ‰ç©ºä½<code>flat()</code>ä¼šè·³è¿‡</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, [<span class="number">1</span>, <span class="number">2</span>]].flat()</span><br><span class="line"><span class="comment">// [1, 2, 1, 2]</span></span><br><span class="line"></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, [<span class="number">1</span>, <span class="number">2</span>], [<span class="number">1</span>, [<span class="number">2</span>]]].flat()</span><br><span class="line"><span class="comment">// [1, 2, 1, 2, 1, [2]]</span></span><br><span class="line"></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, [<span class="number">1</span>, <span class="number">2</span>], [<span class="number">1</span>, [<span class="number">2</span>]]].flat(<span class="number">2</span>)</span><br><span class="line"><span class="comment">// [1, 2, 1, 2, 1, 2]</span></span><br><span class="line"></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, [<span class="number">1</span>, <span class="number">2</span>], [<span class="number">1</span>, [<span class="number">2</span>]]].flat(<span class="literal">Infinity</span>)</span><br><span class="line"><span class="comment">// [1, 2, 1, 2, 1, 2]</span></span><br></pre></td></tr></table></figure>

<p><code>flatMap()</code>ç›¸å½“äº<code>Array.prorotype.Map</code> + <code>Array.prorotype.flat</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].flatMap(<span class="function"><span class="params">x</span> =&gt;</span> [x, x * <span class="number">2</span>])</span><br><span class="line"><span class="comment">// [1, 2, 2, 4, 3, 6]</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].flatMap(<span class="function"><span class="params">x</span> =&gt;</span> x * <span class="number">2</span>)</span><br><span class="line"><span class="comment">// [2, 4, 6]</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="iterator"><a href="#iterator" class="headerlink" title="iterator"></a>iterator</h2><p><strong>WHAT</strong></p>
<p>éå†å™¨ï¼ˆ<code>iterator</code>ï¼‰å°±æ˜¯è¿™æ ·ä¸€ç§æœºåˆ¶ã€‚å®ƒæ˜¯ä¸€ç§æ¥å£ï¼Œä¸ºå„ç§ä¸åŒçš„æ•°æ®ç»“æ„æä¾›ç»Ÿä¸€çš„è®¿é—®æœºåˆ¶ã€‚ä»»ä½•æ•°æ®ç»“æ„æ‰§æ³•äº†éƒ¨ç½²<code>iterator</code>æ¥å£ï¼Œå°±å¯ä»¥å®Œæˆ<strong>éå†</strong>æ“ä½œ</p>
<p><strong>WHY</strong></p>
<p>JavaScriptåŸæœ‰çš„è¡¨ç¤ºé›†åˆçš„æ•°æ®ç»“æ„ä¸»è¦æ˜¯æ•°ç»„ï¼ˆArrayï¼‰å’Œå¯¹è±¡ï¼ˆObjectï¼‰ï¼ŒES6åˆæ·»åŠ äº†<code>Map</code>ã€<code>Set</code>ã€‚è¿™æ ·å°±æœ‰äº†å››ç§æ•°æ®é›†åˆï¼Œç”¨æˆ·å¯ä»¥ç»„åˆä½¿ç”¨å®ƒä»¬ï¼Œå®šä¹‰è‡ªå·±çš„æ•°æ®ç»“æ„ï¼Œæ¯”å¦‚æ•°ç»„çš„æˆå‘˜æ˜¯<code>Map</code>ï¼Œ<code>Map</code>çš„æˆå‘˜æ˜¯å¯¹è±¡ã€‚è¿™æ ·éœ€è¦ä¸€ç§ç»Ÿä¸€çš„æ¥å£æœºåˆ¶æ¥å¤„ç†ä¸åŒçš„æ•°æ®ç»“æ„</p>
<p>ä¸»è¦ä½œç”¨</p>
<ul>
<li><p>ä¸ºå„ç§æ•°æ®ç»“æ„æä¾›ä¸€ä¸ªç»Ÿä¸€çš„ã€ç®€ä¾¿çš„è®¿é—®æ¥å£</p>
</li>
<li><p>ä½¿å¾—æ•°æ®ç»“æ„çš„æˆå‘˜èƒ½å¤ŸæŒ‰æŸç§æ¬¡åºæ’åˆ—</p>
</li>
<li><p>ä¸º<code>for...of</code>æ‰€ä½¿ç”¨</p>
<p>é€‚åˆéå†Arrayï¼Œæ—¢æœ‰<code>forEach</code>çš„ç®€æ´åˆæœ‰<code>for</code>çš„<code>break</code>ã€<code>return</code>ã€<code>continue</code></p>
</li>
</ul>
<p><strong>HOW</strong></p>
<p><code>iterator</code>çš„éå†è¿‡ç¨‹</p>
<ol>
<li>åˆ›å»ºä¸€ä¸ªæŒ‡é’ˆå¯¹è±¡ï¼ŒæŒ‡å‘å½“å‰çš„æ•°æ®ç»“æ„çš„èµ·å§‹ä½ç½®ã€‚ä¹Ÿå°±æ˜¯è¯´éå†å™¨å¯¹è±¡æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªæŒ‡é’ˆå¯¹è±¡</li>
<li>ç¬¬ä¸€æ¬¡è°ƒç”¨æŒ‡é’ˆå¯¹è±¡çš„<code>next</code>æ–¹æ³•ï¼Œå¯ä»¥å°†æŒ‡é’ˆæŒ‡å‘æ•°æ®ç»“æ„çš„ç¬¬ä¸€ä¸ªæˆå‘˜</li>
<li>ç¬¬äºŒæ¬¡è°ƒç”¨æŒ‡é’ˆå¯¹è±¡çš„<code>next</code>æ–¹æ³•ï¼ŒæŒ‡é’ˆå°±æŒ‡å‘æ•°æ®ç»“æ„çš„ç¬¬äºŒä¸ªæˆå‘˜</li>
<li>ä¸æ–­è°ƒç”¨æŒ‡é’ˆå¯¹è±¡çš„<code>next</code>æ–¹æ³•ï¼Œç›´åˆ°å®ƒæŒ‡å‘æ•°æ®ç»“æ„çš„ç»“æŸä½ç½®</li>
</ol>
<p>æ¯ä¸€æ¬¡è°ƒç”¨<code>next</code>æ–¹æ³•ï¼Œéƒ½ä¼šè¿”å›æ•°æ®ç»“æ„çš„å½“å‰æˆå‘˜çš„ä¿¡æ¯ã€‚å…·ä½“æ¥è¯´ï¼Œå°±æ˜¯è¿”å›ä¸€ä¸ªåŒ…å«<code>value</code>å’Œ<code>done</code>ä¸¤ä¸ªå±æ€§çš„å¯¹è±¡ï¼Œå…¶ä¸­<code>value</code>å±æ€§æ˜¯å½“å‰æˆå‘˜çš„å€¼ï¼Œ<code>done</code>å±æ€§æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦éå†ç»“æŸ</p>
<p>ES6è§„å®šï¼Œé»˜è®¤çš„<code>iterator</code>æ¥å£éƒ¨ç½²åœ¨æ•°æ®ç»“æ„çš„<code>Symbol.iterator</code>å±æ€§ï¼Œæˆ–è€…è¯´ï¼Œä¸€ä¸ªæ•°æ®ç»“æ„åªè¦å…·æœ‰<code>Symbol.iterator</code>å±æ€§ï¼Œå°±å¯ä»¥è®¤ä¸ºæ˜¯å¯éå†çš„ï¼ˆ<code>iterable</code>ï¼‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">    data: [<span class="string">'hello'</span>, <span class="string">'world'</span>],</span><br><span class="line">    [<span class="built_in">Symbol</span>.iterator](): &#123;</span><br><span class="line">    	<span class="keyword">const</span> self = <span class="keyword">this</span></span><br><span class="line">    	<span class="keyword">let</span> index = <span class="number">0</span></span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            next() &#123;</span><br><span class="line">                <span class="keyword">if</span> (index &lt; self.data.length) &#123;</span><br><span class="line">                    <span class="keyword">return</span> &#123;</span><br><span class="line">                        value: self.data[index++]</span><br><span class="line">                    	done: <span class="literal">false</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> &#123;</span><br><span class="line">                    value: <span class="literal">undefined</span>,</span><br><span class="line">                    done: <span class="literal">true</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åŸç”Ÿå…·å¤‡iteratoræ¥å£çš„æ•°æ®ç»“æ„ï¼š<code>Mapã€Arrayã€Setã€Stringã€TypedArrayã€argumentsã€NodeListå¯¹è±¡</code></p>
<h2 id="let-VS-const"><a href="#let-VS-const" class="headerlink" title="let VS const"></a>let VS const</h2><p>åœ¨letå’Œconstä¹‹é—´ï¼Œå»ºè®®ä¼˜å…ˆä½¿ç”¨constï¼Œå°¤å…¶æ˜¯åœ¨å…¨å±€ç¯å¢ƒã€‚constä¼˜äºletçš„å‡ ä¸ªåŸå› ï¼š</p>
<ul>
<li>constå¯ä»¥æé†’é˜…è¯»ç¨‹åºçš„äººï¼Œè¿™ä¸ªå˜é‡ä¸åº”è¯¥æ”¹å˜</li>
<li>constæ¯”è¾ƒç¬¦åˆå‡½æ•°å¼ç¼–ç¨‹æ€æƒ³ï¼Œè¿ç®—ä¸æ”¹å˜å€¼ï¼Œåªæ˜¯æ–°å»ºå€¼ï¼Œè€Œä¸”è¿™æ ·ä¹Ÿæœ‰åˆ©äºå°†æ¥çš„åˆ†å¸ƒå¼è®¡ç®—</li>
<li>JavaScriptç¼–è¯‘å™¨ä¼šå¯¹constè¿›è¡Œä¼˜åŒ–</li>
<li>é•¿è¿œæ¥çœ‹ï¼ŒJavaScriptå¯èƒ½ä¼šæœ‰å¤šçº¿ç¨‹çš„å®ç°ï¼Œè¿™æ—¶letè¡¨ç¤ºçš„å˜é‡åªåº”å‡ºç°åœ¨å•çº¿ç¨‹è¿è¡Œçš„ä»£ç ä¸­ï¼Œä¸æ˜¯å¤šçº¿ç¨‹å…±äº«çš„ï¼Œè¿™æ ·æœ‰åˆ©äºçº¿ç¨‹å®‰å…¨</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>, b = <span class="number">2</span>, c = <span class="number">3</span></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">const</span> b = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">const</span> c = <span class="number">3</span>;</span><br><span class="line"><span class="comment">// best</span></span><br><span class="line"><span class="keyword">const</span> [a, b, c] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br></pre></td></tr></table></figure>

<h2 id="generator"><a href="#generator" class="headerlink" title="generator"></a>generator</h2><p>ES6æä¾›çš„ä¸€ç§å¼‚æ­¥ç¼–ç¨‹è§£å†³æ–¹æ¡ˆ</p>
<p>è¯­æ³•ä¸Šï¼Œ<code>generator</code>å‡½æ•°æ˜¯ä¸€ä¸ªçŠ¶æ€æœºï¼Œå°è£…äº†å¤šä¸ªå†…éƒ¨çŠ¶æ€ã€‚æ‰§è¡Œ<code>generator</code>å‡½æ•°ä¼šè¿”å›ä¸€ä¸ª<strong>éå†å™¨å¯¹è±¡</strong>ã€‚</p>
<p>å½¢å¼ä¸Šï¼Œ<code>generator</code>å‡½æ•°æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ã€‚<code>function</code>å…³é”®å­—ä¸å‡½æ•°åä¹‹é—´æœ‰ä¸€ä¸ª<code>*</code>ï¼›å‡½æ•°ä½“å†…éƒ¨ä½¿ç”¨<code>yield</code>è¡¨è¾¾å¼å®šä¹‰ä¸åŒçš„å†…éƒ¨çŠ¶æ€</p>
<p>ä¸æ™®é€šå‡½æ•°ä¸åŒï¼Œgeneratorå‡½æ•°è¢«è°ƒç”¨åå¹¶ä¸æ‰§è¡Œï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªåªæƒ³å†…éƒ¨çŠ¶æ€çš„æŒ‡é’ˆå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯<strong>éå†å™¨å¯¹è±¡</strong>ã€‚ä¸‹ä¸€æ­¥ï¼Œå¿…é¡»è°ƒç”¨éå†å™¨å¯¹è±¡çš„<code>next</code>æ–¹æ³•ä½¿å¾—æŒ‡é’ˆä¸€é¡¹ä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚ä¹Ÿå°±æ˜¯è¯´æ¯æ¬¡è°ƒç”¨<code>next</code>æ–¹æ³•ï¼Œå†…éƒ¨æŒ‡é’ˆå°±ä»å‡½æ•°å¤´éƒ¨æˆ–ä¸Šä¸€æ¬¡åœä¸‹æ¥çš„åœ°æ–¹å¼€å§‹æ‰§è¡Œï¼Œå€¼åˆ°é‡åˆ°ä¸‹ä¸€ä¸ª<code>yield</code>è¡¨è¾¾å¼ï¼ˆæˆ–<code>return</code>è¯­å¥ï¼‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">gen</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> str1 = <span class="keyword">yield</span> <span class="string">"hello"</span></span><br><span class="line">  <span class="comment">// str1 = 222</span></span><br><span class="line">  <span class="keyword">const</span> str2 = <span class="keyword">yield</span> <span class="string">"world"</span></span><br><span class="line">  <span class="comment">// str2 = 333</span></span><br><span class="line">  <span class="keyword">return</span> str2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> iter = gen()</span><br><span class="line"><span class="built_in">console</span>.log(iter.next())</span><br><span class="line"><span class="built_in">console</span>.log(iter.next(<span class="number">222</span>))</span><br><span class="line"><span class="built_in">console</span>.log(iter.next(<span class="number">333</span>))</span><br></pre></td></tr></table></figure>

<p>ç¬¬ä¸€æ¬¡è°ƒç”¨ï¼Œ<code>generator</code>å‡½æ•°å¼€å§‹æ‰§è¡Œï¼Œç›´åˆ°é‡åˆ°ç¬¬ä¸€ä¸ª<code>yield</code>è¡¨è¾¾å¼ä¸ºæ­¢ã€‚<code>next</code>æ–¹æ³•è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒçš„<code>value</code>å€¼å°±æ˜¯å½“å‰<code>yield</code>è¡¨è¾¾å¼çš„å€¼ï¼Œdoneçš„å€¼ä¸º<code>false</code></p>
<p>ç¬¬äºŒæ¬¡è°ƒç”¨ï¼Œ<code>generator</code>ä»ä¸Šæ¬¡yieldè¡¨è¾¾å¼åœä¸‹æ¥çš„åœ°æ–¹ä¸€ç›´æ‰§è¡Œåˆ°ä¸‹ä¸€ä¸ª<code>yield</code>è¡¨è¾¾å¼ ğŸ‘† â€¦â€¦</p>
<p>ç¬¬ä¸‰æ¬¡è°ƒç”¨ï¼Œ<code>generator</code>å‡½æ•°ä»ä¸Šæ¬¡<code>yield</code>è¡¨è¾¾å¼åœä¸‹æ¥çš„åœ°æ–¹ä¸€ç›´æ‰§è¡Œåˆ°<code>return</code>è¯­å¥ï¼Œnextè¿”å›çš„<code>value</code>å€¼å°±æ˜¯<code>return</code>åé¢è¡¨è¾¾å¼çš„å€¼ï¼Œ<code>done</code>ä¸ºtrueï¼ˆå¦‚æœæ˜¯<code>yield</code>åˆ™ä¸º<code>false</code>ï¼‰</p>
<p><code>yield</code>è¡¨è¾¾å¼æœ¬èº«æ²¡æœ‰è¿”å›å€¼ï¼ˆæˆ–è€…è¯´æ€»æ˜¯è¿”å›undefinedï¼‰ã€‚<code>next</code>æ–¹æ³•å¯ä»¥å¸¦ä¸€ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°ä¼šè¢«å½“ä½œ<strong>ä¸Šä¸€ä¸ª</strong><code>yield</code>è¡¨è¾¾å¼çš„è¿”å›å€¼</p>

        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://mrrs878.github.io/2020/02/18/ES6é‡ç‚¹-0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr.RS">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/imgs/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mr.RS">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            
            <a href="/2020/02/18/ES6é‡ç‚¹-0/" class="post-title-link" itemprop="url">ES6é‡ç‚¹-0</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-02-18 23:43:05 / ä¿®æ”¹æ—¶é—´ï¼š23:44:05" itemprop="dateCreated datePublished" datetime="2020-02-18T23:43:05+08:00">2020-02-18</time>
            </span>
          
            

            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaScript/" itemprop="url" rel="index">
                    <span itemprop="name">JavaScript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Proxy"><a href="#Proxy" class="headerlink" title="Proxy"></a><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy" target="_blank" rel="noopener">Proxy</a></h2><p><code>Proxy</code>ç”¨äº<strong>ä¿®æ”¹æŸäº›æ“ä½œçš„é»˜è®¤è¡Œä¸º</strong>ï¼Œç­‰åŒäºåœ¨è¯­è¨€å±‚é¢åšå‡ºä¿®æ”¹ï¼Œæ‰€ä»¥å±äºä¸€ç§â€œå…ƒç¼–ç¨‹â€ï¼ˆmeta programï¼‰ï¼Œå³å¯¹ç¼–ç¨‹è¯­è¨€è¿›è¡Œç¼–ç¨‹ã€‚<code>Proxy</code>å¯ä»¥ç†è§£æˆåœ¨ç›®æ ‡å¯¹è±¡ä¹‹å‰æ¶è®¾ä¸€å±‚â€œæ‹¦æˆªâ€ï¼Œå¤–ç•Œå¯¹è¯¥å¯¹è±¡çš„è®¿é—®ï¼Œéƒ½å¿…é¡»å…ˆé€šè¿‡è¿™å±‚æ‹¦æˆªï¼Œå› æ­¤æä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œå¯ä»¥å¯¹å¤–ç•Œçš„è®¿é—®è¿›è¡Œè¿‡æ»¤å’Œæ”¹å†™ã€‚</p>
<h2 id="Reflect"><a href="#Reflect" class="headerlink" title="Reflect"></a><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect" target="_blank" rel="noopener">Reflect</a></h2><p>*<em>WHAT *</em>ğŸ˜³</p>
<p>ES6ä¸ºäº†<strong>æ“ä½œå¯¹è±¡</strong>è€Œæä¾›çš„æ–°çš„API</p>
<p><strong>WHY</strong>   ğŸ¤”</p>
<ol>
<li>å°†<code>Object</code>å¯¹è±¡çš„ä¸€äº›æ˜æ˜¾æ˜¯è¯­è¯­è¨€å†…éƒ¨çš„æ–¹æ³•ï¼ˆæ¯”å¦‚<code>Object.defineProperty</code>ï¼‰æ”¾åˆ°<code>Reflect</code>å¯¹è±¡ä¸Šï¼Œç°é˜¶æ®µï¼ŒæŸäº›æ–¹æ³•åŒæ—¶åœ¨<code>Object</code>å’Œ<code>Reflect</code>å¯¹è±¡ä¸Šéƒ¨ç½²ï¼Œæœªæ¥çš„æ–°æ–¹æ³•åªéƒ¨ç½²åœ¨<code>Reflect</code>å¯¹è±¡ä¸Šã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä»<code>Reflect</code>å¯¹è±¡ä¸Šå¯ä»¥æ‹¿åˆ°è¯­è¨€å†…éƒ¨çš„æ–¹æ³•</li>
<li>ä¿®æ”¹æŸäº›<code>Object</code>æ–¹æ³•çš„è¿”å›ç»“æœï¼Œè®©å…¶å˜å¾—æ›´åˆç†ã€‚æ¯”å¦‚<code>Object.defineProperty(obj, name, desc)</code>åœ¨æ— æ³•å®šä¹‰å±æ€§æ—¶ï¼Œä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œè€Œ<code>Reflect.defineProperty(obj, name, desc)</code>åˆ™ä¼šè¿”å›<code>false</code></li>
<li>è®©<code>Object</code>æ“ä½œéƒ½å˜æˆå‡½æ•°è¡Œä¸ºã€‚æŸäº›<code>Object</code>æ“ä½œæ˜¯å‘½ä»¤å¼ï¼Œæ¯”å¦‚<code>name in obj</code>å’Œ<code>delete obj[name]</code>ï¼Œè€Œ<code>Reflect.has(obj, name)</code>å’Œ<code>Reflect.deleteProperty(obj, name)</code>è®©å®ƒä»¬å˜æˆäº†å‡½æ•°è¡Œä¸º</li>
<li><code>Reflect</code>å¯¹è±¡çš„æ–¹æ³•ä¸<code>Proxy</code>å¯¹è±¡çš„æ–¹æ³•ä¸€ä¸€å¯¹åº”ï¼Œè¿™å°±è®©<code>Proxy</code>å¯¹è±¡å¯ä»¥æ–¹ä¾¿åœ°è°ƒç”¨å¯¹åº”çš„<code>Reflect</code>æ–¹æ³•ï¼Œå®Œæˆé»˜è®¤è¡Œä¸º</li>
</ol>
<p><strong>HOW</strong>  ğŸ˜®</p>
<p><code>Reflect</code>å¯¹è±¡ä¸€å…±æœ‰13ä¸ªé™æ€æ–¹æ³•</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€‚ç”¨äºå‡½æ•°å®šä¹‰äº†è‡ªå·±çš„ apply æ–¹æ³•</span></span><br><span class="line"><span class="built_in">Reflect</span>.apply(target, thisArg, args)</span><br><span class="line"><span class="comment">// ç­‰åŒäºnew target(...args) è¿™æä¾›äº†ä¸€ç§ä¸ä½¿ç”¨ new æ¥è°ƒç”¨æ„é€ å‡½æ•°çš„æ–¹æ³•</span></span><br><span class="line"><span class="built_in">Reflect</span>.construct(target, args)</span><br><span class="line"></span><br><span class="line"><span class="built_in">Reflect</span>.get(target, name, receiver)</span><br><span class="line"></span><br><span class="line"><span class="built_in">Reflect</span>.set(target, name, value, receiver)</span><br><span class="line"></span><br><span class="line"><span class="built_in">Reflect</span>.defineProperty(target, name, desc)</span><br><span class="line"></span><br><span class="line"><span class="built_in">Reflect</span>.deleteProperty(target, name)</span><br><span class="line"></span><br><span class="line"><span class="built_in">Reflect</span>.has(target, name)</span><br><span class="line"><span class="comment">// åŸºæœ¬ç­‰åŒäºObject.getOwnPropertyNames ä¸ Object.getOwnPropertySymbols ä¹‹å’Œ</span></span><br><span class="line"><span class="built_in">Reflect</span>.ownKeys(target)</span><br><span class="line"></span><br><span class="line"><span class="built_in">Reflect</span>.isExtensible(target)</span><br><span class="line"></span><br><span class="line"><span class="built_in">Reflect</span>.prevenExtensions(target)</span><br><span class="line"></span><br><span class="line"><span class="built_in">Reflect</span>.getOwnPropertyDescriptor(target, name)</span><br><span class="line"></span><br><span class="line"><span class="built_in">Reflect</span>.getPrototypeOf(target)</span><br><span class="line"></span><br><span class="line"><span class="built_in">Reflect</span>.setPrototypeOf(target, prototype)</span><br></pre></td></tr></table></figure>

<p><code>Reflect</code> + <code>Proxy</code>å®ç°è§‚å¯Ÿè€…æ¨¡å¼</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> observers = <span class="keyword">new</span> <span class="built_in">Set</span>()</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">observe</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  observers.add(fn)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">observable</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Proxy</span>(obj, &#123;</span><br><span class="line">    <span class="keyword">set</span>(target, key, value, receiver) &#123;</span><br><span class="line">      <span class="keyword">const</span> result = <span class="built_in">Reflect</span>.set(target, key, value, receiver)</span><br><span class="line">      observers.forEach(<span class="function"><span class="params">observer</span> =&gt;</span> observer())</span><br><span class="line">      <span class="keyword">return</span> result</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> person = observable(&#123;</span><br><span class="line">  name: <span class="string">"tom"</span>,</span><br><span class="line">  age: <span class="number">23</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">print</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123; person.name &#125;</span>, <span class="subst">$&#123; person.age &#125;</span>`</span>)</span><br><span class="line">&#125;</span><br><span class="line">observe(print)</span><br><span class="line">person.name = <span class="string">"tom1"</span></span><br></pre></td></tr></table></figure>

<p>ğŸ¤” åœ¨è§‚å¯Ÿè€…æ¨¡å¼ä¸­ï¼Œè§‚å¯Ÿè€…æ˜¯çŸ¥é“è¢«è§‚å¯Ÿè€…çš„ï¼Œè¢«è§‚å¯Ÿè€…ä¸€ä¸€ç›´ä¿æŒå¯¹è§‚å¯Ÿè€…è¿›è¡Œè®°å½•ã€‚ç„¶è€Œï¼Œåœ¨å‘å¸ƒè®¢é˜…æ¨¡å¼ä¸­ï¼Œå‘å¸ƒè€…å’Œè®¢é˜…è€…ä¸çŸ¥é“å¯¹æ–¹çš„å­˜åœ¨ï¼Œå®ƒä»¬åªæœ‰é€šè¿‡æ¶ˆæ¯ä»£ç†è¿›è¡Œé€šä¿¡ã€‚åœ¨å‘å¸ƒè®¢é˜…æ¨¡å¼ä¸­ï¼Œç»„ä»¶æ—¶æ¾æ•£è€¦åˆçš„ï¼Œæ­£å’Œè§‚å¯Ÿè€…æ¨¡å¼ç›¸åã€‚è§‚å¯Ÿè€…æ¨¡å¼å¤§å¤šæ—¶å€™æ˜¯åŒæ­¥çš„ï¼Œæ¯”å¦‚å½“äº‹ä»¶è§¦å‘ï¼Œè¢«è§‚å¯Ÿè€…å°±ä¼šè°ƒç”¨è§‚å¯Ÿè€…çš„æ–¹æ³•ï¼›è€Œå‘å¸ƒè®¢é˜…æ¨¡å¼å¤§å¤šæ—¶å€™æ˜¯å¼‚æ­¥çš„ï¼ˆä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ï¼‰</p>
<h2 id="Symbol"><a href="#Symbol" class="headerlink" title="Symbol"></a><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol" target="_blank" rel="noopener">Symbol</a></h2><p><strong>WHAT</strong> ğŸ˜³</p>
<p><code>ES6</code>å¼•å…¥çš„ä¸€ç§æ–°çš„åŸå§‹æ•°æ®ç±»å‹ï¼Œè¡¨ç¤º<strong>ç‹¬ä¸€æ— äºŒ</strong>çš„å€¼ã€‚å®ƒæ˜¯<code>JavaScript</code>è¯­è¨€çš„ç¬¬ä¸ƒç§æ•°æ®ç±»å‹ï¼Œå‰å…­ç§æ˜¯ï¼š<code>undefined</code>ã€<code>null</code>ã€<code>Boolean</code>ã€<code>String</code>ã€<code>Object</code>ã€<code>Number</code></p>
<p>ğŸ“£ ä¸æ”¯æŒ <code>new Symbol()</code></p>
<p><strong>WHY</strong>   ğŸ¤”</p>
<p>ES5çš„å¯¹è±¡å±æ€§åéƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œè¿™å®¹æ˜“é€ æˆå±æ€§åçš„å†²çªã€‚Symbolå€¼å¯ä½œä¸ºå¯¹è±¡å±æ€§å</p>
<p><strong>HOW</strong>   ğŸ˜®</p>
<p>Symbolå€¼é€šè¿‡<code>Symbol</code>å‡½æ•°ç”Ÿæˆ</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> nameProperty = <span class="built_in">Symbol</span>(<span class="string">"name"</span>)</span><br><span class="line"><span class="keyword">let</span> a = &#123;</span><br><span class="line">  [nameProperty]: <span class="string">"a"</span>,</span><br><span class="line">  age: <span class="number">21</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.getOwnPropertyNames(a))</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> a) &#123;</span><br><span class="line">  <span class="keyword">if</span> (a.hasOwnProperty(key)) &#123;</span><br><span class="line">    <span class="keyword">const</span> element = a[key];</span><br><span class="line">    <span class="built_in">console</span>.log(key);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Reflect</span>.ownKeys(a));</span><br></pre></td></tr></table></figure>

<p>API:</p>
<ul>
<li><p><code>Symbol.description</code></p>
<p>åˆ›å»º<code>Symbol</code>çš„æ—¶å€™ï¼Œå¯ä»¥æ·»åŠ ä¸€ä¸ªæè¿°ï¼Œä½†è¯»å–è¿™ä¸ªæè¿°éœ€è¦å°†<code>Symbol</code>æ˜¾å¼è½¬ä¸ºå­—ç¬¦ä¸²ã€‚<code>Symbol.description</code>å¯ä»¥æ–¹ä¾¿çš„è¯»å–<code>Symbol</code>å¯¹åº”çš„æè¿°</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> nameProp = <span class="built_in">Symbol</span>(<span class="string">"name"</span>)</span><br><span class="line">nameProp.toString()</span><br><span class="line"><span class="built_in">console</span>.log(nameProp.description)</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>Symbol.for</code></p>
<p>é‡æ–°ä½¿ç”¨åŒä¸€ä¸ª<code>Symbol</code>å€¼ã€‚<code>Symbol.for</code>æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œç„¶å<strong>å…¨å±€æœç´¢</strong>æœ‰æ²¡æœ‰ä»¥è¯¥å‚æ•°ä½œä¸ºåç§°çš„Symbolå€¼ï¼Œè‹¥æœ‰ï¼Œè¿”å›ä¹‹ï¼›è‹¥æ²¡æœ‰ï¼Œåˆ›å»ºä¹‹</p>
<p><code>Symbol.for(&quot;name&quot;)</code>å’Œ<code>Symbol(&quot;name&quot;)</code>çš„åŒºåˆ«ï¼šä¸¤è€…éƒ½ä¼šç”Ÿæˆ<code>Symbol</code>å€¼ï¼›å‰è€…ä¼šè¢«ç™»è®°åœ¨<strong>å…¨å±€</strong>ç¯å¢ƒä¸­ä¾›æœç´¢ï¼Œåè€…ä¸ä¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Symbol</span>(<span class="string">"name"</span>) === <span class="built_in">Symbol</span>(<span class="string">"name"</span>)</span><br><span class="line"><span class="comment">// false</span></span><br><span class="line"><span class="built_in">Symbol</span>.for(<span class="string">"name"</span>) === <span class="built_in">Symbol</span>.for(<span class="string">"name"</span>)</span><br><span class="line"><span class="comment">// true</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>Symbol.keyFor</code></p>
<p>è¿”å›ä¸€ä¸ªå·²<strong>ç™»è®°</strong>çš„<code>Symbol</code>çš„<code>key</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">console.log(Symbol.keyFor(Symbol(&quot;name&quot;)));</span><br><span class="line">console.log(Symbol.keyFor(Symbol.for(&quot;name&quot;)));</span><br><span class="line">// undefined</span><br><span class="line">// name</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h2><p><strong>WHAT</strong> ğŸ˜³</p>
<p>ES6æä¾›çš„ä¸€ç§æ•°æ®ç»“æ„ï¼Œç±»ä¼¼äºæ•°ç»„ï¼Œä½†æˆå‘˜çš„å€¼éƒ½æ˜¯å”¯ä¸€çš„ï¼Œæ²¡æœ‰é‡å¤çš„å€¼</p>
<p>Setä½¿ç”¨ä¸€ç§ç±»ä¼¼äº<code>===</code>çš„ç®—æ³•â€œSame-value-zero equalityâ€æ¥åˆ¤æ–­å€¼æ˜¯å¦ç›¸ç­‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// "5" å’Œ 5 ä¸ç›¸ç­‰</span></span><br><span class="line"><span class="comment">// NaN å’Œ NaN ç›¸ç­‰</span></span><br><span class="line"><span class="comment">// ä¸¤ä¸ªç©ºå¯¹è±¡ä¸ç›¸ç­‰</span></span><br><span class="line"><span class="keyword">let</span> <span class="keyword">set</span> = new Set()</span><br><span class="line"><span class="keyword">set</span>.add("5")</span><br><span class="line"><span class="keyword">set</span>.add(5)</span><br><span class="line"><span class="keyword">set</span>.add(NaN)</span><br><span class="line"><span class="keyword">set</span>.add(NaN)</span><br><span class="line"><span class="keyword">set</span>.add(&#123;&#125;)</span><br><span class="line"><span class="keyword">set</span>.add(&#123;&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">set</span>);</span><br><span class="line">// Set &#123; <span class="string">'5'</span>, <span class="number">5</span>, <span class="literal">NaN</span>, &#123;&#125;, &#123;&#125; &#125;</span><br></pre></td></tr></table></figure>

<p><strong>WHY</strong>   ğŸ¤”</p>
<ul>
<li>å¯ä»¥ç”¨ä½œæ•°ç»„å»é‡<code>[...new Set([1, 1, 2, 2, 3])]</code></li>
<li>å»é™¤å­—ç¬¦ä¸²é‡Œé¢çš„é‡å¤å­—ç¬¦<code>[...new Set(&#39;aaabbbc&#39;)].join(&quot;&quot;)</code></li>
</ul>
<p><strong>HOW</strong>   ğŸ˜®</p>
<p><code>Set</code>å‡½æ•°å¯ä»¥æ¥å—ä¸€ä¸ªæ•°ç»„ï¼ˆæˆ–<strong>å…·æœ‰interableæ¥å£</strong>çš„å…¶ä»–æ•°æ®ç»“æ„ï¼‰ä½œä¸ºå‚æ•°ï¼Œç”¨æ¥åˆå§‹åŒ–</p>
<h2 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h2><p><strong>WHAT</strong> ğŸ˜³</p>
<p>ES6æä¾›çš„ä¸€ç§æ•°æ®ç»“æ„ï¼Œç±»ä¼¼äºå¯¹è±¡ï¼Œä¹Ÿæ˜¯é”®-å€¼å¯¹çš„é›†åˆï¼Œä½†é”®çš„èŒƒå›´ä¸é™äºå­—ç¬¦ä¸²ï¼Œå„ç« ç±»å‹çš„å€¼ï¼ˆåŒ…æ‹¬å¯¹è±¡ï¼‰éƒ½å¯ä»¥ä½œä¸ºé”®</p>
<p><strong>WHY</strong>   ğŸ¤”</p>
<p>ä¼ ç»Ÿä¸Šçš„Objectåªèƒ½ç”¨å­—ç¬¦ä¸²ï¼ˆ[Symbol](## Symbol)ï¼‰ä½œä¸ºé”®ï¼Œè¿™ç»™å®ƒçš„ä½¿ç”¨å¸¦æ¥äº†å¾ˆå¤§çš„é™åˆ¶</p>
<p>Mapçš„é”®å®é™…ä¸Šæ˜¯è·Ÿå†…å­˜åœ°å€ç»‘å®šçš„ï¼Œåªè¦å†…å­˜åœ°å€ä¸ä¸€æ ·ï¼Œå°±è§†ä¸ºä¸¤ä¸ªé”®ã€‚è¿™å°±è§£å†³äº†åŒåå±æ€§ç¢°æ’ï¼ˆclashï¼‰çš„é—®é¢˜ï¼Œæˆ‘ä»¬æ‰©å±•åˆ«äººçš„åº“çš„æ—¶å€™ï¼Œå¦‚æœä½¿ç”¨å¯¹è±¡ä½œä¸ºé”®åï¼Œå°±ä¸ç”¨æ‹…å¿ƒè‡ªå·±çš„å±æ€§å’ŒåŸä½œè€…çš„å±æ€§åŒå</p>
<p><strong>HOW</strong>   ğŸ˜®</p>
<p>ä½¿ç”¨ <code>new Map</code> æ¥åˆ›å»ºMap</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>([[<span class="number">2</span>, <span class="string">"2"</span>]])</span><br><span class="line">map.set(<span class="number">1</span>, <span class="string">"1"</span>)</span><br><span class="line"><span class="built_in">console</span>.log(map.get(<span class="number">2</span>));</span><br></pre></td></tr></table></figure>

<p>äº‹å®ä¸Šï¼Œä¸ä»…ä»…æ˜¯æ•°ç»„ï¼Œä»»ä½•å…·æœ‰<code>iterator</code>æ¥å£ã€ä¸”æ²¡ä¸ªæˆå‘˜éƒ½æ˜¯ä¸€ä¸ªåŒå…ƒç´ çš„æ•°ç»„çš„æ•°æ®ç»“æ„éƒ½å¯ä»¥ä½œä¸º<code>Map</code>æ„é€ å‡½æ•°çš„å‚æ•°</p>

        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://mrrs878.github.io/2020/02/17/JavaScriptç›¸å…³-4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr.RS">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/imgs/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mr.RS">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            
            <a href="/2020/02/17/JavaScriptç›¸å…³-4/" class="post-title-link" itemprop="url">JavaScriptç›¸å…³-4</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-02-17 22:25:05 / ä¿®æ”¹æ—¶é—´ï¼š22:25:45" itemprop="dateCreated datePublished" datetime="2020-02-17T22:25:05+08:00">2020-02-17</time>
            </span>
          
            

            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaScript/" itemprop="url" rel="index">
                    <span itemprop="name">JavaScript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="æ¨¡æ‹Ÿå®ç°callã€apply"><a href="#æ¨¡æ‹Ÿå®ç°callã€apply" class="headerlink" title="æ¨¡æ‹Ÿå®ç°callã€apply"></a>æ¨¡æ‹Ÿå®ç°callã€apply</h2><p>å®ç°æ€è·¯ï¼š</p>
<ul>
<li>ä¸ä¼ å…¥ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œé‚£ä¹ˆé»˜è®¤ä¸º<code>window</code></li>
<li>æ”¹å˜äº†<code>this</code>æŒ‡å‘ï¼Œè®©æ–°å¯¹è±¡å¯ä»¥æ‰§è¡Œè¯¥å‡½æ•°ï¼Œé‚£ä¸ªæ€è·¯å¯ä»¥å˜æˆç»™æ–°å¯¹è±¡æ·»åŠ ä¸€ä¸ªå‡½æ•°ï¼Œç„¶ååœ¨æ‰§è¡Œå®Œæˆä¹‹ååˆ é™¤</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.myCall = <span class="function"><span class="keyword">function</span> (<span class="params">context</span>) </span>&#123;</span><br><span class="line">  context = context || <span class="built_in">window</span></span><br><span class="line">  context.fn = <span class="keyword">this</span></span><br><span class="line">  <span class="keyword">const</span> args = [...arguments].slice(<span class="number">1</span>)</span><br><span class="line">  <span class="keyword">const</span> result = context.fn(...args)</span><br><span class="line">  <span class="keyword">delete</span> context.fn</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Function</span>.prototype.myApply = <span class="function"><span class="keyword">function</span>(<span class="params">context</span>) </span>&#123;</span><br><span class="line">  context = context || <span class="built_in">window</span></span><br><span class="line">  context.fn = <span class="keyword">this</span></span><br><span class="line">  <span class="keyword">const</span> result = <span class="built_in">arguments</span>[<span class="number">1</span>] ? context.fn(...arguments[<span class="number">1</span>]) : context.fn()</span><br><span class="line">  <span class="keyword">delete</span> context.fn</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Function</span>.prototype.myBind = <span class="function"><span class="keyword">function</span>(<span class="params">context</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="keyword">this</span> !== <span class="string">'function'</span>)</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">"error"</span>)</span><br><span class="line">  <span class="keyword">const</span> that = <span class="keyword">this</span></span><br><span class="line">  <span class="keyword">const</span> args = [...arguments].slice(<span class="number">1</span>)</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">F</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span> <span class="keyword">instanceof</span> F) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> that(...args, ...arguments)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> that.apply(context, args.concat(...arguments))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> tom = &#123;</span><br><span class="line">  name: <span class="string">"tom"</span>,</span><br><span class="line">  say (tmp1, tmp2) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name, tmp1, tmp2);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> jack = &#123;</span><br><span class="line">  name: <span class="string">"jack"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tom.say.myCall(jack, <span class="string">"111"</span>, <span class="string">"222"</span>)</span><br><span class="line">tom.say.call(jack, <span class="string">"111"</span>, <span class="string">"222"</span>)</span><br><span class="line"></span><br><span class="line">tom.say.myApply(jack, [<span class="string">"111"</span>, <span class="string">"222"</span>])</span><br><span class="line">tom.say.apply(jack, [<span class="string">"111"</span>, <span class="string">"222"</span>])</span><br><span class="line"></span><br><span class="line">tom.say.myBind(jack)(<span class="string">"111"</span>, <span class="string">"222"</span>)</span><br><span class="line">tom.say.bind(jack)(<span class="string">"111"</span>, <span class="string">"222"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// jack 111 222</span></span><br><span class="line"><span class="comment">// jack 111 222</span></span><br><span class="line"><span class="comment">// jack 111 222</span></span><br><span class="line"><span class="comment">// jack 111 222</span></span><br><span class="line"><span class="comment">// jack 111 222</span></span><br><span class="line"><span class="comment">// jack 111 222</span></span><br></pre></td></tr></table></figure>

<h2 id="Promise-å®ç°"><a href="#Promise-å®ç°" class="headerlink" title="Promise å®ç°"></a>Promise å®ç°</h2><p><code>Promise</code>æ˜¯ES6æ–°å¢çš„è¯­æ³•ï¼Œè§£å†³äº†å›è°ƒåœ°ç‹±çš„é—®é¢˜ã€‚å¯ä»¥æŠŠ<code>Promise</code>çœ‹ä½œæ˜¯ä¸€ä¸ªçŠ¶æ€æœºï¼Œå¯ä»¥é€šè¿‡å‡½æ•°<code>resolve</code>å’Œ<code>reject</code>å°†çŠ¶æ€è½¬å˜ä¸º<code>resolved</code>æˆ–<code>rejected</code>ï¼ŒçŠ¶æ€ä¸€æ—¦è½¬å˜å°±ä¸èƒ½å†æ¬¡å˜åŒ–</p>
<p><code>then</code>å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªæ–°çš„<code>Promise</code>å®ä¾‹ã€‚å› ä¸º<code>Promise</code>è§„èŒƒè§„å®šé™¤äº†<code>pending</code>çŠ¶æ€ï¼Œå…¶ä»–çŠ¶æ€æ˜¯ä¸å¯ä»¥æ”¹å˜çš„ï¼Œå¦‚æœè¿”å›çš„æ˜¯ä¸€ä¸ªç›¸åŒå®ä¾‹çš„è¯ï¼Œå¤šä¸ª<code>then</code>è°ƒç”¨å°±å¤±å»æ„ä¹‰äº†</p>
<p>å¯¹äº<code>then</code>ï¼Œæœ¬è´¨ä¸Šå¯ä»¥æŠŠå®ƒçœ‹æˆæ˜¯<code>flatMap</code></p>
<h2 id="Proxy"><a href="#Proxy" class="headerlink" title="Proxy"></a>Proxy</h2><p>proxyæ˜¯ES6ä¸­æ–°å¢çš„åŠŸèƒ½ï¼Œç”¨æ¥å®šä¹‰å¯¹è±¡ä¸­çš„æ“ä½œ</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onwatch</span>(<span class="params">obj, setBind, getLogger</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> handler = &#123;</span><br><span class="line">    <span class="keyword">get</span>(target, property, receiver) &#123;</span><br><span class="line">      getLogger(target, property)</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">Reflect</span>.get(target, property, receiver)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">set</span>(target, property, value) &#123;</span><br><span class="line">      setBind(target, property, value)</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">Reflect</span>.set(target, property, value)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Proxy</span>(obj, handler)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj = &#123; <span class="attr">a</span>: <span class="number">1</span> &#125;</span><br><span class="line"><span class="keyword">let</span> p = onwatch(obj, (target, property, value) =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`set <span class="subst">$&#123; property &#125;</span> = <span class="subst">$&#123; value &#125;</span>`</span>);</span><br><span class="line">&#125;, (target, property) =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`get <span class="subst">$&#123; property &#125;</span> = <span class="subst">$&#123; target[property] &#125;</span>`</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">p.a = <span class="number">2</span></span><br><span class="line"><span class="built_in">console</span>.log(p.a);</span><br><span class="line"></span><br><span class="line"><span class="comment">// set a = 2</span></span><br><span class="line"><span class="comment">// get a = 2</span></span><br></pre></td></tr></table></figure>

<h2 id="æ­£åˆ™è¡¨è¾¾å¼"><a href="#æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼"></a>æ­£åˆ™è¡¨è¾¾å¼</h2><p><strong>å…ƒå­—ç¬¦</strong></p>
<table>
<thead>
<tr>
<th align="center">å…ƒå­—ç¬¦</th>
<th align="center">ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td align="center">.</td>
<td align="center">åŒ¹é…ä»»æ„å­—ç¬¦é™¤äº†æ¢è¡Œã€å›è½¦ç¬¦</td>
</tr>
<tr>
<td align="center">?</td>
<td align="center">ï¼Ÿä¹‹å‰å­—ç¬¦å¯é€‰</td>
</tr>
<tr>
<td align="center">[ ]</td>
<td align="center">åŒ¹é…æ–¹æ‹¬å·å†…ä»»æ„å­—ç¬¦</td>
</tr>
<tr>
<td align="center">^</td>
<td align="center">^9è¡¨ç¤ºåŒ¹é…ä»¥9å¼€å¤´</td>
</tr>
<tr>
<td align="center">{1, 2}</td>
<td align="center">åŒ¹é…1åˆ°2ä½å­—ç¬¦</td>
</tr>
<tr>
<td align="center">(abc)</td>
<td align="center">åªåŒ¹é…abc</td>
</tr>
<tr>
<td align="center">|</td>
<td align="center">åŒ¹é…|å‰åä»»æ„å­—ç¬¦</td>
</tr>
<tr>
<td align="center">\</td>
<td align="center">è½¬ä¹‰</td>
</tr>
<tr>
<td align="center">*</td>
<td align="center">åªåŒ¹é…0æ¬¡åŠä»¥ä¸Š*å‰çš„å­—ç¬¦</td>
</tr>
<tr>
<td align="center">+</td>
<td align="center">åªåŒ¹é…1æ¬¡åŠä»¥ä¸Š*å‰çš„å­—ç¬¦</td>
</tr>
</tbody></table>
<p><strong>ä¿®é¥°è¯­</strong></p>
<table>
<thead>
<tr>
<th align="center">ä¿®é¥°è¯­</th>
<th align="center">ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td align="center">i</td>
<td align="center">å¿½ç•¥å¤§å°å†™</td>
</tr>
<tr>
<td align="center">g</td>
<td align="center">å…¨å±€æœç´¢</td>
</tr>
<tr>
<td align="center">m</td>
<td align="center">å¤šè¡Œ</td>
</tr>
</tbody></table>
<p><strong>å­—ç¬¦ç®€å†™</strong></p>
<table>
<thead>
<tr>
<th align="center">ç®€å†™</th>
<th align="center">ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td align="center">\w</td>
<td align="center">åŒ¹é…å­—æ¯æ•°å­—æˆ–ä¸‹åˆ’çº¿</td>
</tr>
<tr>
<td align="center">\W</td>
<td align="center">å’ŒğŸ‘†ç›¸å</td>
</tr>
<tr>
<td align="center">\s</td>
<td align="center">åŒ¹é…ä»»æ„çš„å­—ç¬¦</td>
</tr>
<tr>
<td align="center">\d</td>
<td align="center">åŒ¹é…æ•°å­—</td>
</tr>
<tr>
<td align="center">\b</td>
<td align="center">åŒ¹é…å•è¯çš„å¼€å§‹æˆ–ç»“æŸ</td>
</tr>
</tbody></table>
<h2 id="åƒåœ¾å›æ”¶æœºåˆ¶"><a href="#åƒåœ¾å›æ”¶æœºåˆ¶" class="headerlink" title="åƒåœ¾å›æ”¶æœºåˆ¶"></a>åƒåœ¾å›æ”¶æœºåˆ¶</h2><p><strong>WHAT</strong></p>
<p>ä¸å†ç”¨åˆ°çš„å†…å­˜æ²¡æœ‰åŠæ—¶é‡Šæ”¾ï¼Œå°±å«åšå†…å­˜æ³„æ¼ã€‚å¦‚æœè¿™ç§æƒ…å†µè¶Šæ¥è¶Šå¤šï¼Œä¼šå¯¼è‡´å†…å­˜ä¸å¤Ÿç”¨è€Œç³»ç»Ÿå´©æºƒã€‚å¾ˆå¤šç¼–ç¨‹è¯­è¨€éœ€è¦æ‰‹åŠ¨é‡Šæ”¾å†…å­˜ï¼Œä½†ä¹Ÿæœ‰ä¸€éƒ¨åˆ†ç¼–ç¨‹è¯­è¨€æä¾›è‡ªåŠ¨å†…å­˜ç®¡ç†ï¼Œè¿™è¢«ç§°ä¸ºåƒåœ¾å›æ”¶æœºåˆ¶ã€‚</p>
<p><strong>WHY</strong></p>
<p>é¿å…å‡ºç°å†…å­˜æ³„æ¼</p>
<p><strong>HOW</strong></p>
<p>V8ä¸‹çš„åƒåœ¾å›æ”¶æœºåˆ¶ï¼š</p>
<p>V8å®ç°äº†å‡†ç¡®å¼GCï¼ŒGCç®—æ³•é‡‡ç”¨äº†åˆ†ä»£å¼åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œå› æ­¤V8å°†å†…å­˜ï¼ˆå †ï¼‰åˆ†ä¸º<strong>æ–°ç”Ÿä»£</strong>å’Œ<strong>è€ç”Ÿä»£</strong>ä¸¤éƒ¨åˆ†</p>
<ul>
<li><p>æ–°ç”Ÿä»£ç®—æ³•</p>
<p>æ–°ç”Ÿä»£ä¸­çš„å¯¹è±¡ä¸€èˆ¬å­˜æ´»æ—¶é—´è¾ƒçŸ­ï¼Œä½¿ç”¨ scavenge GC ç®—æ³•</p>
<p>åœ¨æ–°ç”Ÿä»£ç©ºé—´ä¸­ï¼Œå†…å­˜ç©ºé—´åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œåˆ†åˆ«ä¸º<strong>fromç©ºé—´</strong>å’Œ<strong>toç©ºé—´</strong>ã€‚åœ¨è¿™ä¸¤ä¸ªç©ºé—´ä¸­ï¼Œå¿…å®šæœ‰ä¸€ä¸ªç©ºé—´æ—¶ä½¿ç”¨çš„ï¼Œå¦ä¸€ä¸ªç©ºé—´æ˜¯ç©ºé—²çš„ã€‚æ–°åˆ†é…çš„å¯¹è±¡ä¼šè¢«æ”¾å…¥fromç©ºé—´ä¸­ã€‚å½“fromç©ºé—´è¢«å æ»¡æ—¶ï¼Œæ–°ç”Ÿä»£GCå°±ä¼šå¯åŠ¨äº†ã€‚ç®—æ³•ä¼šæ£€æŸ¥fromç©ºé—´ä¸­å­˜æ´»çš„å¯¹è±¡å¹¶å¤åˆ¶åˆ°toç©ºé—´ä¸­ï¼Œå¦‚æœæœ‰å¤±æ´»çš„å¯¹è±¡å°±ä¼šé”€æ¯ã€‚å½“å¤åˆ¶å®Œæˆåå°†fromç©ºé—´å’Œtoç©ºé—´äº’æ¢ï¼Œè¿™æ ·GCå°±ç»“æŸäº†</p>
</li>
<li><p>è€ç”Ÿä»£ç®—æ³•</p>
<p>è€ç”Ÿä»£ä¸­çš„å¯¹è±¡ä¸€èˆ¬å­˜æ´»äº‹ä»¶è¾ƒå¸¸åˆ‡æ•°é‡ä¹Ÿå¤šï¼Œä½¿ç”¨äº†ä¸¤ä¸ªç®—æ³•ï¼Œåˆ†åˆ«æ˜¯æ ‡è®°æ¸…é™¤ç®—æ³•å’Œæ ‡è®°å‹ç¼©ç®—æ³•</p>
<p>ä»¥ä¸‹æƒ…å†µå¯¹è±¡ä¼šå‡ºç°åœ¨è€ç”Ÿä»£ç©ºé—´ä¸­</p>
<ul>
<li>æ–°ç”Ÿä»£ä¸­çš„å¯¹è±¡å·²ç»å†è¿‡ä¸€æ¬¡scavengeç®—æ³•</li>
<li>toç©ºé—´ä¸­çš„å¯¹è±¡å æ¯”å¤§å°è¶…è¿‡25%ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸ºäº†ä¸å½±å“åˆ°å†…å­˜åˆ†é…ï¼Œä¼šå°†å¯¹è±¡ä»æ–°ç”Ÿä»£ç©ºé—´ç§»åˆ°è€ç”Ÿä»£ç©ºé—´ä¸­</li>
</ul>
<p>åœ¨è€ç”Ÿä»£ä¸­ï¼Œä»¥ä¸‹æƒ…å†µä¼šå¯åŠ¨æ ‡è®°æ¸…æ¥šç®—æ³•</p>
<ul>
<li>æŸä¸€ç©ºé—´æ²¡æœ‰åˆ†å—çš„æ—¶å€™</li>
<li>ç©ºé—´ä¸èƒ½ä¿è¯æ–°ç”Ÿä»£ä¸­çš„å¯¹è±¡ç§»åŠ¨åˆ°è€ç”Ÿä»£ä¸­</li>
</ul>
<p>åœ¨è¿™ä¸ªé˜¶æ®µä¸­ï¼Œä¼šéå†å †ä¸­æ‰€æœ‰çš„å¯¹è±¡ï¼Œç„¶åæ ‡è®°æ´»çš„å¯¹è±¡ï¼Œåœ¨æ ‡è®°å®Œæˆåï¼Œé”€æ¯æ‰€æœ‰æ²¡æœ‰è¢«æ ‡è®°çš„å¯¹è±¡ã€‚åœ¨æ ‡è®°å¤§å‹å †å†…å­˜æ—¶ï¼Œå¯èƒ½éœ€è¦å‡ ç™¾æ¯«ç§’æ‰èƒ½å®Œæˆä¸€æ¬¡æ ‡è®°ï¼Œè¿™å°±ä¼šå¯¼è‡´ä¸€äº›æ€§èƒ½ä¸Šçš„é—®é¢˜ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ2011å¹´V8ä»stop-the-worldæ ‡è®°åˆ‡æ¢åˆ°å¢é‡æ ‡è®°</p>
<p>æ¸…æ¥šå¯¹è±¡åä¼šé€ æˆå †å†…å­˜å‡ºç°ç¢ç‰‡çš„æƒ…å†µï¼Œå½“ç¢ç‰‡è¶…è¿‡ä¸€å®šå…ˆä¹‹åä¼šå¯åŠ¨å‹ç¼©ç®—æ³•ï¼Œåœ¨å‹ç¼©è¿‡ç¨‹ä¸­å°†è´è¶å¯¹è±¡å‘ä¸€ç«¯ç§»åŠ¨ï¼Œç›´åˆ°æ‰€æœ‰å¯¹è±¡éƒ½ç§»åŠ¨å®Œæˆåæ¸…ç†æ‰ä¸éœ€è¦çš„å†…å­˜</p>
</li>
</ul>
<h2 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h2><ol>
<li><p>ç»å…¸ç»§æ‰¿ï¼ˆæ„é€ å‡½æ•°ï¼‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Father</span>(<span class="params">colors</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.colors = colors</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Son</span>(<span class="params">colors</span>) </span>&#123;</span><br><span class="line">  Father.call(<span class="keyword">this</span>, colors)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> s = <span class="keyword">new</span> Son([<span class="string">"red"</span>, <span class="string">"green"</span>, <span class="string">"blue"</span>])</span><br><span class="line"><span class="built_in">console</span>.log(s.colors);</span><br></pre></td></tr></table></figure>

<p>ä¼˜ç‚¹ï¼š</p>
<p>â€‹    å¯ä»¥ä¼ é€’æ„é€ å‚æ•°</p>
<p>ç¼ºç‚¹ï¼š</p>
<ul>
<li>ç»§æ‰¿çš„æ–¹æ³•éƒ½åœ¨æ„é€ å‡½æ•°ä¸­å®šä¹‰ï¼Œæ„é€ å‡½æ•°ä¸èƒ½å¤Ÿå¤ç”¨äº†</li>
<li>çˆ¶ç±»ä¸­å®šä¹‰çš„æ–¹æ³•å¯¹äºå­ç±»è€Œè¨€æ˜¯ä¸å¯è§çš„</li>
</ul>
</li>
<li><p>åŸå‹ç»§æ‰¿</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">object</span>(<span class="params">o</span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">F</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  F.prototype = o</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> F()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">  name: <span class="string">"tom"</span>,</span><br><span class="line">  friends: [<span class="string">"jack"</span>, <span class="string">"linda"</span>]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> p1 = object(person)</span><br><span class="line">p1.name = <span class="string">"p1"</span></span><br><span class="line">p1.friends.push(<span class="string">"bob"</span>)</span><br><span class="line"><span class="keyword">let</span> p2 = <span class="built_in">Object</span>.create(person)</span><br><span class="line">p2.name = <span class="string">"p2"</span></span><br><span class="line">p2.friends.push(<span class="string">"lili"</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(person.friends);</span><br></pre></td></tr></table></figure>

<p>åœ¨<code>object</code>å‡½æ•°å†…éƒ¨ï¼Œå…ˆåˆ›å»ºäº†ä¸€ä¸ªä¸´æ—¶æ€§çš„æ„é€ å‡½æ•°ï¼Œç„¶åå°†ä¼ å…¥çš„å¯¹è±¡ä½œä¸ºè¿™ä¸ªæ„é€ å‡½æ•°çš„åŸå‹ï¼Œæœ€åè¿”å›äº†è¿™ä¸ªä¸´æ—¶ç±»å‹çš„ä¸€ä¸ªå®ä¾‹ã€‚ä»æœ¬è´¨ä¸Šè®²ï¼Œ<code>object()</code>å°†ä¼ å…¥å…¶ä¸­çš„å¯¹è±¡æ‰§è¡Œäº†ä¸€æ¬¡<strong>æµ…å¤åˆ¶</strong></p>
<p>åŸå‹ç»§æ‰¿é€‚ç”¨äºåªæƒ³è®©ä¸€ä¸ªå¯¹è±¡ä¸å¦ä¸€ä¸ªå¯¹è±¡ä¿æŒç±»ä¼¼çš„æƒ…å†µ</p>
</li>
<li><p>ç»„åˆç»§æ‰¿ ğŸ‘</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Father</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name</span><br><span class="line">  <span class="keyword">this</span>.colors = [<span class="string">"red"</span>, <span class="string">"green"</span>, <span class="string">"blue"</span>]</span><br><span class="line">&#125;</span><br><span class="line">Father.prototype.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Son</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ç»§æ‰¿çˆ¶ç±»å±æ€§ï¼Œç¬¬ä¸€æ¬¡è°ƒç”¨Father() </span></span><br><span class="line">  Father.call(<span class="keyword">this</span>, name)</span><br><span class="line">  <span class="keyword">this</span>.age = age</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç»§æ‰¿çˆ¶ç±»æ–¹æ³•ï¼Œç¬¬äºŒæ¬¡è°ƒç”¨Father()</span></span><br><span class="line">Son.prototype = <span class="keyword">new</span> Father()</span><br><span class="line">Son.prototype.sayAge = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.age)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> s1 = <span class="keyword">new</span> Son(<span class="string">"tom"</span>, <span class="number">21</span>)</span><br><span class="line">s1.colors.push(<span class="string">"black"</span>)</span><br><span class="line"><span class="built_in">console</span>.log(s1.colors)</span><br><span class="line">s1.sayAge()</span><br><span class="line">s1.sayName()</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> s2 = <span class="keyword">new</span> Son(<span class="string">"jack"</span>, <span class="number">22</span>)</span><br><span class="line"><span class="built_in">console</span>.log(s2.colors)</span><br></pre></td></tr></table></figure>
</li>
<li><p>å¯„ç”Ÿå¼ç»§æ‰¿</p>
<p>å¯„ç”Ÿå¼ç»§æ‰¿æ˜¯ä¸åŸå‹é“¾ç»§æ‰¿ç´§å¯†ç›¸å…³çš„ä¸€ç§æ€è·¯ã€‚å¯„ç”Ÿå¼ç»§æ‰¿çš„æ€è·¯ä¸å¯„ç”Ÿæ„é€ å‡½æ•°å’Œå·¥å‚æ¨¡å¼ç±»ä¼¼ï¼Œå³åˆ›å»ºä¸€ä¸ªä»…ç”¨äºå°è£…ç»§æ‰¿è¿‡ç¨‹çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°åœ¨å†…éƒ¨ä»¥æŸç§æ–¹å¼æ¥å¢å¼ºå¯¹è±¡ï¼Œæœ€åå†åƒçœŸçš„æ˜¯å®ƒåšäº†æ‰€æœ‰å·¥ä½œä¸€æ ·è¿”å›å¯¹è±¡ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createAnother</span>(<span class="params">original</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// object(): ä»»ä½•èƒ½è¿”å›æ–°å¯¹è±¡çš„å‡½æ•°</span></span><br><span class="line">    <span class="keyword">const</span> clone = object(original)</span><br><span class="line">    clone.sayHi = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        conosle.log(<span class="string">"hi"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> clone                </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿ ğŸ‘ğŸ‘</p>
<p>ç»„åˆç»§æ‰¿çš„æœ€å¤§é—®é¢˜åœ¨äºæ— è®ºä»€ä¹ˆæƒ…å†µä¸‹éƒ½ä¼šè°ƒç”¨ä¸¤æ¬¡çˆ¶ç±»å‹æ„é€ å‡½æ•°</p>
<p>å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿å³<strong>é€šè¿‡å€Ÿç”¨æ„é€ å‡½æ•°æ¥ç»§æ‰¿å±æ€§ï¼Œé€šè¿‡åŸå‹é“¾çš„æ··æˆå½¢å¼æ¥ç»§æ‰¿æ–¹æ³•</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">inheritPrototype</span>(<span class="params">subType, superType</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> prototype = <span class="built_in">Object</span>.create(superType.prototype)</span><br><span class="line">  prototype.constructor = subType</span><br><span class="line">  subType.prototype = prototype</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name</span><br><span class="line">  <span class="keyword">this</span>.colors = [<span class="string">"red"</span>, <span class="string">"green"</span>, <span class="string">"blue"</span>]</span><br><span class="line">&#125;</span><br><span class="line">SuperType.prototype.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubType</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  SuperType.call(<span class="keyword">this</span>, name)</span><br><span class="line">  <span class="keyword">this</span>.age = age</span><br><span class="line">&#125;</span><br><span class="line">inheritPrototype(SubType, SuperType)</span><br><span class="line">SubType.prototype.sayAge = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.age)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> sub1 = <span class="keyword">new</span> SubType(<span class="string">"sub1"</span>, <span class="number">21</span>)</span><br><span class="line">sub1.sayAge()</span><br><span class="line">sub1.sayName()</span><br></pre></td></tr></table></figure>

</li>
</ol>

        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://mrrs878.github.io/2020/02/14/JavaScriptç›¸å…³-3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr.RS">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/imgs/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mr.RS">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            
            <a href="/2020/02/14/JavaScriptç›¸å…³-3/" class="post-title-link" itemprop="url">JavaScriptç›¸å…³-3</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-02-14 23:22:46 / ä¿®æ”¹æ—¶é—´ï¼š23:23:32" itemprop="dateCreated datePublished" datetime="2020-02-14T23:22:46+08:00">2020-02-14</time>
            </span>
          
            

            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaScript/" itemprop="url" rel="index">
                    <span itemprop="name">JavaScript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="æ‰§è¡Œä¸Šä¸‹æ–‡"><a href="#æ‰§è¡Œä¸Šä¸‹æ–‡" class="headerlink" title="æ‰§è¡Œä¸Šä¸‹æ–‡"></a>æ‰§è¡Œä¸Šä¸‹æ–‡</h2><p>å½“æ‰§è¡ŒJavaScriptä»£ç æ—¶ï¼Œä¼šäº§ç”Ÿä¸‰ç§æ‰§è¡Œä¸Šä¸‹æ–‡ï¼š</p>
<ul>
<li>å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡</li>
<li>å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡</li>
<li><code>eval</code>æ‰§è¡Œä¸Šä¸‹æ–‡</li>
</ul>
<p>æ¯ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ä¸­éƒ½æœ‰ä¸‰ç§é‡è¦çš„å±æ€§ï¼š</p>
<ul>
<li>å˜é‡å¯¹è±¡ï¼ˆVOï¼‰ï¼ŒåŒ…å«å˜é‡ã€å‡½æ•°å£°æ˜å’Œå‡½æ•°çš„å½¢å‚ï¼Œè¯¥å±æ€§åªèƒ½åœ¨å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­è®¿é—®ï¼ˆå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­å°‰AOï¼‰</li>
<li>ä½œç”¨åŸŸé“¾ï¼ˆScopeï¼‰ï¼ŒJavaScripté‡‡ç”¨è¯æ³•ä½œç”¨åŸŸï¼Œä¹Ÿå°±æ˜¯è¯´å˜é‡çš„ä½œç”¨åŸŸå®åœ¨å®šä¹‰çš„æ—¶å€™å°±å†³å®šäº†ï¼ŒåŒ…å«è‡ªèº«å˜é‡å¯¹è±¡å’Œä¸Šçº§å˜é‡å¯¹è±¡çš„åˆ—è¡¨ï¼Œé€šè¿‡<code>[[Scope]]</code>å±æ€§æŸ¥æ‰¾ä¸Šçº§å˜é‡</li>
<li><code>this</code></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">10</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">i</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> b = <span class="number">20</span></span><br><span class="line">&#125;</span><br><span class="line">foo()</span><br><span class="line"></span><br><span class="line">stack = [</span><br><span class="line">    globalContext,</span><br><span class="line">    fooContext</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">globalContext.VO === global</span><br><span class="line">globalContext.VO = &#123;</span><br><span class="line">    a: <span class="literal">undefined</span>,</span><br><span class="line">    foo: <span class="xml"><span class="tag">&lt;<span class="name">Function</span>&gt;</span></span></span><br><span class="line"><span class="xml">&#125;</span></span><br><span class="line"><span class="xml">fooContext.AO === foo.AO</span></span><br><span class="line"><span class="xml">fooContext.AO = &#123;</span></span><br><span class="line"><span class="xml">    i: undefined,</span></span><br><span class="line"><span class="xml">    b: undefined,</span></span><br><span class="line"><span class="xml">    arguments: <span class="tag">&lt;&gt;</span></span></span><br><span class="line"><span class="xml">&#125;</span></span><br><span class="line"><span class="xml">// arguments æ˜¯å‡½æ•°ç‹¬æœ‰çš„å¯¹è±¡ï¼ˆç®­å¤´å‡½æ•°æ²¡æœ‰ï¼‰</span></span><br><span class="line"><span class="xml">// è¯¥å¯¹è±¡æ—¶ä¸€ä¸ªä¼ªæ•°ç»„</span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">fooContext.[[Scope]] = &#123;</span></span><br><span class="line"><span class="xml">    globalContext.VO</span></span><br><span class="line"><span class="xml">&#125;</span></span><br><span class="line"><span class="xml">fooContext.Scope = fooContext.[[Scope]] + fooContext.VO</span></span><br><span class="line"><span class="xml">fooContext.Scope = [</span></span><br><span class="line"><span class="xml">    fooContext.VO,</span></span><br><span class="line"><span class="xml">    globalContext.VO</span></span><br><span class="line"><span class="xml">]</span></span><br></pre></td></tr></table></figure>

<h2 id="å˜é‡æå‡"><a href="#å˜é‡æå‡" class="headerlink" title="å˜é‡æå‡"></a>å˜é‡æå‡</h2><p>é€šä¿—è§£é‡Šï¼š</p>
<p>å°†å£°æ˜çš„ä»£ç ç§»åŠ¨åˆ°äº†é¡¶éƒ¨</p>
<p>å‡†ç¡®è§£é‡Šï¼šğŸ‘</p>
<p>åœ¨ç”Ÿæˆæ‰§è¡Œä¸Šä¸‹æ–‡æ—¶ï¼Œä¼šæœ‰ä¸¤ä¸ªé˜¶æ®µ</p>
<ol>
<li>åˆ›å»ºçš„é˜¶æ®µï¼ˆå…·ä½“æ­¥éª¤æ˜¯åˆ›å»ºVOï¼‰ï¼ŒJavaScriptè§£é‡Šå™¨ä¼šæ‰¾å‡ºéœ€è¦æå‡çš„å˜é‡å’Œå‡½æ•°ï¼Œå¹¶ä¸”ç»™å®ƒä»¬æå‰åœ¨å†…å­˜ä¸­å¼€è¾Ÿå¥½ç©ºé—´ï¼Œå‡½æ•°çš„è¯ä¼šå°†æ•´ä¸ªå‡½æ•°å­˜å…¥å†…å­˜ï¼Œå˜é‡ä¹‹ç”Ÿå‘½å¹¶ä¸”èµ‹å€¼ä¸º<code>undefined</code></li>
<li>ä»£ç æ‰§è¡Œé˜¶æ®µï¼ˆå¯ä»¥ç›´æ¥ä½¿ç”¨å˜é‡/å‡½æ•°ï¼‰</li>
</ol>
<h2 id="é˜²æŠ–"><a href="#é˜²æŠ–" class="headerlink" title="é˜²æŠ–"></a>é˜²æŠ–</h2><p>åœ¨ä¸€å®šæ—¶é—´å¤šæ¬¡è§¦å‘ä½†å†…åªè°ƒç”¨ä¸€æ¬¡</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">debounce</span> (<span class="params">func, wait = <span class="number">50</span>, immediate = true</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> timer, context, args;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> later = <span class="function"><span class="params">()</span> =&gt;</span> setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    timer = <span class="literal">null</span></span><br><span class="line">    <span class="keyword">if</span> (!immediate) &#123;</span><br><span class="line">      func.apply(context, args)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, wait)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">...params</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (timer) &#123;</span><br><span class="line">      clearTimeout(timer)</span><br><span class="line">      timer = later()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      timer = later()</span><br><span class="line">      <span class="keyword">if</span> (immediate) &#123;</span><br><span class="line">        func.apply(<span class="keyword">this</span>, params)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        context = <span class="keyword">this</span></span><br><span class="line">        args = params</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://mrrs878.github.io/2020/02/12/JavaScriptç›¸å…³-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr.RS">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/imgs/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mr.RS">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            
            <a href="/2020/02/12/JavaScriptç›¸å…³-2/" class="post-title-link" itemprop="url">JavaScriptç›¸å…³-2</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-02-12 22:53:13" itemprop="dateCreated datePublished" datetime="2020-02-12T22:53:13+08:00">2020-02-12</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-02-18 10:44:40" itemprop="dateModified" datetime="2020-02-18T10:44:40+08:00">2020-02-18</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaScript/" itemprop="url" rel="index">
                    <span itemprop="name">JavaScript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h2><p><strong>WHAT</strong></p>
<p><strong>Promise</strong> å¯¹è±¡ç”¨äºè¡¨ç¤ºä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„æœ€ç»ˆå®Œæˆ (æˆ–å¤±è´¥), åŠå…¶ç»“æœå€¼.</p>
<p>å¼‚æ­¥ç¼–ç¨‹çš„ä¸€ç§è§£å†³æ–¹æ¡ˆ</p>
<p><code>Promise</code>å¯èƒ½å¤„äºä»¥ä¸‹ä¸‰ä¸ªçŠ¶æ€ä¹‹ä¸€ï¼š<code>fulfilled</code>ã€<code>rejected</code>ã€<code>pending</code>ã€‚ç”¨æˆ·å¯ä»¥å¯¹<code>Promise</code>æ·»åŠ å›è°ƒå‡½æ•°æ¥å¤„ç†æ“ä½œæˆåŠŸçš„ç»“æœæˆ–å¤±è´¥çš„åŸå› </p>
<p><strong>WHY</strong></p>
<p>ä¼ ç»Ÿçš„å¼‚æ­¥ç¼–ç¨‹ç¼ºç‚¹éš¾ä»¥å¿å—:</p>
<ul>
<li>ä»£ç è‡ƒè‚¿</li>
<li>å¯è¯»æ€§å·®</li>
<li>è€¦åˆåº¦è¿‡é«˜ï¼Œå¯ç»´æŠ¤æ€§å·®</li>
<li>ä»£ç å¤ç”¨æ€§å·®</li>
<li>åªèƒ½åœ¨å›è°ƒé‡Œå¤„ç†å¼‚å¸¸</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">è¯·æ±‚<span class="number">1</span>(<span class="function"><span class="keyword">function</span>(<span class="params">è¯·æ±‚ç»“æœ<span class="number">1</span></span>)</span>&#123;</span><br><span class="line">    è¯·æ±‚<span class="number">2</span>(<span class="function"><span class="keyword">function</span>(<span class="params">è¯·æ±‚ç»“æœ<span class="number">2</span></span>)</span>&#123;</span><br><span class="line">        è¯·æ±‚<span class="number">3</span>(<span class="function"><span class="keyword">function</span>(<span class="params">è¯·æ±‚ç»“æœ<span class="number">3</span></span>)</span>&#123;</span><br><span class="line">            è¯·æ±‚<span class="number">4</span>(<span class="function"><span class="keyword">function</span>(<span class="params">è¯·æ±‚ç»“æœ<span class="number">4</span></span>)</span>&#123;</span><br><span class="line">                è¯·æ±‚<span class="number">5</span>(<span class="function"><span class="keyword">function</span>(<span class="params">è¯·æ±‚ç»“æœ<span class="number">5</span></span>)</span>&#123;</span><br><span class="line">                    è¯·æ±‚<span class="number">6</span>(<span class="function"><span class="keyword">function</span>(<span class="params">è¯·æ±‚ç»“æœ<span class="number">6</span></span>)</span>&#123;</span><br><span class="line">                        ...</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(è¯·æ±‚<span class="number">1</span>)</span><br><span class="line">    .then(è¯·æ±‚<span class="number">2</span>(è¯·æ±‚ç»“æœ<span class="number">1</span>))</span><br><span class="line">    .then(è¯·æ±‚<span class="number">3</span>(è¯·æ±‚ç»“æœ<span class="number">2</span>))</span><br><span class="line">    .then(è¯·æ±‚<span class="number">4</span>(è¯·æ±‚ç»“æœ<span class="number">3</span>))</span><br><span class="line">    .then(è¯·æ±‚<span class="number">5</span>(è¯·æ±‚ç»“æœ<span class="number">4</span>))</span><br><span class="line">    .catch(å¤„ç†å¼‚å¸¸(å¼‚å¸¸ä¿¡æ¯))</span><br></pre></td></tr></table></figure>

<p><strong>HOW</strong></p>
<p>å¸¸ç”¨APIï¼š</p>
<ul>
<li><p><code>Promise.resolve(value)</code></p>
<p>è¿”å›ä¸€ä¸ªçŠ¶æ€ç”±ç»™å®šçš„<code>value</code>å†³å®šçš„<code>Promise</code>å¯¹è±¡ã€‚å¦‚æœè¯¥å€¼æ—¶<code>theable</code>ï¼ˆå³å¸¦æœ‰thenæ–¹æ³•çš„å¯¹è±¡ï¼‰ï¼Œè¿”å›çš„<code>Promise</code>å¯¹è±¡çš„æœ€ç»ˆçŠ¶æ€æ˜¯ç”±<code>then</code>æ–¹æ³•å†³å®šï¼›å¦åˆ™ï¼ˆè¯¥<code>value</code>ä¸ºç©ºã€åŸºæœ¬ç±»å‹æˆ–ä¸å¸¦<code>then</code>æ–¹æ³•çš„å¯¹è±¡ï¼‰è¿”å›çš„<code>Promise</code>å¯¹è±¡çŠ¶æ€ä¸º<code>fulfilled</code>ï¼Œå¹¶ä¸”å°†è¯¥<code>value</code>ä¼ é€’ç»™å¯¹åº”çš„<code>then</code>æ–¹æ³•ã€‚é€šå¸¸ï¼Œå¦‚æœä¸çŸ¥é“ä¸€ä¸ªå€¼æ˜¯å¦æ˜¯<code>Promise</code>å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨<code>Promsie.resolve(value)</code>æ¥è¿”å›ä¸€ä¸ª<code>Promise</code>å¯¹è±¡ï¼Œè¿™æ ·å°±èƒ½å°†è¯¥<code>value</code>ä»¥<code>Promise</code>å¯¹è±¡å½¢å¼ä½¿ç”¨</p>
</li>
<li><p><code>Promise.reject(value)</code></p>
<p>è¿”å›ä¸€ä¸ªçŠ¶æ€ä¸ºå¤±è´¥çš„<code>Promise</code>å¯¹è±¡ï¼Œå¹¶å°†ç»™å®šçš„å¤±è´¥ä¿¡æ¯ä¼ é€’ç»™å¯¹åº”çš„å‡ºå¤„ç†æ–¹æ³•</p>
</li>
<li><p><code>Promise.race(interable)</code></p>
<p>å½“<code>interable</code>å‚æ•°é‡Œçš„ä»»æ„ä¸€ä¸ªå­<code>promise</code>è¢«æ‰§è¡Œå¤±è´¥æˆ–æˆåŠŸåï¼Œçˆ¶<code>promise</code>é©¬ä¸Šä¹Ÿä¼šç”¨å­<code>promise</code>çš„æˆåŠŸè¿”å›å€¼æˆ–å¤±è´¥è¯¦æƒ…ä½œä¸ºå‚æ•°è°ƒç”¨çˆ¶<code>promsie</code>ç»‘å®šçš„ç›¸åº”å¥æŸ„å¹¶è¿”å›è¯¥<code>promsie</code>å¯¹è±¡</p>
</li>
<li><p><code>Promise.all(interable)</code></p>
<p>è¿™ä¸ªæ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„<code>promise</code>å¯¹è±¡ï¼Œè¯¥<code>promise</code>å¯¹è±¡åœ¨<code>interable</code>å‚æ•°å¯¹è±¡é‡Œæ‰€æœ‰çš„<code>promise</code>å¯¹è±¡éƒ½æˆåŠŸçš„æ—¶å€™æ‰ä¼šè§¦å‘æˆåŠŸï¼Œä¸€æ—¦æœ‰ä»»ä½•ä¸€ä¸ª<code>interable</code>é‡Œçš„<code>promise</code>å¯¹è±¡å¤±è´¥åˆ™ç«‹å³è§¦å‘è¯¥<code>promise</code>å¯¹è±¡çš„å¤±è´¥ã€‚è¿™ä¸ªæ–°çš„<code>promise</code>å¯¹è±¡åœ¨è§¦å‘æˆåŠŸçŠ¶æ€ä»¥åï¼Œä¼šæŠŠä¸€ä¸ªåŒ…å«<code>interable</code>é‡Œæ‰€æœ‰<code>promise</code>è¿”å›å€¼çš„æ•°ç»„ä½œä¸ºæˆåŠŸå›è°ƒçš„è¿”å›å€¼ï¼Œé¡ºåºè·Ÿ<code>interable</code>çš„é¡ºåºä¿æŒä¸€è‡´ï¼›å¦‚æœè¿™ä¸ªæ–°çš„<code>promise</code>å¯¹è±¡å‡ºå‘äº†å¤±è´¥çŠ¶æ€ï¼Œå®ƒä¼šæŠŠ<code>interable</code>é‡Œç¬¬ä¸€ä¸ªè§¦å‘å¤±è´¥çš„<code>promise</code>å¯¹è±¡çš„é”™è¯¯ä¿¡æ¯ä½œä¸ºå®ƒçš„å¤±è´¥é”™è¯¯ä¿¡æ¯ã€‚<code>Promise.all</code>æ–¹æ³•å¸¸ç”¨äºå¤„ç†å¤šä¸ª<code>promise</code>å¯¹è±¡çš„çŠ¶æ€é›†åˆ</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">"fs"</span>)</span><br><span class="line"></span><br><span class="line">fs.readFile(<span class="string">"./index.html"</span>, &#123; <span class="attr">encoding</span>: <span class="string">"utf8"</span> &#125;, (err, data) =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(err, data);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_readFile</span>(<span class="params">path, options</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    fs.readFile(<span class="string">"./index.html"</span>, options, (err, data) =&gt; &#123;</span><br><span class="line">      <span class="keyword">if</span>(err)</span><br><span class="line">        reject(err)</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">        resolve(data)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">(<span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> data = <span class="keyword">await</span> _readFile(<span class="string">"./index.html"</span>, <span class="string">"utf8"</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(data);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>

<h2 id="éå†å¯¹è±¡çš„å±æ€§å’Œæ•°ç»„å…ƒç´ çš„æ–¹æ³•"><a href="#éå†å¯¹è±¡çš„å±æ€§å’Œæ•°ç»„å…ƒç´ çš„æ–¹æ³•" class="headerlink" title="éå†å¯¹è±¡çš„å±æ€§å’Œæ•°ç»„å…ƒç´ çš„æ–¹æ³•"></a>éå†å¯¹è±¡çš„å±æ€§å’Œæ•°ç»„å…ƒç´ çš„æ–¹æ³•</h2><p>å¯¹è±¡ï¼š</p>
<ul>
<li><p><code>for</code>å¾ªç¯ ğŸ‘</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> property <span class="keyword">in</span> obj)</span><br><span class="line">    <span class="built_in">console</span>.log(property)</span><br></pre></td></tr></table></figure>

<p>ç¼ºç‚¹ï¼šä¼šéå†åˆ°å®ƒçš„ç»§æ‰¿å±æ€§ï¼Œåœ¨ä½¿ç”¨ä¹‹å‰éœ€è¦åŠ å…¥<code>obj.hasOwnProperty(property)</code></p>
</li>
<li><p><code>Object.keys(obj).forEach()</code> ğŸ‘</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.keys(obj).forEach(<span class="function"><span class="params">property</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(property)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><code>Object.keys</code>è¿”å›ä¸€ä¸ªæœ‰ç»™å®šå¯¹è±¡çš„è‡ªèº«å¯æšä¸¾å±æ€§ç»„æˆçš„æ•°ç»„</p>
</li>
<li><p><code>Object.getOwnPropertyNames(obj).forEach</code> ğŸ‘</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.getOwnPropertyNames(obj).forEach(<span class="function"><span class="params">property</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(property)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><code>Object.getOwnPropertyNames</code>è¿”å›ä¸€ä¸ªç”±æŒ‡å®šå¯¹è±¡çš„æ‰€æœ‰è‡ªèº«å±æ€§çš„å±æ€§åï¼ˆåŒ…æ‹¬ä¸å¯æšä¸¾å±æ€§ä½†ä¸åŒ…æ‹¬<code>Symbol</code>å€¼ä½œä¸ºåç§°çš„å±æ€§ï¼‰ç»„æˆçš„æ•°ç»„</p>
</li>
<li><p><code>Reflect.ownKeys(target)</code> ğŸ‘</p>
<p>åŸºæœ¬ç­‰åŒäº<code>Object.getOwnPeopertyNames</code> + <code>Object.getOwnPropertySymbols</code></p>
</li>
</ul>
<p>æ•°ç»„ï¼š<strong>å„å–æ‰€éœ€</strong></p>
<ul>
<li><p><code>for</code>å¾ªç¯</p>
<p>æ™®é€šéå†æ–¹æ³•ï¼Œè¾ƒå¸¸ç”¨</p>
</li>
<li><p><code>arr.forEach</code></p>
<p>ç›¸è¾ƒäº<code>for</code>ï¼Œ<code>forEach</code>ä¸å¯æå‰ç»“æŸå¾ªç¯</p>
</li>
<li><p><code>arr.map/reduce</code></p>
</li>
</ul>
<h2 id="å¯å˜å¯¹è±¡å’Œä¸å¯å˜å¯¹è±¡"><a href="#å¯å˜å¯¹è±¡å’Œä¸å¯å˜å¯¹è±¡" class="headerlink" title="å¯å˜å¯¹è±¡å’Œä¸å¯å˜å¯¹è±¡"></a>å¯å˜å¯¹è±¡å’Œä¸å¯å˜å¯¹è±¡</h2><p><strong>å¯å˜å¯¹è±¡</strong>åœ¨åˆ›å»ºä¹‹åæ˜¯å¯ä»¥è¢«æ”¹å˜çš„</p>
<p><strong>ä¸å¯å˜å¯¹è±¡</strong>åœ¨åˆ›å»ºä¹‹åæ˜¯ä¸å¯ä»¥è¢«æ”¹å˜çš„</p>
<ol>
<li>åœ¨<code>JavaScript</code>ä¸­ï¼Œ<code>string</code>å’Œ<code>number</code>ä»è®¾è®¡ä¹‹åˆå°±æ˜¯ä¸å¯å˜çš„ï¼ˆimmediateï¼‰</li>
<li>ä¸å¯å˜å¯¹è±¡æ˜¯ä¿æŒä¸€ä¸ªå¯¹è±¡çŠ¶æ€ä¸å˜ï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯æ˜¯çš„å¼€å‘æ›´åŠ ç®€å•ã€å¯å›æº¯ã€æµ‹è¯•å‹å¥½ï¼Œå‡å°‘äº†ä»»ä½•å¯èƒ½çš„å‰¯ä½œç”¨ã€‚ä½†æ˜¯ï¼Œæ¯å½“æƒ³æ·»åŠ ç‚¹ä¸œè¥¿åˆ°ä¸€ä¸ªä¸å¯å˜å¯¹è±¡é‡Œæ—¶ï¼Œå®ƒä¸€å®šæ˜¯å…ˆæ‹·è´å·²å­˜åœ¨çš„å€¼åˆ°æ–°å®ä¾‹é‡Œï¼Œç„¶åå†ç»™æ–°å®ä¾‹æ·»åŠ å†…å®¹ï¼Œæœ€åè¿”å›æ–°å®ä¾‹ã€‚ç›¸æ¯”å¯å˜å¯¹è±¡ï¼Œè¿™åŠ¿å¿…ä¼šæœ‰æ›´å¤šå†…å­˜ã€è®¡ç®—é‡æ¶ˆè€—</li>
</ol>
<p>åˆ›å»ºä¸€ä¸ªçº¯å‡½æ•°ï¼ˆpure functionï¼‰</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> student = &#123;</span><br><span class="line">    school: <span class="string">"baidu"</span>,</span><br><span class="line">    name: <span class="string">"tom"</span>,</span><br><span class="line">    age: <span class="number">21</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateStudent</span>(<span class="params">student, name, age</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        ...student,</span><br><span class="line">        name,</span><br><span class="line">        age</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="åŒæ­¥å‡½æ•°å’Œå¼‚æ­¥å‡½æ•°"><a href="#åŒæ­¥å‡½æ•°å’Œå¼‚æ­¥å‡½æ•°" class="headerlink" title="åŒæ­¥å‡½æ•°å’Œå¼‚æ­¥å‡½æ•°"></a>åŒæ­¥å‡½æ•°å’Œå¼‚æ­¥å‡½æ•°</h2><p>åŒæ­¥å‡½æ•°é˜»å¡ï¼Œå¼‚æ­¥å‡½æ•°ä¸é˜»å¡ã€‚åœ¨åŒæ­¥å‡½æ•°ä¸­ï¼Œè¯­å¥å®Œæˆåä¸‹ä¸€å¥æ‰æ‰§è¡Œï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç¨‹åºå¯ä»¥æŒ‰ç…§è¯­å¥çš„é¡ºåºè¿›è¡Œç²¾ç¡®è¯„ä¼°ï¼Œå¦‚æœå…¶ä¸­ä¸€ä¸ªè¯­å¥éœ€è¦å¾ˆé•¿æ—¶é—´ï¼Œé‚£ä¹ˆç¨‹åºçš„æ‰§è¡Œä¼šåœæ»å¾ˆé•¿æ—¶é—´</p>
<p>å¼‚æ­¥å‡½æ•°é€šå¸¸æ¥å—å›è°ƒä½œä¸ºå‚æ•°ï¼Œåœ¨è°ƒç”¨å¼‚æ­¥å‡½æ•°åç«‹å³ç»§ç»­æ‰§è¡Œä¸‹ä¸€è¡Œã€‚å›è°ƒå‡½æ•°ä»…åœ¨å¼‚æ­¥æ“ä½œå®Œæˆä¸”è°ƒç”¨å †æ ˆä¸ºç©ºæ—¶è°ƒç”¨ï¼Œè¯¸å¦‚ä»webæœåŠ¡å™¨åŠ è½½æ•°æ®æˆ–æŸ¥è¯¢æ•°æ®åº“ç­‰é‡è´Ÿè½½æ“ä½œåº”è¯¥å¼‚æ­¥å®Œæˆï¼Œä»¥ä¾¿ä¸»çº¿ç¨‹å¯ä»¥ç»§ç»­æ‰§è¡Œå…¶ä»–æ“ä½œè€Œä¸ä¼šå‡ºç°ä¸€ç›´é˜»å¡</p>
<p>åœ¨JavaScriptä¸­å¼‚æ­¥å‡½æ•°çš„è§£å†³æ–¹æ¡ˆé€šå¸¸æœ‰callbackã€Promiseã€async/await</p>
<h2 id="JavaScriptæ‰§è¡Œæœºåˆ¶"><a href="#JavaScriptæ‰§è¡Œæœºåˆ¶" class="headerlink" title="JavaScriptæ‰§è¡Œæœºåˆ¶"></a>JavaScriptæ‰§è¡Œæœºåˆ¶</h2><ul>
<li><p><strong>JavaScriptçš„æ‰§è¡Œä¸è¿è¡Œ</strong></p>
<p>æ‰§è¡Œå’Œä¸è¿è¡Œä¸å¤ªç›¸åŒï¼Œåœ¨ä¸åŒç¯å¢ƒä¸‹ï¼Œæ¯”å¦‚Nodeã€æµè§ˆå™¨ä¸‹ï¼ŒJavaScriptçš„æ‰§è¡Œç»“æœæ˜¯ä¸ä¸€æ ·çš„ï¼›è€Œè¿è¡Œå¤§å¤šæ˜¯æŒ‡åŸºäºJavaScriptå¼•æ“ï¼Œå¦‚V8ï¼Œç»“æœæ˜¯ä¸€è‡´çš„ </p>
</li>
<li><p><strong>å…³äºJavaScript</strong></p>
<p>ä¼—æ‰€å‘¨çŸ¥ï¼ŒJavaScriptæ˜¯ä¸€é—¨<strong>å•çº¿ç¨‹</strong>ã€<strong>å¼‚æ­¥æ‰§è¡Œ</strong>çš„è¯­è¨€ï¼Œè™½ç„¶åœ¨HTML5ä¸­æå‡ºäº†<strong>web workers</strong>ï¼ˆå¯ä»¥ç†è§£ä¸º<strong>æµè§ˆå™¨</strong>ä¸ºJavaScriptå¼€çš„â€œå¤–æŒ‚â€ï¼‰ï¼Œä½†JavaScriptæ˜¯å•çº¿ç¨‹è¿è¡Œçš„è¿™ä¸€æ ¸å¿ƒä»æœªæ”¹å˜ï¼Œæ‰€æœ‰å¤šçº¿ç¨‹éƒ½æ˜¯é€šè¿‡å•çº¿ç¨‹<strong>æ¨¡æ‹Ÿ</strong>å‡ºæ¥çš„</p>
</li>
<li><p><strong>JavaScriptä¸­çš„å¼‚æ­¥</strong> <strong>event-loop</strong></p>
<p>JavaScriptä¸­çš„å¼‚æ­¥ä¸»è¦é€šè¿‡<strong>event loop</strong>è¿›è¡Œæ¨¡æ‹Ÿå½“æˆ‘ä»¬æ‰§è¡ŒJavaScriptä»£ç çš„æ—¶å€™å…¶å®å°±æ˜¯å¾€æ‰§è¡Œæ ˆä¸­æ”¾å…¥å‡½æ•°ï¼Œé‚£ä¹ˆé‡åˆ°å¼‚æ­¥ä»£ç æ€ä¹ˆåŠï¼Ÿå…¶å®å½“é‡åˆ°å¼‚æ­¥ä»£ç æ—¶ï¼Œä¼šè¢«æŒ‚èµ·å¹¶åœ¨éœ€è¦æ‰§è¡Œçš„æ—¶å€™åŠ å…¥åˆ°<strong>Task</strong>ï¼ˆæœ‰å¤šç§Taskï¼‰é˜Ÿåˆ—ä¸­ã€‚ä¸€æ—¦æ‰§è¡Œæ ˆä¸ºç©ºï¼Œ<strong>event loop</strong>å°±ä¼šä»<strong>Task</strong>ä¸­æ‹¿å‡ºéœ€è¦æ‰§è¡Œçš„ä»£ç å¹¶æ”¾å…¥æ‰§è¡Œæ ˆä¸­æ‰§è¡Œï¼Œæ‰€ä»¥æœ¬è´¨ä¸Šè¯´JavaScriptä¸­çš„å¼‚æ­¥è¿˜æ˜¯åŒæ­¥è¡Œä¸º</p>
</li>
<li><p><strong>æµè§ˆå™¨ä¸­çš„event loop</strong></p>
<p>æ¥è‡ªä¸åŒçš„<strong>ä»»åŠ¡æº</strong>çš„ä»»åŠ¡ä¼šè¢«åˆ†é…åˆ°ä¸åŒçš„Taské˜Ÿåˆ—ä¸­ï¼Œä»»åŠ¡æºå¯ä»¥åˆ†ä¸º<strong>å¾®ä»»åŠ¡ï¼ˆmicro taskï¼‰</strong>å’Œ<strong>å®ä»»åŠ¡ï¼ˆmacro taskï¼‰</strong>ã€‚åœ¨ES6è§„èŒƒä¸­ï¼Œå¾®ä»»åŠ¡è¢«ç§°ä¸ºjobsï¼Œå®ä»»åŠ¡è¢«ç§°ä¸ºtask</p>
<p>å¾®ä»»åŠ¡åŒ…æ‹¬ï¼š<code>precess.nextTick</code>ã€<code>promise</code>ã€<code>Mutation Observer</code></p>
<p>å®ä»»åŠ¡åŒ…æ‹¬ï¼š<code>script</code>ã€<code>setTimeout</code>ã€<code>setInterval</code>ã€<code>setImmediate</code>ã€<code>I/O</code>ã€UI Rendering</p>
<p><strong>å®ä»»åŠ¡ä¸­åŒ…å«äº†<code>script</code>ï¼Œå› æ­¤æµè§ˆå™¨ä¼šå…ˆæ‰§è¡Œä¸€ä¸ªå®ä»»åŠ¡ï¼Œæ¥ä¸‹æ¥ç”±å¼‚æ­¥ä»£ç çš„è¯æ‰ä¼šå…ˆæ‰§è¡Œå¾®ä»»åŠ¡</strong></p>
<p><strong>event loopæ‰§è¡Œé¡ºåº</strong>ï¼š</p>
<ol>
<li>å…ˆæ‰§è¡ŒåŒæ­¥ä»£ç ï¼Œè¿™å±äºå®ä»»åŠ¡</li>
<li>å½“<strong>æ‰§è¡Œå®Œæ‰€æœ‰åŒæ­¥ä»£ç </strong>åæ‰§è¡Œæ ˆä¸ºç©ºï¼ŒæŸ¥è¯¢æ˜¯å¦æœ‰å¼‚æ­¥ä»£ç éœ€è¦æ‰§è¡Œ</li>
<li><strong>æ‰§è¡Œæ‰€æœ‰å¾®ä»»åŠ¡</strong></li>
<li>å½“æ‰§è¡Œå®Œæ‰€æœ‰å¾®ä»»åŠ¡ï¼Œå¦‚æœ‰å¿…è¦ä¼šæ¸²æŸ“é¡µé¢</li>
<li>ç„¶åå¼€å§‹ä¸‹ä¸€è½®<code>event loop</code>ï¼Œæ‰§è¡Œå®ä»»åŠ¡ä¸­çš„å¼‚æ­¥ä»£ç ä¹Ÿå°±æ˜¯<code>setTimeout</code>ï¼ˆå®ä»»åŠ¡ï¼‰ä¸­çš„å›è°ƒå‡½æ•°</li>
</ol>
<p><img src="./imgs/browser_event_loop.png" alt="æµè§ˆå™¨ä¸­çš„event loop"></p>
<p><img src="./imgs/browser_event_loop2.png" alt="æµè§ˆå™¨ä¸­çš„event loop"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">  <span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">3</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">4</span>);</span><br><span class="line">  resolve(<span class="number">5</span>);</span><br><span class="line">&#125;).then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data);</span><br><span class="line">&#125;);</span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">6</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">7</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1 4 7 5 2 3 6</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Node.jsä¸­çš„event loop</strong></p>
<p>Node.jsä¸­çš„<code>event loop</code>åˆ†ä¸º6ä¸ªé˜¶æ®µï¼Œä»–ä»¬ä¼šæŒ‰ç…§é¡ºåºåå¤è¿è¡Œã€‚æ¯å½“è¿›å…¥æŸä¸€ä¸ªé˜¶æ®µçš„æ—¶å€™éƒ½ä¼šä»å¯¹åº”çš„å›è°ƒé˜Ÿåˆ—ä¸­å–å‡ºå‡½æ•°å»æ‰§è¡Œã€‚å½“<strong>é˜Ÿåˆ—ä¸ºç©º</strong>æˆ–è€…<strong>æ‰§è¡Œçš„å›è°ƒå‡½æ•°æ•°é‡åˆ°è¾¾ç³»ç»Ÿè®¾å®šçš„é˜ˆå€¼</strong>ï¼Œå°±ä¼šè¿›å…¥ä¸‹ä¸€é˜¶æ®µ</p>
<p><img src="./imgs/node_event_loop.png" alt="Node.jsä¸­çš„event loop"></p>
<ol>
<li><p><strong>timers</strong></p>
<p><strong>timers</strong>é˜¶æ®µä¼šæ‰§è¡Œ<code>setTimeout</code>å’Œ<code>setinterval</code>å›è°ƒï¼Œå¹¶ä¸”æ˜¯ç”±<strong>poll</strong>é˜¶æ®µæ§åˆ¶çš„ã€‚åŒæ ·åœ¨<code>Node.js</code>ä¸­å®šæ—¶å™¨æŒ‡å®šçš„äº‹ä»¶ä¹Ÿä¸æ˜¯å‡†ç¡®æ—¶é—´ï¼Œåªæ˜¯å°½å¿«æ‰§è¡Œ</p>
</li>
<li><p><strong>I/O</strong></p>
<p><strong>I/O</strong>é˜¶æ®µä¼šå¤„ç†ä¸€äº›ä¸Šä¸€è½®å¾ªç¯ä¸­å°‘è®¸æœªæ‰§è¡Œçš„<strong>I/O</strong>å›è°ƒ</p>
</li>
<li><p><strong>idle,prepare</strong></p>
</li>
<li><p><strong>poll</strong></p>
<p><strong>poll</strong>æ˜¯ä¸€ä¸ªè‡³å…³é‡è¦çš„é˜¶æ®µï¼Œåœ¨è¿™ä¸€é˜¶æ®µä¸­ï¼Œç³»ç»Ÿä¼šåšä¸¤ä»¶äº‹æƒ…</p>
<ol>
<li><p>å›åˆ°<strong>timer</strong>é˜¶æ®µæ‰§è¡Œå›è°ƒ</p>
</li>
<li><p>æ‰§è¡Œ<strong>I/O</strong>å›è°ƒï¼Œå¹¶ä¸”åœ¨è¿›å…¥è¯¥é˜¶æ®µæ—¶å¦‚æœæ²¡æœ‰è®¾å®šäº†<strong>timer</strong>çš„è¯ï¼Œä¼šå‘ç”Ÿä»¥ä¸‹ä¸¤ä»¶äº‹æƒ…</p>
</li>
</ol>
<ul>
<li>å¦‚æœ<strong>poll</strong>é˜Ÿåˆ—ä¸ä¸ºç©ºï¼Œä¼šéå†å›è°ƒé˜Ÿåˆ—å¹¶åŒæ­¥æ‰§è¡Œï¼Œç›´åˆ°é˜Ÿåˆ—ä¸ºç©ºæˆ–è€…è¾¾åˆ°ç³»ç»Ÿé™åˆ¶</li>
<li>å¦‚æœ<strong>poll</strong>é˜Ÿåˆ—ä¸ºç©º<ul>
<li>å¦‚æœæœ‰<code>setImmediate</code>å›è°ƒéœ€è¦æ‰§è¡Œï¼Œ<strong>poll</strong>é˜¶æ®µä¼šåœæ­¢å¹¶ä¸”<strong>è¿›å…¥åˆ°checké˜¶æ®µ</strong>æ‰§è¡Œå›è°ƒ</li>
<li>å¦‚æœæ²¡æœ‰ï¼Œä¼šç­‰å¾…å›è°ƒè¢«åŠ å…¥åˆ°é˜Ÿåˆ—ä¸­å¹¶ç«‹å³æ‰§è¡Œå›è°ƒï¼Œè¿™é‡ŒåŒæ ·ä¼šæœ‰ä¸ªè¶…æ—¶æ—¶é—´é˜²æ­¢ä¸€ç›´ç­‰å¾…ä¸‹å»</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>check</strong></p>
<p>æ‰§è¡Œ<code>setImmediate</code></p>
</li>
<li><p><strong>close callbacks</strong></p>
<p>æ‰§è¡Œcloseäº‹ä»¶</p>
</li>
</ol>
<p><img src="./imgs/node_event_loop2.png" alt="Node.jsä¸­çš„event loop"></p>
</li>
</ul>
<h2 id="ES6çš„ç±»å’ŒES6çš„æ„é€ å‡½æ•°çš„åŒºåˆ«"><a href="#ES6çš„ç±»å’ŒES6çš„æ„é€ å‡½æ•°çš„åŒºåˆ«" class="headerlink" title="ES6çš„ç±»å’ŒES6çš„æ„é€ å‡½æ•°çš„åŒºåˆ«"></a>ES6çš„ç±»å’ŒES6çš„æ„é€ å‡½æ•°çš„åŒºåˆ«</h2><p>åœ¨æ™®é€šä½¿ç”¨ä¸­æ²¡æœ‰åŒºåˆ«ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(name) &#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸»è¦åŒºåˆ«åœ¨äºç±»ç»§æ‰¿ä¸Šï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">name, id</span>) </span>&#123;</span><br><span class="line">    Person.call(<span class="keyword">this</span>, name)</span><br><span class="line">    <span class="keyword">this</span>.id = id</span><br><span class="line">&#125;</span><br><span class="line">Student.prototype = <span class="built_in">Object</span>.create(Person.prototype)</span><br><span class="line">Student.prototype.constructor = Student</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    consreuctor(name, id) &#123;</span><br><span class="line">        <span class="keyword">super</span>(name)</span><br><span class="line">        <span class="keyword">this</span>.id = id</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ‰©å±•è¿ç®—ç¬¦å’Œå‰©ä½™å‚æ•°è¯­å¥çš„åŒºåˆ«"><a href="#æ‰©å±•è¿ç®—ç¬¦å’Œå‰©ä½™å‚æ•°è¯­å¥çš„åŒºåˆ«" class="headerlink" title="æ‰©å±•è¿ç®—ç¬¦å’Œå‰©ä½™å‚æ•°è¯­å¥çš„åŒºåˆ«"></a>æ‰©å±•è¿ç®—ç¬¦å’Œå‰©ä½™å‚æ•°è¯­å¥çš„åŒºåˆ«</h2><p>åœ¨å‡½æ•°æ³›å‹ç¼–ç æ—¶ï¼ŒES6çš„æ‰©å±•è¿ç®—ç¬¦éå¸¸æœ‰ç”¨å—ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥è½»æ¾åˆ›å»ºæ•°ç»„å’Œå¯¹è±¡çš„æ‹·è´ï¼Œè€Œæ— éœ€ä½¿ç”¨<code>Object.create</code>ã€<code>slice</code>æˆ–å…¶ä»–å‡½æ•°åº“ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> [ ...arr, <span class="string">"test"</span> ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> result = test([<span class="string">"hello"</span>, <span class="string">"world"</span>])</span><br><span class="line"><span class="comment">// ["hello", "world", "test"]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> person = &#123;</span><br><span class="line">    name: <span class="string">"tom"</span>,</span><br><span class="line">    age: <span class="number">21</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> copyPerson = &#123; ...person &#125;</span><br></pre></td></tr></table></figure>

<p>ES6çš„å‰©ä½™å‚æ•°è¯­å¥æä¾›äº†ä¸€ä¸ªç®€å†™ï¼Œå…è®¸æˆ‘ä»¬å°†ä¸å®šæ•°é‡çš„å‚æ•°è¡¨ç¤ºä¸ºä¸€ä¸ª<strong>æ•°ç»„</strong>ï¼Œå®ƒå°±åƒæ‰©å±•è¿ç®—ç¬¦è¯­æ³•çš„åé¢ï¼Œå°†æ•°æ®æ”¶é›†åˆ°æ•°ç»„ä¸­è€Œä¸æ˜¯è§£æ„æ•°ç»„ã€‚å‰©ä½™å‚æ•°è¯­å¥åœ¨å‡½æ•°å‚æ•°ã€æ•°ç»„å’Œå¯¹è±¡çš„è§£æ„èµ‹å€¼ä¸­æœ‰å¾ˆå¤§ä½œç”¨</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">...numbers</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> numbers.map(<span class="function"><span class="params">x</span> =&gt;</span> x + <span class="number">5</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> result1 = test(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line"><span class="comment">// [6, 7, 8, 9]</span></span><br><span class="line"><span class="keyword">const</span> result2 = test(<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>)</span><br><span class="line"><span class="comment">// [10, 11, 12, 13, 14]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> [ a, b, ...rest ] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"><span class="comment">// 1 2 [ 3, 4 ]</span></span><br></pre></td></tr></table></figure>

<h2 id="å†…ç½®ç±»å‹"><a href="#å†…ç½®ç±»å‹" class="headerlink" title="å†…ç½®ç±»å‹"></a>å†…ç½®ç±»å‹</h2><p>JavaScriptä¸­åˆ†ä¸º<strong>ä¸ƒç§</strong>å†…ç½®ç±»å‹ï¼Œå…¶ä¸­å†…ç½®ç±»å‹åˆåˆ†ä¸ºä¸¤å¤§ç±»å‹ï¼š<strong>åŸºæœ¬ç±»å‹</strong>å’Œ<strong>å¼•ç”¨ç±»å‹</strong>ï¼ˆå¯¹è±¡ Objectï¼‰</p>
<p>åŸºæœ¬ç±»å‹ï¼š<code>null</code>ã€<code>undefined</code>ã€<code>boolean</code>ã€<code>number</code>ã€<code>string</code>ã€<code>symbol</code></p>
<p>å…¶ä¸­JavaScriptçš„æ•°å­—ç±»å‹æ˜¯æµ®ç‚¹ç±»å‹çš„ï¼Œæ²¡æœ‰æ•´å½¢ã€‚å¹¶ä¸”æµ®ç‚¹ç±»å‹åŸºäº IEEE 754 æ ‡å‡†å®ç°ï¼Œåœ¨ä½¿ç”¨ä¸­ä¼šé‡åˆ°æŸäº› <a href="#2">Bug </a><code>NaN</code>ä¹Ÿå±äº<code>number</code>ç±»å‹å¹¶ä¸”<code>NaN</code>å¹¶ä¸ç­‰äºè‡ªèº«</p>
<p>å¯¹äºåŸºæœ¬ç±»å‹æ¥è¯´ï¼Œå¦‚æœä½¿ç”¨å­—é¢é‡çš„æ–¹å¼ï¼Œé‚£ä¸ªè¿™ä¸ªå˜é‡åªæ˜¯ä¸ªå­—é¢é‡ï¼Œåªæœ‰åœ¨å¿…è¦çš„æ—¶å€™æ‰ä¼šè½¬æ¢æˆå¯¹åº”çš„ç±»å‹</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">111</span> <span class="comment">// è¿™åªæ˜¯å­—é¢é‡ï¼Œä¸æ˜¯numberç±»å‹</span></span><br><span class="line">a.toString() <span class="comment">// ä½¿ç”¨çš„æ—¶å€™æ‰ä¼šè½¬æ¢ä¸ºå¯¹è±¡ç±»å‹</span></span><br></pre></td></tr></table></figure>

<p>å¼•ç”¨ç±»å‹åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ä¼šé‡åˆ°æ·±æ‹·è´å’Œæµ…æ‹·è´é—®é¢˜</p>
<h2 id="Typeof"><a href="#Typeof" class="headerlink" title="Typeof"></a>Typeof</h2><p><code>typeof</code>å¯¹äºåŸºæœ¬ç±»å‹ï¼Œé™¤äº†<code>null</code>éƒ½å¯ä»¥æ˜¾ç¤ºæ­£ç¡®çš„ç±»å‹</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> <span class="number">1</span> <span class="comment">// number</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="string">'1'</span> <span class="comment">// string</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">undefined</span> <span class="comment">// undefined</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">true</span> <span class="comment">// boolean</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="built_in">Symbol</span>() <span class="comment">// symbol</span></span><br></pre></td></tr></table></figure>

<p><code>typeof</code>å¯¹äºå¯¹è±¡ï¼Œé™¤äº†å‡½æ•°éƒ½ä¼šæ˜¾ç¤º<code>object</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> [] <span class="comment">// object</span></span><br><span class="line"><span class="keyword">typeof</span> &#123;&#125; <span class="comment">// object</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="built_in">console</span>.log <span class="comment">// function</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">null</span> <span class="comment">// object</span></span><br></pre></td></tr></table></figure>

<p>å…³äºä¸ºä»€ä¹ˆ<code>typeof null == object</code>ï¼šåœ¨JavaScriptçš„æœ€åˆç‰ˆæœ¬ä¸­ï¼Œä½¿ç”¨çš„æ˜¯32ä¸ºç³»ç»Ÿï¼Œä¸ºäº†æ€§èƒ½è€ƒè™‘ä½¿ç”¨ä½ä½å­˜å‚¨äº†å˜é‡çš„ç±»å‹ä¿¡æ¯ã€‚<code>000</code>å¼€å¤´çš„ä»£è¡¨æ˜¯å¯¹è±¡ï¼Œç„¶è€Œ<code>null</code>è¡¨ç¤ºä¸ºå…¨é›¶ï¼Œæ‰€ä»¥å°†å®ƒé”™è¯¯çš„åˆ¤æ–­ä¸º<code>object</code></p>
<p>å¦‚æœæƒ³å¾—åˆ°ä¸€ä¸ªæ­£ç¡®çš„æ•°æ®ç±»å‹ï¼Œä½¿ç”¨<code>Object.prototype.toString.call(xxx)</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.prototype.toString.call([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br></pre></td></tr></table></figure>

<h2 id="instanceof"><a href="#instanceof" class="headerlink" title="instanceof"></a>instanceof</h2><p><code>instance</code>å¯ä»¥æ­£ç¡®çš„åˆ¤æ–­å¯¹è±¡çš„ç±»å‹ï¼Œå› ä¸ºå†…éƒ¨æœºåˆ¶æ˜¯é€šè¿‡åˆ¤æ–­å¯¹è±¡çš„åŸå‹é“¾ä¸­æ˜¯ä¸æ˜¯èƒ½æ­£ç¡®çš„æ‰¾åˆ°ç±»å‹çš„<code>prototype</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">instanceof</span>(<span class="params">left, right</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> prototype = right.prototype</span><br><span class="line">    left = left.__proto__</span><br><span class="line">    <span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (left === <span class="literal">null</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        <span class="keyword">if</span> (prototypr === left)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">        left = left.__proto__</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="new"><a href="#new" class="headerlink" title="new"></a>new</h2><p>åœ¨è°ƒç”¨<code>new</code>çš„è¿‡ç¨‹ä¸­ä¼šå‘ç”Ÿä»¥ä¸‹å››ä»¶äº‹æƒ…</p>
<ol>
<li>æ–°ç”Ÿæˆäº†ä¸€ä¸ªå¯¹è±¡</li>
<li>ç»‘å®šåˆ°åŸå‹</li>
<li>ç»‘å®š<code>this</code></li>
<li>è¿”å›æ–°å¯¹è±¡</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">create</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> obj = <span class="keyword">new</span> <span class="built_in">Object</span>()</span><br><span class="line">    <span class="keyword">let</span> Con = [].shift.call(<span class="built_in">arguments</span>)</span><br><span class="line">    obj.__proto__ = Con.prototype</span><br><span class="line">    <span class="keyword">let</span> result = Con.apply(obj, <span class="built_in">arguments</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">typeof</span> result === <span class="string">'object'</span> ? result : obj</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://mrrs878.github.io/2020/02/11/JavaScriptç›¸å…³-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr.RS">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/imgs/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mr.RS">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            
            <a href="/2020/02/11/JavaScriptç›¸å…³-1/" class="post-title-link" itemprop="url">JavaScriptç›¸å…³-1</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-02-11 23:33:22" itemprop="dateCreated datePublished" datetime="2020-02-11T23:33:22+08:00">2020-02-11</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-02-12 23:16:12" itemprop="dateModified" datetime="2020-02-12T23:16:12+08:00">2020-02-12</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaScript/" itemprop="url" rel="index">
                    <span itemprop="name">JavaScript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="document-write"><a href="#document-write" class="headerlink" title="document.write"></a>document.write</h2><p><code>document.write()</code> æ–¹æ³•å°†ä¸€ä¸ªæ–‡æœ¬å­—ç¬¦ä¸²å†™å…¥ä¸€ä¸ªç”± <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document/open" target="_blank" rel="noopener"><code>document.open()</code></a> æ‰“å¼€çš„æ–‡æ¡£æµï¼ˆdocument streamï¼‰ã€‚ï¼ˆ<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document/write" target="_blank" rel="noopener">MDN</a>ï¼‰</p>
<p>ä½œç”¨ï¼š</p>
<p>åŠ è½½åªæœ‰å¯ç”¨JavaScriptåçš„æ ·å¼æ–‡ä»¶</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.open()</span></span><br><span class="line"><span class="xml">    docuemnt.write('<span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"style_neads_js.css"</span> /&gt;</span>')</span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.close()</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å¼Šç«¯ï¼š</p>
<ul>
<li>åœ¨éloadingé˜¶æ®µä½¿ç”¨<code>docuemnt.write</code>ä¼šæ¸…é™¤å·²åŠ è½½çš„é¡µé¢</li>
<li><code>docuemnt.write</code>ä¸èƒ½å¤Ÿåœ¨XHTMLä¸­ä½¿ç”¨</li>
<li>åµŒå…¥scriptä¸­çš„<code>docuemnt.write</code>ä¸èƒ½ç»™ä»»æ„èŠ‚ç‚¹æ·»åŠ å­èŠ‚ç‚¹ï¼Œå› ä¸ºå®ƒæ˜¯éšç€DOMçš„æ„å»ºæ‰§è¡Œçš„</li>
<li>åˆ©ç”¨<code>docuemnt.write</code>å†™å…¥HTMLå­—ç¬¦æµå¹¶ä¸æ˜¯ä¸€ä¸ªå¥½æ–¹æ³•ï¼Œå®ƒæœ‰è¿DOMæ“ä½œçš„æ¦‚å¿µ</li>
<li>åˆ©ç”¨<code>docuemnt.write</code>æ·»åŠ scriptåŠ è½½å¤–éƒ¨è„šæœ¬æ—¶ï¼Œæµè§ˆå™¨çš„HTMLè§£æä¼šè¢«scriptçš„åŠ è½½æ‰€é˜»å¡</li>
</ul>
<h2 id="åŠŸèƒ½æ£€æµ‹ï¼ˆfeature-detectionï¼‰ã€åŠŸèƒ½æ¨æ–­ï¼ˆfeature-inferenceï¼‰ã€å’Œä½¿ç”¨UAå­—ç¬¦ä¸²ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«"><a href="#åŠŸèƒ½æ£€æµ‹ï¼ˆfeature-detectionï¼‰ã€åŠŸèƒ½æ¨æ–­ï¼ˆfeature-inferenceï¼‰ã€å’Œä½¿ç”¨UAå­—ç¬¦ä¸²ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«" class="headerlink" title="åŠŸèƒ½æ£€æµ‹ï¼ˆfeature detectionï¼‰ã€åŠŸèƒ½æ¨æ–­ï¼ˆfeature inferenceï¼‰ã€å’Œä½¿ç”¨UAå­—ç¬¦ä¸²ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«"></a>åŠŸèƒ½æ£€æµ‹ï¼ˆfeature detectionï¼‰ã€åŠŸèƒ½æ¨æ–­ï¼ˆfeature inferenceï¼‰ã€å’Œä½¿ç”¨UAå­—ç¬¦ä¸²ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«</h2><p>åŠŸèƒ½æ£€æµ‹ï¼ˆfeature detectionï¼‰ ğŸ‘</p>
<p>åŠŸèƒ½æ£€æµ‹åŒ…æ‹¬ç¡®å®šæµè§ˆå™¨æ˜¯å¦æ”¯æŒæŸæ®µä»£ç ï¼Œä»¥åŠæ˜¯å¦èƒ½è¿è¡Œä¸åŒçš„ä»£ç ï¼ˆå–å†³äºå®ƒæ˜¯å¦æ‰§è¡Œï¼‰ï¼Œä¸€è¾¹æµè§ˆå™¨èƒ½å§‹ç»ˆæ­£ç¡®è¿è¡Œä»£ç åŠŸèƒ½ï¼Œè€Œä¸ä¼šåœ¨æŸäº›æµè§ˆå™¨ä¸­å‡ºç°å´©æºƒå’Œé”™è¯¯</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="string">"geolocation"</span> <span class="keyword">in</span> navigator) &#123;</span><br><span class="line">    <span class="comment">// å¯ä»¥ä½¿ç”¨ navigator.geolocation</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// å¤„ç† navigator.geolocation åŠŸèƒ½ç¼ºå¤±</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åŠŸèƒ½æ¨æ–­ï¼ˆfeature inferenceï¼‰ğŸ‘</p>
<p>åŠŸèƒ½æ¨æ–­ä¸åŠŸèƒ½æ£€æµ‹ä¸€æ ·ï¼Œä¼šå¯¹åŠŸèƒ½å¯ç”¨æ€§è¿›è¡Œæ£€æŸ¥ï¼Œä½†æ˜¯åœ¨åˆ¤æ–­é€šè¿‡åè¿˜ä¼šä½¿ç”¨å…¶ä»–åŠŸèƒ½ï¼Œå› ä¸ºå®ƒå‡è®¾å…¶ä»–åŠŸèƒ½ä¹Ÿå¯ç”¨</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="built_in">document</span>.getElementsByTagName) &#123;</span><br><span class="line">  element = <span class="built_in">document</span>.getElementById(id);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>UA ğŸ‘</p>
<p>è¿™æ˜¯ä¸€ä¸ªæµè§ˆå™¨æŠ¥å‘Šçš„å­—ç¬¦ä¸²ï¼Œå®ƒå…è®¸ç½‘ç»œåè®®å¯¹ç­‰æ–¹ï¼ˆnetwork protocol peersï¼‰è¯†åˆ«è¯·æ±‚ç”¨æˆ·ä»£ç†çš„åº”ç”¨ç±»å‹ã€æ“ä½œç³»ç»Ÿã€åº”ç”¨ä¾›åº”å•†å’Œåº”ç”¨ç‰ˆæœ¬ã€‚å®ƒå¯ä»¥é€šè¿‡<code>navigator.userAgent</code>è®¿é—®ã€‚ç„¶è€Œï¼Œè¿™ä¸ªå­—ç¬¦ä¸²å¾ˆå¯èƒ½å­˜åœ¨æ¬ºéª—æ€§ï¼Œä¾‹å¦‚ï¼Œchromeä¼šåŒæ—¶ä½œä¸ºchromeå’Œsafariè¿›è¡ŒæŠ¥å‘Šï¼Œå› æ­¤ï¼Œè¦æ£€æµ‹safariï¼Œé™¤äº†æ£€æŸ¥safariå­—ç¬¦ä¸²ï¼Œè¿˜è¦æ£€æŸ¥æ˜¯å¦åŒæ—¶å­˜åœ¨chromeå­—ç¬¦ä¸²ã€‚</p>
<h2 id="Ajax"><a href="#Ajax" class="headerlink" title="Ajax"></a>Ajax</h2><p><strong>WHAT</strong></p>
<p>Ajaxï¼ˆasynchronous JavaScript and XMLï¼‰æ˜¯ä½¿ç”¨å®¢æˆ·ç«¯ä¸Šçš„è®¸å¤šwebæŠ€æœ¯ï¼Œåˆ›å»ºå¼‚æ­¥webåº”ç”¨çš„ä¸€ç§<strong>æŠ€æœ¯ç»“åˆä½“</strong>ã€‚å€ŸåŠ©Ajaxï¼Œwebåº”ç”¨å¯ä»¥<strong>å¼‚æ­¥</strong>ï¼ˆåœ¨åå°ï¼‰å‘æœåŠ¡å™¨å‘é€æ•°æ®å¯ä»æœåŠ¡å™¨æ£€ç´¢æ•°æ®è€Œä¸ä¼šå¹²æ‰°ç°æœ‰é¡µé¢çš„æ˜¾ç¤ºå’Œè¡Œä¸ºã€‚é€šè¿‡å°†<strong>æ•°æ®äº¤äº’å±‚ä¸è¡¨ç¤ºå±‚åˆ†ç¦»</strong>ï¼ŒAjaxå…è®¸ç½‘é¡µå’Œæ‰©å±•webåº”ç”¨ç¨‹åºåŠ¨æ€æ›´æ”¹å†…å®¹è€Œ<strong>ä¸éœ€é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢</strong>ï¼Œå®é™…ä¸Šï¼Œç°åœ¨é€šå¸¸å°†XMLæ›¿æ¢ä¸ºJSONï¼Œå› ä¸ºJavaScriptå¯¹JSONæœ‰åŸç”Ÿæ”¯æŒä¼˜åŠ¿</p>
<p><strong>WHY</strong></p>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>äº¤äº’æ€§æ›´å¥½ï¼Œæ¥è‡ªæœåŠ¡å™¨çš„æ–°å†…å®¹å¯ä»¥åŠ¨æ€æ›´æ”¹ï¼Œæ— éœ€é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢</li>
<li>å‡å°‘ä¸æœåŠ¡å™¨çš„è¿æ¥ï¼Œå› ä¸ºè„šæœ¬å’Œæ ·å¼åªéœ€è¦è¢«è¯·æ±‚ä¸€æ¬¡</li>
<li>çŠ¶æ€å¯ä»¥ç»´æŠ¤åœ¨ä¸€ä¸ªé¡µé¢ä¸Šï¼ŒJavaScriptå˜é‡å’ŒDOMçŠ¶æ€å°†çš„åˆ°ä¿æŒï¼Œå› ä¸ºä¸»å®¹å™¨é¡µé¢æœªè¢«é‡æ–°åŠ è½½</li>
<li>åŸºæœ¬ä¸ŠåŒ…å«å¤§éƒ¨åˆ†SPAçš„ä¼˜ç‚¹</li>
</ul>
<p>ç¼ºç‚¹</p>
<ul>
<li>åŠ¨æ€ç½‘é¡µå¾ˆéš¾æ”¶è—</li>
<li>å¦‚æœJavaScriptåœ¨æµè§ˆå™¨ä¸­è¢«ç¦ç”¨åˆ™ä¸èµ·ä½œç”¨</li>
<li>æœ‰äº›ç½‘ç»œçˆ¬è™«ä¸æ‰§è¡ŒJavaScriptï¼Œä¹Ÿä¸ä¼šçœ‹åˆ°JavaScriptåŠ è½½çš„å†…å®¹</li>
</ul>
<p><strong>HOW</strong></p>
<ul>
<li>ä½¿ç”¨<code>CSS</code>å’Œ<code>XHTML</code>æ¥è¡¨ç¤º</li>
<li>ä½¿ç”¨<code>DOM</code>æ¨¡å‹æ¥äº¤äº’å’ŒåŠ¨æ€æ˜¾ç¤º</li>
<li>ä½¿ç”¨<code>XMLHttpRequest</code>æ¥å’ŒæœåŠ¡å™¨è¿›è¡Œå¼‚æ­¥é€šä¿¡</li>
<li>ä½¿ç”¨<code>JavaScript</code>æ¥ç»‘å®šå’Œè°ƒç”¨</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ajax = &#123;&#125;;</span><br><span class="line">ajax.httpRequest = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">window</span>.XMLHttpRequest) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> versions = [</span><br><span class="line">        <span class="string">"MSXML2.XmlHttp.6.0"</span>,</span><br><span class="line">        <span class="string">"MSXML2.XmlHttp.5.0"</span>,</span><br><span class="line">        <span class="string">"MSXML2.XmlHttp.4.0"</span>,</span><br><span class="line">        <span class="string">"MSXML2.XmlHttp.3.0"</span>,</span><br><span class="line">        <span class="string">"MSXML2.XmlHttp.2.0"</span>,</span><br><span class="line">        <span class="string">"Microsoft.XmlHttp"</span></span><br><span class="line">    ];</span><br><span class="line">    <span class="keyword">let</span> xhr;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; versions.length; i++) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            xhr = <span class="keyword">new</span> ActiveXObject(versions[i]);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> xhr;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">ajax.send = <span class="function"><span class="keyword">function</span> (<span class="params">url, callback, method, data, async</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">async</span> === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        <span class="keyword">async</span> = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> httpRequest = ajax.httpRequest();</span><br><span class="line">    httpRequest.open(method, url, <span class="keyword">async</span>);</span><br><span class="line">    httpRequest.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (httpRequest.readyState == <span class="number">4</span>) &#123;</span><br><span class="line">            callback(httpRequest.responseText)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">if</span> (method == <span class="string">'POST'</span>) &#123;</span><br><span class="line">        httpRequest.setRequestHeader(<span class="string">'Content-type'</span>, <span class="string">'application/x-www-form-urlencoded'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    httpRequest.send(data);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">ajax.get = <span class="function"><span class="keyword">function</span> (<span class="params">url, data, callback, async</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> query = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> data) &#123;</span><br><span class="line">        query.push(<span class="built_in">encodeURIComponent</span>(key) + <span class="string">'='</span> + <span class="built_in">encodeURIComponent</span>(data[key]));</span><br><span class="line">    &#125;</span><br><span class="line">    ajax.send(url + (query.length ? <span class="string">'?'</span> + query.join(<span class="string">'&amp;'</span>) : <span class="string">''</span>), callback, <span class="string">'GET'</span>, <span class="literal">null</span>, <span class="keyword">async</span>)</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">ajax.post = <span class="function"><span class="keyword">function</span> (<span class="params">url, data, callback, async</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> query = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> data) &#123;</span><br><span class="line">        query.push(<span class="built_in">encodeURIComponent</span>(key) + <span class="string">'='</span> + <span class="built_in">encodeURIComponent</span>(data[key]));</span><br><span class="line">    &#125;</span><br><span class="line">    ajax.send(url, callback, <span class="string">'POST'</span>, query.join(<span class="string">'&amp;'</span>), <span class="keyword">async</span>)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="JSONP"><a href="#JSONP" class="headerlink" title="JSONP"></a>JSONP</h2><p><strong>WHAT</strong></p>
<p>å¸¦å¡«å……çš„jsonï¼ˆp for paddingï¼‰ï¼Œæ˜¯ä¸€ç§é€šå¸¸ç”¨äºç»•è¿‡æµè§ˆå™¨ä¸­çš„è·¨åŸŸé€‰å€çš„æ–¹æ³•ï¼Œå› ä¸ºAjaxä¸å…è®¸è·¨åŸŸè¯·æ±‚ã€‚</p>
<p>åŸç†ï¼šåˆ©ç”¨ <code>&lt;script&gt;</code> æ ‡ç­¾æ²¡æœ‰è·¨åŸŸé™åˆ¶çš„æ¼æ´ã€‚é€šè¿‡ <code>&lt;script&gt;</code> æ ‡ç­¾æŒ‡å‘ä¸€ä¸ªéœ€è¦è®¿é—®çš„åœ°å€å¹¶æä¾›ä¸€ä¸ªå›è°ƒå‡½æ•°æ¥æ¥æ”¶æ•°æ®ã€‚</p>
<p><strong>WHY</strong></p>
<p>è§£å†³è·¨åŸŸï¼ˆåªé€‚ç”¨äºGETè¯·æ±‚ï¼‰</p>
<p><strong>HOW</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jsonp.js</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">jsonp</span>(<span class="params">&#123; url, params, cb &#125;</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> script = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>)</span><br><span class="line">        <span class="built_in">window</span>[cb] = <span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">            resolve(data)</span><br><span class="line">            <span class="built_in">document</span>.body.removeChild(script)</span><br><span class="line">        &#125;</span><br><span class="line">        params = &#123; ...params, cb &#125;</span><br><span class="line">        <span class="keyword">let</span> tmp = []</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> key <span class="keyword">in</span> params)</span><br><span class="line">            tmp.push(<span class="string">`<span class="subst">$&#123; key &#125;</span>=<span class="subst">$&#123; params[key] &#125;</span>`</span>)</span><br><span class="line">        script.src = <span class="string">`<span class="subst">$&#123; url &#125;</span>?<span class="subst">$&#123; tmp.join(<span class="string">"&amp;"</span>) &#125;</span>`</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">jsonp(&#123; </span><br><span class="line">    url: <span class="string">"http://localhost:3000/say"</span>,</span><br><span class="line">    params: &#123; <span class="attr">wd</span>: <span class="string">"hello jsonp"</span> &#125;,</span><br><span class="line">    cb: <span class="string">"show"</span></span><br><span class="line">&#125;).then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// server.js</span></span><br><span class="line"><span class="keyword">let</span> express = <span class="built_in">require</span>(<span class="string">"express"</span>)</span><br><span class="line"><span class="keyword">let</span> app = express()</span><br><span class="line">app.get(<span class="string">"/say"</span>, (res, res) =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> &#123; wd, cb &#125; = req.query</span><br><span class="line">    res.end(<span class="string">`<span class="subst">$&#123;cb&#125;</span>('i am fine, and you?')`</span>)</span><br><span class="line">&#125;)</span><br><span class="line">app.listen(<span class="number">3000</span>)</span><br></pre></td></tr></table></figure>

<h2 id="å˜é‡æå‡"><a href="#å˜é‡æå‡" class="headerlink" title="å˜é‡æå‡"></a>å˜é‡æå‡</h2><p>å˜é‡æå‡ï¼ˆhoistingï¼‰ç”¨äºè§£é‡Šä»£ç ä¸­å˜é‡å£°æ˜è¡Œä¸ºçš„æœ¯è¯­ã€‚ä½¿ç”¨<code>var</code>å…³é”®å­—å£°æ˜æˆ–åˆå§‹åŒ–çš„å˜é‡ä¼šå°†å£°æ˜è¯­å¥â€œæå‡â€åˆ°å½“å‰ä½œç”¨åŸŸçš„é¡¶éƒ¨ã€‚ä½†æ˜¯åªæœ‰å£°æ˜æ‰ä¼šè§¦å‘æå‡ï¼Œèµ‹å€¼è¯­å¥å°†ä¿æŒåŸæ ·ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(foo) <span class="comment">// undefined</span></span><br><span class="line"><span class="keyword">var</span> foo = <span class="number">1</span></span><br><span class="line"><span class="built_in">console</span>.log(foo) <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(foo) <span class="comment">// ReferenceError: bar is not defined</span></span><br><span class="line"><span class="keyword">let</span> foo = <span class="number">1</span></span><br><span class="line"><span class="built_in">console</span>.log(foo) <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>

<p>å‡½æ•°å£°æ˜ä¼šä½¿å‡½æ•°ä½“æå‡ï¼Œä½†å‡½æ•°è¡¨è¾¾å¼ï¼ˆä»¥å£°æ˜å˜é‡çš„å½¢å¼ä¹¦å†™ï¼‰åªæœ‰å˜é‡å£°æ˜ä¼šæå‡</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‡½æ•°å£°æ˜</span></span><br><span class="line"><span class="built_in">console</span>.log(foo)</span><br><span class="line">foo(); <span class="comment">// 'foo'</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'foo'</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(foo); <span class="comment">// [Function: foo]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡½æ•°è¡¨è¾¾å¼</span></span><br><span class="line"><span class="built_in">console</span>.log(bar) <span class="comment">// undefined</span></span><br><span class="line">bar(); <span class="comment">// Uncaught TypeError: bar is not a function</span></span><br><span class="line"><span class="keyword">var</span> bar = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'bar'</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(bar) <span class="comment">// [Function: bar]</span></span><br></pre></td></tr></table></figure>

<h2 id="äº‹ä»¶å†’æ³¡"><a href="#äº‹ä»¶å†’æ³¡" class="headerlink" title="äº‹ä»¶å†’æ³¡"></a>äº‹ä»¶å†’æ³¡</h2><p>å½“ä¸€ä¸ªäº‹ä»¶åœ¨DOMå…ƒç´ ä¸Šè§¦å‘æ—¶ï¼Œå¦‚æœæœ‰æ—¶é—´ç›‘å¬å™¨ï¼Œå®ƒå°è¯•å¤„ç†è¯¥äº‹ä»¶ï¼Œç„¶åäº‹ä»¶å†’æ³¡åˆ°å…¶çˆ¶çº§å…ƒç´ ï¼Œå¹¶å‘ç”ŸåŒæ ·çš„äº‹æƒ…ï¼Œæœ€åç›´è‡³åˆ°è¾¾ç¥–å…ˆå…ƒç´ ã€‚æ—¶é—´å†’æ³¡æœºåˆ¶æ˜¯å®ç°äº‹ä»¶å§”æ‰˜ï¼ˆevent delegationï¼‰çš„åŸç†</p>
<h2 id="attributeå’Œproperty"><a href="#attributeå’Œproperty" class="headerlink" title="attributeå’Œproperty"></a>attributeå’Œproperty</h2><p>attributeæ˜¯åœ¨HTMLä¸­å®šä¹‰çš„ï¼Œè€Œpropertyå®åœ¨DOMä¸Šå®šä¹‰çš„ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"input1"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">value</span>=<span class="string">"hello"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">	<span class="keyword">const</span> input = <span class="built_in">document</span>.getElementById(<span class="string">"input1"</span>)</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(input.getAttribute(<span class="string">"value"</span>)) <span class="comment">// hello</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(input.value) <span class="comment">// hello</span></span></span><br><span class="line">    </span><br><span class="line"><span class="javascript">    <span class="comment">// å½“åœ¨æ–‡æœ¬æ¡†ä¸­è¾“å…¥ â€˜worldâ€™ å</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(input.getAttribute(<span class="string">"value"</span>)) <span class="comment">// hello</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(input.value) <span class="comment">// world</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="documentçš„loadäº‹ä»¶å’ŒDOMContentLoadedäº‹ä»¶ä¹‹é—´çš„åŒºåˆ«"><a href="#documentçš„loadäº‹ä»¶å’ŒDOMContentLoadedäº‹ä»¶ä¹‹é—´çš„åŒºåˆ«" class="headerlink" title="documentçš„loadäº‹ä»¶å’ŒDOMContentLoadedäº‹ä»¶ä¹‹é—´çš„åŒºåˆ«"></a>documentçš„loadäº‹ä»¶å’ŒDOMContentLoadedäº‹ä»¶ä¹‹é—´çš„åŒºåˆ«</h2><p>DOMContentLoadedï¼šğŸ‘</p>
<p>å½“åˆå§‹çš„HTMLæ–‡æ¡£æœ¬å®Œå…¨åŠ è½½å’Œè§£æå®Œæˆä¹‹åï¼ŒDOMContentLoadedäº‹ä»¶è¢«è§¦å‘è€Œæ— éœ€ç­‰å¾…æ ·å¼è¡¨ã€å›¾åƒå’Œå­æ¡†æ¶çš„å®ŒæˆåŠ è½½</p>
<p>loadï¼š</p>
<p>windowçš„loadäº‹ä»¶ä»…åœ¨DOMå’Œæ‰€æœ‰ç›¸å…³èµ„æºå…¨éƒ¨å®ŒæˆåŠ è½½åæ‰ä¼šè§¦å‘</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">"DOMContentLoaded"</span>, event =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"DOMContentLoaded"</span>);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">"load"</span>, () =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"window loaded"</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// DOMContentLoaded</span></span><br><span class="line"><span class="comment">// window loaded</span></span><br></pre></td></tr></table></figure>

<h2 id="åŒæºç­–ç•¥"><a href="#åŒæºç­–ç•¥" class="headerlink" title="åŒæºç­–ç•¥"></a>åŒæºç­–ç•¥</h2><p>åŒæºç­–ç•¥æ˜¯ç”±Netscapeæå‡ºçš„ä¸€ä¸ªè‘—åçš„å®‰å…¨ç­–ç•¥ï¼Œæµè§ˆå™¨å‡ºäºå®‰å…¨æ–¹é¢çš„è€ƒè™‘ï¼Œåªå…è®¸æœ¬åŸŸåä¸‹çš„æ¥å£äº¤äº’ï¼Œä¸åŒæºçš„å®¢æˆ·ç«¯è„šæœ¬ï¼Œåœ¨æ²¡æœ‰æ˜ç¡®æˆæƒçš„æƒ…å†µä¸‹ï¼Œä¸èƒ½è¯»å–å¯¹æ–¹çš„èµ„æºã€‚</p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/Security/Same-origin_policy" target="_blank" rel="noopener">åŒæºçš„å®šä¹‰:</a></p>
<p>å¦‚æœä¸¤ä¸ªé¡µé¢çš„åè®®ï¼Œç«¯å£ï¼ˆå¦‚æœæœ‰æŒ‡å®šï¼‰å’Œä¸»æœºéƒ½ç›¸åŒï¼Œåˆ™ä¸¤ä¸ªé¡µé¢å…·æœ‰ç›¸åŒçš„<strong>æº</strong>ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠå®ƒç§°ä¸ºâ€œåè®®/ä¸»æœº/ç«¯å£ tupleâ€ï¼Œæˆ–ç®€å•åœ°å«åšâ€œtupleâ€. (â€œtupleâ€ ï¼Œâ€œå…ƒâ€ï¼Œæ˜¯æŒ‡ä¸€äº›äº‹ç‰©ç»„åˆåœ¨ä¸€èµ·å½¢æˆä¸€ä¸ªæ•´ä½“ï¼Œæ¯”å¦‚ï¼ˆ1ï¼Œ2ï¼‰å«äºŒå…ƒï¼Œï¼ˆ1ï¼Œ2ï¼Œ3ï¼‰å«ä¸‰å…ƒ)</p>
<p>ä¸‹è¡¨ç»™å‡ºäº†ç›¸å¯¹<code>http://store.company.com/dir/page.html</code>åŒæºæ£€æµ‹çš„ç¤ºä¾‹:</p>
<table>
<thead>
<tr>
<th>URL</th>
<th>ç»“æœ</th>
<th>åŸå› </th>
</tr>
</thead>
<tbody><tr>
<td><code>http://store.company.com/dir2/other.html</code></td>
<td>æˆåŠŸ</td>
<td>åªæœ‰è·¯å¾„ä¸åŒ</td>
</tr>
<tr>
<td><code>http://store.company.com/dir/inner/another.html</code></td>
<td>æˆåŠŸ</td>
<td>åªæœ‰è·¯å¾„ä¸åŒ</td>
</tr>
<tr>
<td><code>https://store.company.com/secure.html</code></td>
<td>å¤±è´¥</td>
<td>åè®®ä¸åŒ</td>
</tr>
<tr>
<td><code>http://store.company.com:81/dir/etc.html</code></td>
<td>å¤±è´¥</td>
<td>ç«¯å£ä¸åŒ</td>
</tr>
<tr>
<td><code>http://news.company.com/dir/other.html</code></td>
<td>å¤±è´¥</td>
<td>åŸŸåä¸åŒ</td>
</tr>
</tbody></table>
<h2 id="JavaScriptä¸¥æ ¼æ¨¡å¼"><a href="#JavaScriptä¸¥æ ¼æ¨¡å¼" class="headerlink" title="JavaScriptä¸¥æ ¼æ¨¡å¼"></a>JavaScriptä¸¥æ ¼æ¨¡å¼</h2><p><strong>WHAT</strong></p>
<p>ES5æœ€æ—©å¼•å…¥äº†â€œä¸¥æ ¼æ¨¡å¼â€ï¼ˆstrict modeï¼‰çš„æ¦‚å¿µã€‚å¯é€‰æ‹©çš„ä¸€ä¸ªé™åˆ¶JavaScriptçš„å˜ä½“çš„ä¸€ç§æ–¹å¼</p>
<p><strong>WHY</strong></p>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>æ— æ³•å†æ„å¤–åˆ›å»ºå…¨å±€å˜é‡</li>
<li>ä¼šå¼•èµ·é™é»˜å¤±è´¥ï¼ˆsliently failï¼Œ å³ï¼šä¸æŠ¥é”™ä¹Ÿæ²¡æœ‰ä»»ä½•æ•ˆæœï¼‰çš„æ“ä½œæŠ›å‡ºå¼‚å¸¸<ul>
<li>å¯¹å˜é‡è°ƒç”¨<code>delete</code>æ“ä½œç¬¦</li>
<li>ä¸ºåªè¯»å±æ€§èµ‹å€¼</li>
<li>å¯¹ä¸å¯é…ç½®ï¼ˆnonconfigurableï¼‰çš„å±æ€§ä½¿ç”¨<code>delete</code>æ“ä½œç¬¦</li>
</ul>
</li>
<li>è¯•å›¾åˆ é™¤ä¸å¯åˆ é™¤çš„å±æ€§æ—¶ä¼šæŠ›å‡ºå¼‚å¸¸</li>
<li>è¦æ±‚å‡½æ•°çš„å‚æ•°åå”¯ä¸€</li>
<li>æŸäº›ä¿ç•™å­—ï¼ˆ<code>interface</code>ã€<code>implements</code>ã€<code>package</code>ç­‰ï¼‰ä¸èƒ½ä½œä¸ºå˜é‡å</li>
<li>æŠ‘åˆ¶<code>this</code><ul>
<li>å…¨å±€ä½œç”¨åŸŸä¸‹ï¼Œ<code>this</code>çš„å€¼ä¸º<code>undefined</code></li>
<li><code>.call()</code>ã€<code>.apply()</code>ä¼ é€’é”™è¯¯çš„<code>this</code>ä¼šæŠ¥é”™ï¼ˆéä¸¥æ ¼æ¨¡å¼ä¸‹ä¼šè½¬æ¢ä¸ºå…¨éƒ¨å¯¹è±¡ï¼‰</li>
</ul>
</li>
<li>æ•è·äº†ä¸€äº›å¸¸è§çš„ç¼–ç é”™è¯¯ï¼Œå¹¶æŠ›å‡ºå¼‚å¸¸</li>
</ul>
<p>ç¼ºç‚¹ï¼š</p>
<ul>
<li>ç¡®å®è®¸å¤šå¼€å‘äººå‘˜å·²ç»ä¹ æƒ¯çš„åŠŸèƒ½</li>
<li>æ— æ³•è®¿é—®<code>function.caller</code>å’Œ<code>function.arguments</code></li>
<li>ä»¥ä¸åŒä¸¥æ ¼æ¨¡å¼ç¼–å†™çš„è„šæœ¬åˆå¹¶åå¯èƒ½ä¼šå¯¼è‡´é—®é¢˜</li>
</ul>
<p><strong>HOW</strong></p>
<p>åœ¨éœ€è¦å¯ç”¨ä¸¥æ ¼æ¨¡å¼çš„<strong>ä»£ç </strong>é¡¶éƒ¨æ·»åŠ ï¼š<code>&quot;use strict;&quot;</code></p>
<h2 id="SPA"><a href="#SPA" class="headerlink" title="SPA"></a>SPA</h2><p><strong>WHAT</strong></p>
<p>single page application å•é¡µé¢åº”ç”¨</p>
<p>ç°å¦‚ä»Šï¼Œwebç¨‹åºå‘˜å°†ä»–ä»¬æ„å»ºçš„äº§å“æˆä¸ºwebåº”ç”¨è€Œä¸æ˜¯ç½‘ç«™ã€‚è™½ç„¶è¿™ä¸¤ä¸ªæœ¯è¯­ä¹‹é—´æ²¡æœ‰ä¸¥æ ¼çš„åŒºåˆ«ï¼Œä½†ç½‘ç»œåº”ç”¨å¾€å¾€å…·æœ‰é«˜åº¦çš„äº¤äº’æ€§å’ŒåŠ¨æ€æ€§ï¼Œå…è®¸ç”¨æˆ·æ‰§è¡Œæ“ä½œå¹¶æ¥å—ä»–ä»¬çš„æ“ä½œå“åº”ã€‚åœ¨è¿‡å»ï¼Œæµè§ˆå™¨ä»æœåŠ¡å™¨æ¥æ”¶HTMLå¹¶æ¸²æŸ“ï¼Œå½“ç”¨æˆ·å¯¼èˆªåˆ°å…¶ä»–URLæ—¶ï¼Œéœ€è¦æ•´é¡µåˆ·æ–°ï¼ŒæœåŠ¡å™¨ä¼šä¸ºæ–°é¡µé¢å‘é€æ–°çš„HTMLï¼Œè¿™è¢«ç§°ä¸ºæœåŠ¡ç«¯æ¸²æŸ“</p>
<p>ç„¶è€Œï¼Œåœ¨ç°ä»£çš„SPAä¸­ï¼Œå®¢æˆ·ç«¯æ¸²æŸ“å–è€Œä»£ä¹‹ã€‚æµè§ˆå™¨ä»éƒ½æ­¦å™¨åŠ è½½<strong>åˆå§‹é¡µé¢</strong>ï¼Œæ•´ä¸ªåº”ç”¨ç¨‹åºæ‰€æ‰€éœ€çš„è„šæœ¬ï¼ˆåº“ã€æ¡†æ¶ã€åº”ç”¨ä»£ç ï¼‰å’Œæ ·å¼è¡¨ã€‚å½“ç”¨æˆ·å¯¼èˆªåˆ°å…¶ä»–é¡µé¢æ—¶ï¼Œ<strong>ä¸ä¼šè§¦å‘é¡µé¢åˆ·æ–°</strong>ï¼Œè¯¥é¡µé¢çš„URLé€šè¿‡<a href="https://developer.mozilla.org/en-US/docs/Web/API/History_API" target="_blank" rel="noopener">HTML5 History API</a>è¿›è¡Œæ›´æ–°ã€‚æµè§ˆå™¨é€šè¿‡Ajaxè¯·æ±‚å‘æœåŠ¡å™¨æ£€ç´¢æ‰€éœ€çš„æ•°æ®ï¼ˆé€šå¸¸é‡‡ç”¨jsonæ ¼å¼ï¼‰ï¼Œç„¶åSPA<strong>é€šè¿‡JavaScriptæ¥åŠ¨æ€æ›´æ–°é¡µé¢</strong>ï¼Œè¿™äº›JavaScriptåœ¨åˆå§‹é¡µé¢å·²ç»ä¸‹è½½ã€‚è¿™ç§æ¨¡å¼ç±»ä¼¼äºåŸç”Ÿç§»åŠ¨åº”ç”¨çš„å·¥ä½œæ–¹å¼ã€‚</p>
<p><img src="./imgs/spa.png" alt="SPA"></p>
<p><strong>WHY</strong></p>
<p>å¥½å¤„ï¼š</p>
<ul>
<li>ç”¨æˆ·æ„ŸçŸ¥å“åº”æ›´å¿«ï¼Œç”¨æˆ·åˆ‡æ¢é¡µé¢æ—¶ä¸ä¼šå†çœ‹åˆ°å› é¡µé¢åˆ·æ–°è€Œå¯¼è‡´çš„ç™½å±</li>
<li>å¯¹æœåŠ¡å™¨è¿›è¡Œçš„HTTPè¯·æ±‚å‡å°‘ï¼Œå› ä¸ºå¯¹äºæ²¡å’Œé¡µé¢çš„åŠ è½½ä¸å¿…å†æ¬¡ä¸‹è½½ç›¸åŒçš„èµ„æº</li>
<li>å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¹‹é—´çš„å…³æ³¨ç‚¹åˆ†ç¦»ï¼Œå¯ä»¥ä¸ºä¸åŒå¹³å°ï¼ˆæ‰‹æœºã€æ™ºèƒ½æ‰‹è¡¨ï¼‰å»ºç«‹æ–°çš„å®¢æˆ·ç«¯è€Œä¸éœ€ä¿®æ”¹æœåŠ¡å™¨ä»£ç ã€‚</li>
</ul>
<p>å¼Šç«¯ï¼š</p>
<ul>
<li>ç”±äºåŠ è½½äº†å¤šä¸ªé¡µé¢éœ€è¦çš„æ¡†æ¶ã€åº”ç”¨ä»£ç å’Œèµ„æºå¯¼è‡´åˆå§‹é¡µé¢åŠ è½½æ—¶é—´è¿‡é•¿</li>
<li>æœåŠ¡å™¨è¿˜éœ€é¢å¤–çš„å·¥ä½œå°†æ˜¯æ‰€æœ‰è·¯ç”±è¯·æ±‚é…ç½®åˆ°å•ä¸ªå…¥å£ç‚¹ï¼Œç„¶åç”±å®¢æˆ·ç«¯æ¥ç®¡è·¯ç”±</li>
<li>SPAä¾èµ–äºJavaScriptæ¥æ¸²æŸ“é¡µé¢ï¼Œå¯¹SEOä¸å‹å¥½</li>
</ul>
<p><strong>HOW</strong></p>
<ol>
<li>å‘æœåŠ¡å™¨è¯·æ±‚åˆå§‹é¡µé¢å¹¶æ¸²æŸ“ï¼ŒåŒæ—¶è¯·æ±‚æ•´ä¸ªåº”ç”¨æ‰€éœ€çš„è„šæœ¬ã€æ ·å¼</li>
<li>ç›‘å¬ç”¨æˆ·æ“ä½œï¼š<ul>
<li>é€šè¿‡<a href="https://developer.mozilla.org/en-US/docs/Web/API/History_API" target="_blank" rel="noopener">HTML5 History API</a>è¿›è¡Œé¡µé¢å¯¼èˆª</li>
<li>é€šè¿‡Ajaxå‘æœåŠ¡å™¨è¯·æ±‚æ•°æ®å¹¶ä½¿ç”¨JavaScriptåŠ¨æ€æ¸²æŸ“åˆ°é¡µé¢ä¸Š</li>
</ul>
</li>
</ol>

        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://mrrs878.github.io/2020/02/10/JavaScriptç›¸å…³-0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr.RS">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/imgs/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mr.RS">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            
            <a href="/2020/02/10/JavaScriptç›¸å…³-0/" class="post-title-link" itemprop="url">JavaScriptç›¸å…³-0</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-02-10 23:18:10" itemprop="dateCreated datePublished" datetime="2020-02-10T23:18:10+08:00">2020-02-10</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-02-12 23:16:00" itemprop="dateModified" datetime="2020-02-12T23:16:00+08:00">2020-02-12</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaScript/" itemprop="url" rel="index">
                    <span itemprop="name">JavaScript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="äº‹ä»¶å§”æ‰˜-ï¼ˆevent-delegationï¼‰"><a href="#äº‹ä»¶å§”æ‰˜-ï¼ˆevent-delegationï¼‰" class="headerlink" title="äº‹ä»¶å§”æ‰˜ ï¼ˆevent delegationï¼‰"></a>äº‹ä»¶å§”æ‰˜ ï¼ˆevent delegationï¼‰</h2><p>äº‹ä»¶å§”æ‰˜æ˜¯å°†äº‹ä»¶ç›‘å¬å™¨æ·»åŠ åˆ°çˆ¶å…ƒç´ ï¼Œè€Œä¸æ˜¯æ¯ä¸ªå­å…ƒç´ å•ç‹¬è®¾ç½®äº‹ä»¶ç›‘å¬å™¨ï¼Œå½“è§¦å‘å­å…ƒç´ æ—¶ï¼Œäº‹ä»¶ä¼šå†’æ³¡åˆ°çˆ¶å…ƒç´ ï¼Œç›‘å¬å™¨å°±ä¼šè§¦å‘ï¼Œè¿™ç§æŠ€æœ¯çš„å¥½å¤„æ˜¯ï¼š</p>
<ol>
<li>å†…å­˜å ç”¨å°‘ï¼Œå› ä¸ºåªéœ€è¦ä¸€ä¸ªçˆ¶å…ƒç´ çš„äº‹ä»¶å¤„ç†ç¨‹åºï¼Œè€Œä¸å¿…ä¸ºæ¯ä¸ªåä»£éƒ½æ·»åŠ äº‹ä»¶å¤„ç†ç¨‹åºã€‚</li>
<li>æ— éœ€ä»å·²åˆ é™¤çš„å…ƒç´ ä¸­è§£ç»‘å¤„ç†ç¨‹åºï¼Œä¹Ÿæ— éœ€å°†å¤„ç†ç¨‹åºç»‘å®šåˆ°æ–°å…ƒç´ ä¸Šã€‚</li>
</ol>
<h2 id="JavaScriptä¸­çš„thisæŒ‡å‘"><a href="#JavaScriptä¸­çš„thisæŒ‡å‘" class="headerlink" title="JavaScriptä¸­çš„thisæŒ‡å‘"></a>JavaScriptä¸­çš„thisæŒ‡å‘</h2><p>ç®€å•æ¥è®²ï¼Œ<code>this</code>çš„æŒ‡å‘å–å†³äºå‡½æ•°çš„è°ƒç”¨æ–¹å¼</p>
<ol start="0">
<li>å¦‚æœæ˜¯ç®­å¤´å‡½æ•°ï¼Œ<code>this</code>è¢«è®¾ç½®ä¸ºè°ƒç”¨æ—¶çš„ä¸Šä¸‹æ–‡</li>
<li>å¦‚æœä½¿ç”¨<code>new</code>ï¼Œå‡½æ•°å†…çš„<code>this</code>æ˜¯ä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡</li>
<li>å¦‚æœ<code>applyã€callã€bind</code>æ–¹æ³•ç”¨äºè°ƒç”¨/åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°å†…çš„<code>this</code>å°±æ˜¯ä½œä¸ºå‚æ•°ä¼ å…¥è¿™äº›æ–¹æ³•çš„å¯¹è±¡</li>
<li>å½“å‡½æ•°ä½œä¸ºå¯¹è±¡é‡Œçš„æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œå‡½æ•°å†…çš„<code>this</code>æ˜¯è°ƒç”¨è¯¥å‡½æ•°çš„å¯¹è±¡ï¼Œæ¯”å¦‚å½“<code>obj.method()</code>è¢«è°ƒç”¨æ—¶ï¼Œå‡½æ•°å†…çš„<code>this</code>å°†ç»‘å®šåˆ°<code>obj</code>å¯¹è±¡</li>
<li>å¦‚æœä¸ç¬¦åˆä¸Šè¿°è§„åˆ™ï¼Œé‚£ä¹ˆ<code>this</code>çš„å€¼æŒ‡å‘å…¨å±€å¯¹è±¡<code>global object</code>ï¼Œæµè§ˆå™¨ç¯å¢ƒä¸‹<code>this</code>çš„å€¼æŒ‡å‘<code>window</code>å¯¹è±¡ï¼Œä½†åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹<code>use strict</code>ï¼Œ<code>this</code>çš„å€¼ä¸º<code>undefined</code></li>
<li>å¦‚æœç¬¦åˆä¸Šè¿°å¤šä¸ªè§„åˆ™ï¼Œä»ä¸Šåˆ°ä¸‹æƒé‡ä¾æ¬¡é€’å‡</li>
</ol>
<h2 id="åŸå‹ç»§æ‰¿-prototypal-inheritance"><a href="#åŸå‹ç»§æ‰¿-prototypal-inheritance" class="headerlink" title="åŸå‹ç»§æ‰¿ prototypal inheritance"></a>åŸå‹ç»§æ‰¿ <code>prototypal inheritance</code></h2><p>æ‰€æœ‰çš„JSå¯¹è±¡éƒ½æœ‰ä¸€ä¸ª<code>prototype</code>å¯¹è±¡ï¼ŒæŒ‡å‘å®ƒçš„åŸå‹å¯¹è±¡ï¼Œå½“è¯•å›¾è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ—¶ï¼Œå¦‚æœæ²¡æœ‰åœ¨è¯¥å¯¹è±¡ä¸Šæ‰¾åˆ°å®ƒè¿˜ä¼šæœç´¢è¯¥å¯¹è±¡çš„åŸå‹ï¼Œä»¥åŠè¯¥å¯¹è±¡çš„åŸå‹çš„åŸå‹ï¼Œä¾æ¬¡å±‚å±‚å‘ä¸Šæœç´¢ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªåå­—åŒ¹é…çš„å±æ€§æˆ–è¾¾åˆ°åŸå‹é“¾çš„æœ«å°¾ã€‚è¿™ç§è¡Œä¸ºæ˜¯åœ¨æ¨¡æ‹Ÿç»å…¸çš„ç»§æ‰¿ï¼Œä½†ä¸å…¶è¯´æ—¶ç»§æ‰¿è¿˜ä¸å¦‚è¯´æ˜¯å§”æ‰˜<code>delegation</code></p>
<p>è¯»å–å¯¹è±¡çš„å±æ€§å€¼æ—¶ï¼Œä¼šè‡ªåŠ¨åˆ°åŸå‹é“¾ä¸­æŸ¥æ‰¾</p>
<p>è®¾ç½®å¯¹è±¡çš„å±æ€§å€¼æ—¶ï¼Œä¸ä¼šæŸ¥æ‰¾åŸå‹é“¾ï¼Œå¦‚æœå½“å‰å¯¹è±¡ä¸­æ²¡æœ‰æ­¤å±æ€§ï¼Œç›´æ¥æ·»åŠ æ­¤å±æ€§å¹¶è®¾ç½®å…¶å€¼</p>
<p><img src="./imgs/1581317824537.png" alt="åŸå‹"></p>
<h2 id="JavaScriptçš„æ¨¡å—åŒ–æœºåˆ¶"><a href="#JavaScriptçš„æ¨¡å—åŒ–æœºåˆ¶" class="headerlink" title="JavaScriptçš„æ¨¡å—åŒ–æœºåˆ¶"></a>JavaScriptçš„æ¨¡å—åŒ–æœºåˆ¶</h2><ul>
<li><p>AMD</p>
<p><strong>Asynchronous Module Definition å¼‚æ­¥æ¨¡å—åŠ è½½æœºåˆ¶</strong>ï¼ŒReqireJSå®ç°äº†AMDè§„èŒƒ</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//a.js</span></span><br><span class="line"><span class="comment">//defineå¯ä»¥ä¼ å…¥ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯å­—ç¬¦ä¸²-æ¨¡å—åã€æ•°ç»„-ä¾èµ–æ¨¡å—ã€å‡½æ•°-å›è°ƒå‡½æ•°</span></span><br><span class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// b.js</span></span><br><span class="line"><span class="comment">//æ•°ç»„ä¸­å£°æ˜éœ€è¦åŠ è½½çš„æ¨¡å—ï¼Œå¯ä»¥æ˜¯æ¨¡å—åã€jsæ–‡ä»¶è·¯å¾„</span></span><br><span class="line"><span class="built_in">require</span>([<span class="string">'a'</span>], <span class="function"><span class="keyword">function</span>(<span class="params">a</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a);<span class="comment">// 1</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>ç‰¹ç‚¹ï¼š</p>
<p>å¯¹äºä¾èµ–çš„æ¨¡å—ï¼ŒAMDæ¨å´‡<strong>ä¾èµ–å‰ç½®ï¼Œæå‰æ‰§è¡Œ</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨<code>define</code>æ–¹æ³•é‡Œä¼ å…¥çš„ä¾èµ–æ¨¡å—ï¼ˆæ•°ç»„ï¼‰ä¼šåœ¨ä¸€å¼€å§‹å°±ä¸‹è½½å¹¶æ‰§è¡Œã€‚é€‚åˆåœ¨<strong>æµè§ˆå™¨ç«¯</strong>ä½¿ç”¨</p>
</li>
<li><p>CommonJS</p>
<p>CommonJSè§„èŒƒä¸ºCommonJSå°ç»„æ‰€æå‡ºï¼Œç›®çš„æ˜¯å¼¥è¡¥JavaScriptåœ¨æœåŠ¡å™¨ç«¯ç¼ºå°‘æ¨¡å—åŒ–æœºåˆ¶ï¼Œ<strong>NodeJSã€webpack</strong>éƒ½æ˜¯åŸºäºè¯¥è§„èŒƒæ¥å®ç°çš„ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//a.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"hello world"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//b.js</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="built_in">require</span>(<span class="string">'./a'</span>);</span><br><span class="line"></span><br><span class="line">a();<span class="comment">//"hello world"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æˆ–è€…</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//a2.js</span></span><br><span class="line">exports.num = <span class="number">1</span>;</span><br><span class="line">exports.obj = &#123;<span class="attr">xx</span>: <span class="number">2</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//b2.js</span></span><br><span class="line"><span class="keyword">var</span> a2 = <span class="built_in">require</span>(<span class="string">'./a2'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(a2);<span class="comment">//&#123; num: 1, obj: &#123; xx: 2 &#125; &#125;</span></span><br></pre></td></tr></table></figure>

<p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li>æ‰€æœ‰ä»£ç éƒ½è¿è¡Œåœ¨<strong>æ¨¡å—ä½œç”¨åŸŸ</strong>ï¼Œä¸ä¼šæ±¡æŸ“å…¨å±€ä½œç”¨åŸŸ</li>
<li>æ¨¡å—æ˜¯<strong>åŒæ­¥åŠ è½½</strong>çš„ï¼Œå³åªæœ‰åŠ è½½å®Œæˆæ‰èƒ½æ‰§è¡Œåé¢çš„æ“ä½œ</li>
<li>æ¨¡å—åœ¨é¦–æ¬¡æ‰§è¡Œåå°±ä¼š<strong>ç¼“å­˜</strong>ï¼Œå†æ¬¡åŠ è½½åªè¿”å›ç¼“å­˜ç»“æœï¼Œå¦‚æœæƒ³è¦å†æ¬¡æ‰§è¡Œï¼Œå¯æ¸…é™¤ç¼“å­˜</li>
<li><code>require</code>è¿”å›çš„æ˜¯è¢«è¾“å‡ºçš„<strong>å€¼çš„æ‹·è´</strong>ï¼Œæ¨¡å—å†…éƒ¨çš„å˜åŒ–ä¹Ÿä¸ä¼šå½±å“è¿™ä¸ªå€¼</li>
</ul>
</li>
<li><p>ES6 Module</p>
<p>ES6 Moduleæ˜¯<strong>ES6</strong>ä¸­è§„å®šçš„æ¨¡å—ä½“ç³»</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//a.js</span></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">'lin'</span>;</span><br><span class="line"><span class="keyword">var</span> age = <span class="number">13</span>;</span><br><span class="line"><span class="keyword">var</span> job = <span class="string">'ninja'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; name, age, job&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//b.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; name, age, job&#125; <span class="keyword">from</span> <span class="string">'./a.js'</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(name, age, job);<span class="comment">// lin 13 ninja</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æˆ–è€…</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//a2.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'default '</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//b2.js</span></span><br><span class="line"><span class="keyword">import</span> customName <span class="keyword">from</span> <span class="string">'./a2.js'</span>;</span><br><span class="line">customName(); <span class="comment">// 'default'</span></span><br></pre></td></tr></table></figure>

<p>ç‰¹ç‚¹ï¼ˆå¯¹æ¯”CommonJSï¼‰ï¼š</p>
<table>
<thead>
<tr>
<th></th>
<th>CommonJS</th>
<th>ES6 Module</th>
</tr>
</thead>
<tbody><tr>
<td>åŠ è½½æ—¶é—´</td>
<td>è¿è¡Œæ—¶åŠ è½½</td>
<td>ç¼–è¯‘æ—¶è¾“å‡ºæ¥å£</td>
</tr>
<tr>
<td>åŠ è½½æ–¹å¼</td>
<td>åŠ è½½æ•´ä¸ªæ¨¡å—</td>
<td>æŒ‰éœ€åŠ è½½</td>
</tr>
<tr>
<td>è¾“å‡ºæ–¹å¼</td>
<td>å€¼çš„æ‹·è´</td>
<td>å€¼çš„å¼•ç”¨</td>
</tr>
<tr>
<td>this</td>
<td>æŒ‡å‘å½“å‰æ¨¡å—</td>
<td>undefined</td>
</tr>
</tbody></table>
</li>
</ul>
<h2 id="é—­åŒ…ï¼ˆclosureï¼‰"><a href="#é—­åŒ…ï¼ˆclosureï¼‰" class="headerlink" title="é—­åŒ…ï¼ˆclosureï¼‰"></a>é—­åŒ…ï¼ˆclosureï¼‰</h2><ul>
<li><p>WHAT</p>
<p>å®šä¹‰ï¼š</p>
<ol>
<li><p>å³ä½¿è¢«å¤–éƒ¨å‡½æ•°è¿”å›ï¼Œä¾ç„¶å¯ä»¥è®¿é—®åˆ°å¤–éƒ¨ï¼ˆå°é—­ï¼‰å‡½æ•°ä½œç”¨åŸŸçš„<strong>å‡½æ•°</strong>ã€‚</p>
</li>
<li><p>åŒ…å«è¢«å¼•ç”¨å˜é‡ï¼ˆå‡½æ•°ï¼‰çš„<strong>å¯¹è±¡</strong></p>
</li>
</ol>
<p>ç”Ÿå‘½å‘¨æœŸï¼š</p>
<p>â€‹    äº§ç”Ÿï¼šåœ¨åµŒå¥—å†…éƒ¨å‡½æ•°<strong>å®šä¹‰æ‰§è¡Œå®Œ</strong>æ—¶å°±äº§ç”Ÿäº†ï¼ˆ<strong>ä¸æ˜¯åœ¨è°ƒç”¨</strong>ï¼‰</p>
<p>â€‹    æ­»äº¡ï¼šåœ¨åµŒå¥—å†…éƒ¨å‡½æ•°æˆä¸ºåƒåœ¾å¯¹è±¡æ—¶</p>
</li>
<li><p>WHY</p>
<ul>
<li><p>å¯ä»¥å®ç°æ•°æ®ç§æœ‰åŒ–æˆ–ç‰¹æƒæ–¹æ³•</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">count</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> tmp = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> tmp++;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> counter1 = count()</span><br><span class="line"><span class="built_in">console</span>.log(counter1());</span><br><span class="line"><span class="built_in">console</span>.log(counter1());</span><br><span class="line"><span class="built_in">console</span>.log(counter1());</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"---------"</span>);</span><br><span class="line"><span class="keyword">let</span> counter2 = count()</span><br><span class="line"><span class="built_in">console</span>.log(counter2());</span><br><span class="line"><span class="built_in">console</span>.log(counter2());</span><br><span class="line"></span><br><span class="line"><span class="comment">// 0</span></span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// 2</span></span><br><span class="line"><span class="comment">// ----new counter-----</span></span><br><span class="line"><span class="comment">// 0</span></span><br><span class="line"><span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>å®ç°å•ä¾‹æ¨¡å¼</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å•ä¾‹æ¨¡å¼</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Single</span> </span>&#123;</span><br><span class="line">  test () &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"test"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ()()çš„ä½œç”¨ï¼šä½¿å‡½æ•°ç«‹å³è°ƒç”¨ä¸€æ¬¡</span></span><br><span class="line"><span class="comment">// é—­åŒ…çš„ä½œç”¨ï¼šç§æœ‰åŒ–å˜é‡</span></span><br><span class="line">Single.getIntance = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> instance = <span class="literal">null</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!instance) &#123;</span><br><span class="line">      instance = <span class="keyword">new</span> Single()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> instance</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>
</li>
<li><p>éƒ¨åˆ†å‚æ•°å‡½æ•°ï¼ˆpartial applicationsï¼‰æŸ¯é‡ŒåŒ–ï¼ˆcurryingï¼‰</p>
<p>å‡½æ•°å¼ç¼–ç¨‹-æŸ¯é‡ŒåŒ–</p>
</li>
</ul>
</li>
<li><p>HOW</p>
<p>å¸¸è§çš„åˆ›å»ºé—­åŒ…çš„æ–¹å¼æ˜¯åœ¨ä¸€ä¸ªå‡½æ•°å†…éƒ¨åˆ›å»ºå¦ä¸€ä¸ªå‡½æ•°</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> a = <span class="number">12</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"test"</span>, a)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="foreachå’Œ-mapçš„åŒºåˆ«"><a href="#foreachå’Œ-mapçš„åŒºåˆ«" class="headerlink" title=".foreachå’Œ.mapçš„åŒºåˆ«"></a><code>.foreach</code>å’Œ<code>.map</code>çš„åŒºåˆ«</h2><ul>
<li>éƒ½æ˜¯ç”¨æ¥éå†ä¸€ä¸ªæ•°ç»„</li>
<li><code>foreach</code>å¯¹åŸæ•°ç»„æœ‰å‰¯ä½œç”¨ï¼Œè€Œ<code>map</code>åˆ™ä¼šè¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„</li>
</ul>
<h2 id="åŒ¿åå‡½æ•°çš„ä½¿ç”¨åœºæ™¯"><a href="#åŒ¿åå‡½æ•°çš„ä½¿ç”¨åœºæ™¯" class="headerlink" title="åŒ¿åå‡½æ•°çš„ä½¿ç”¨åœºæ™¯"></a>åŒ¿åå‡½æ•°çš„ä½¿ç”¨åœºæ™¯</h2><ul>
<li><p>åœ¨IIFEä¸­ä½¿ç”¨,ç”¨æ¥å°è£…å±€éƒ¨ä½œç”¨åŸŸå†…çš„ä»£ç ï¼Œé¿å…æ±¡æŸ“å…¨å±€ä½œç”¨åŸŸ</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// do something</span></span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>
</li>
<li><p>å¯ä»¥ä½œä¸ºå›è°ƒå‡½æ•°ï¼Œç®€æ´æ˜“è¯»</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">settimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// do something</span></span><br><span class="line">&#125;, <span class="number">1000</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç”¨ä½œå‡½æ•°å¼ç¼–ç¨‹</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">arr.map(<span class="function"><span class="params">el</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(el)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="å®¿ä¸»å¯¹è±¡ï¼ˆhost-objectsï¼‰å’ŒåŸç”Ÿå¯¹è±¡ï¼ˆnative-objectsï¼‰çš„åŒºåˆ«"><a href="#å®¿ä¸»å¯¹è±¡ï¼ˆhost-objectsï¼‰å’ŒåŸç”Ÿå¯¹è±¡ï¼ˆnative-objectsï¼‰çš„åŒºåˆ«" class="headerlink" title="å®¿ä¸»å¯¹è±¡ï¼ˆhost objectsï¼‰å’ŒåŸç”Ÿå¯¹è±¡ï¼ˆnative objectsï¼‰çš„åŒºåˆ«"></a>å®¿ä¸»å¯¹è±¡ï¼ˆhost objectsï¼‰å’ŒåŸç”Ÿå¯¹è±¡ï¼ˆnative objectsï¼‰çš„åŒºåˆ«</h2><ul>
<li>åŸç”Ÿå¯¹è±¡æ˜¯ç”±ECMAScriptè§„èŒƒå®šä¹‰çš„JavaScriptå†…ç½®å¯¹è±¡ï¼Œå¦‚<code>String</code>ã€<code>Math</code>ã€<code>RegExp</code>ç­‰</li>
<li>å®¿ä¸»å¯¹è±¡æ˜¯æŒ‡ç”±è¿è¡Œæ—¶ç¯å¢ƒï¼ˆæµè§ˆå™¨æˆ–Nodeï¼‰æä¾›ï¼Œå¦‚<code>window</code>ã€<code>XMLRequest</code>ã€<code>Buffer</code></li>
</ul>
<h2 id="function-Persion-ã€var-person-Person-ã€var-person-new-Person-çš„åŒºåˆ«"><a href="#function-Persion-ã€var-person-Person-ã€var-person-new-Person-çš„åŒºåˆ«" class="headerlink" title="function Persion() {}ã€var person = Person()ã€var person = new Person()çš„åŒºåˆ«"></a><code>function Persion() {}</code>ã€<code>var person = Person()</code>ã€<code>var person = new Person()</code>çš„åŒºåˆ«</h2><p><code>function Persion() {}</code>åªæ˜¯ä¸€ä¸ªæ™®é€šçš„å‡½æ•°å£°æ˜ã€‚ä½¿ç”¨PascalCaseæ–¹å¼å‘½åçš„å‡½æ•°ä½œä¸ºæ„é€ å‡½æ•°æ˜¯ä¸€ç§æƒ¯ä¾‹</p>
<p><code>var person = Person()</code>å°†<code>Person</code>ä½œä¸ºæ™®é€šå‡½æ•°è°ƒç”¨è€Œä¸æ˜¯æ„é€ å‡½æ•°ã€‚å¦‚æœè¯¥å‡½æ•°æ˜¯ç”¨ä½œæ„é€ å‡½æ•°ï¼Œé‚£ä¹ˆè¿™ç§è°ƒç”¨æ–¹å¼æ˜¯ä¸€ç§åˆ›å»ºé”™è¯¯ï¼Œé€šå¸¸æƒ…å†µä¸‹æ„é€ å‡½æ•°ä¸ä¼šè¿”å›ä»»ä½•ä¸œè¥¿ï¼Œå› æ­¤å‘æ™®é€šå‡½æ•°ä¸€æ ·è°ƒç”¨æ„é€ å‡½æ•°åªä¼šè¿”å›<code>undefined</code></p>
<p><code>var person = new Person()</code>ä½¿ç”¨<code>new</code>æ“ä½œç¬¦ï¼Œåˆ›å»º<code>Person</code>å¯¹è±¡çš„å®ä¾‹ï¼Œè¯¥å®ä¾‹ç»§æ‰¿è‡ª<code>Person.prototype</code><br>åœ¨ä½¿ç”¨newçš„è¿‡ç¨‹ä¸­ä¼šå‘ç”Ÿä»¥ä¸‹äº‹æƒ…ï¼š</p>
<ol>
<li>æ–°ç”Ÿæˆäº†ä¸€ä¸ªå¯¹è±¡</li>
<li>é“¾æ¥åˆ°åŸå‹</li>
<li>ç»‘å®šthis</li>
<li>è¿”å›æ–°å¯¹è±¡</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = Person()</span><br><span class="line"><span class="built_in">console</span>.log(person) <span class="comment">//undefined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> Person(<span class="string">"tom"</span>)</span><br><span class="line"><span class="built_in">console</span>.log(person) <span class="comment">// Person &#123; name: "tom" &#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="callå’Œ-applyçš„åŒºåˆ«"><a href="#callå’Œ-applyçš„åŒºåˆ«" class="headerlink" title=".callå’Œ.applyçš„åŒºåˆ«"></a><code>.call</code>å’Œ<code>.apply</code>çš„åŒºåˆ«</h2><table>
<thead>
<tr>
<th></th>
<th><code>call</code></th>
<th><code>apply</code></th>
</tr>
</thead>
<tbody><tr>
<td>ä½œç”¨</td>
<td>æŒ‡å®šå‡½æ•°<code>this</code></td>
<td>æŒ‡å®šå‡½æ•°<code>this</code></td>
</tr>
<tr>
<td>ä¼ å‚æ–¹å¼</td>
<td>ä»¥é€—å·åˆ†éš”</td>
<td>æ•°ç»„</td>
</tr>
</tbody></table>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> leo = &#123;</span><br><span class="line">	name: <span class="string">"Leo"</span>,</span><br><span class="line">	sayHi() &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">"Hi! I'm "</span> + <span class="keyword">this</span>.name) </span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> neil = &#123;</span><br><span class="line">	name: <span class="string">"Neil"</span></span><br><span class="line">&#125;;</span><br><span class="line">leo.sayHi(); <span class="comment">// "Hi! I'm Leo"</span></span><br><span class="line">leo.sayHi.call(neil); <span class="comment">// "Hi! I'm Neil"</span></span><br><span class="line">leo.sayHi.call(<span class="literal">null</span>); <span class="comment">// "Hi! I'm undefined"</span></span><br><span class="line"><span class="keyword">var</span> neilSayHi = leo.sayHi.bind(neil)</span><br><span class="line">consolo.log(<span class="keyword">typeof</span> neilSayHi)  <span class="comment">// function</span></span><br><span class="line">nei.sayHi() <span class="comment">// "Hi! I'm Neil"</span></span><br></pre></td></tr></table></figure>

<h2 id="bind"><a href="#bind" class="headerlink" title="bind"></a><code>bind</code></h2><p>ä¹Ÿç”¨äºæ”¹å˜<code>this</code>çš„åªæƒ³ç›¸è¾ƒäº<code>call</code>ã€<code>apply</code>ï¼Œ<code>bind</code>è¿”å›çš„æ˜¯ä¸€ä¸ªå‡½æ•°</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="number">12</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.x)</span><br><span class="line">&#125;</span><br><span class="line">test()</span><br><span class="line">test.bind(&#123; <span class="attr">x</span>: <span class="number">100</span> &#125;)()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 12</span></span><br><span class="line"><span class="comment">// 100</span></span><br></pre></td></tr></table></figure>


        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://mrrs878.github.io/2020/01/14/Node.js-åŸºç¡€/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr.RS">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/imgs/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mr.RS">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            
            <a href="/2020/01/14/Node.js-åŸºç¡€/" class="post-title-link" itemprop="url">Node.js-åŸºç¡€</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-01-14 14:11:45 / ä¿®æ”¹æ—¶é—´ï¼š14:13:09" itemprop="dateCreated datePublished" datetime="2020-01-14T14:11:45+08:00">2020-01-14</time>
            </span>
          
            

            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Node-js/" itemprop="url" rel="index">
                    <span itemprop="name">Node.js</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Buffer"><a href="#Buffer" class="headerlink" title="Buffer"></a><a href="http://nodejs.cn/api/buffer.html" target="_blank" rel="noopener">Buffer</a></h1><p>JSè‡ªèº«åªèƒ½åªæœ‰å­—ç¬¦ä¸²æ•°æ®ç±»å‹ï¼Œæ²¡æœ‰äºŒè¿›åˆ¶æ•°æ®ç±»å‹ï¼Œå› æ­¤nodejsæä¾›äº†ä¸€ä¸ªä¸stringå¯¹ç­‰çš„å…¨å±€æ„é€ å‡½æ•°Bufferæ¥æä¾›å¯¹äºŒè¿›åˆ¶æ•°æ®çš„æ“ä½œ</p>
<ul>
<li><p><code>Buffer.form</code> åˆ›å»ºä¸€ä¸ªbuffer</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Buffer.form([ <span class="number">0x68</span>, <span class="number">0x65</span>, <span class="number">0x6c</span>, <span class="number">0x6c</span>, <span class="number">0x6f</span> ]).toString()</span><br><span class="line"><span class="comment">// hello</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>Burrer</code>ä¸<code>String</code>çš„ä¸€ä¸ªé‡è¦åŒºåˆ«å°±æ˜¯å­—ç¬¦ä¸²æ—¶åªè¯»çš„ï¼Œå¹¶ä¸”å¯¹äºå­—ç¬¦ä¸²çš„ä»»ä½•ä¿®æ”¹å¾—åˆ°çš„éƒ½æ˜¯ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œæºå­—ç¬¦ä¸²ä¿æŒä¸å˜ã€‚è‡³äº<code>Buffer</code>ï¼Œæ›´åƒæ˜¯å¯ä»¥åšæŒ‡é’ˆæ“ä½œçš„Cè¯­è¨€æ•°ç»„ï¼Œä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨<code>[index]</code>æ–¹å¼ç›´æ¥ä¿®æ”¹æŸä¸ªä½ç½®çš„å­—èŠ‚</p>
</li>
</ul>
<h1 id="Stream"><a href="#Stream" class="headerlink" title="Stream"></a><a href="http://nodejs.cn/api/stream.html" target="_blank" rel="noopener">Stream</a></h1><ul>
<li><p>å½“å†…å­˜ä¸­æ— æ³•ä¸€æ¬¡è£…ä¸‹éœ€è¦å¤„ç†çš„æ•°æ®æ—¶ï¼Œæˆ–è€…ä¸€è¾¹è¯»å–ä¸€è¾¹å¤„ç†æ›´åŠ é«˜æ•ˆæ—¶ï¼Œæˆ‘ä»¬å°±éœ€è¦ç”¨åˆ°æ•°æ®æµã€‚NodeJSä¸­é€šè¿‡å„ç§<code>Stream</code>æ¥æä¾›å¯¹æ•°æ®æµçš„æ“ä½œã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> rs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">copy</span> (<span class="params">src, dst</span>) </span>&#123;</span><br><span class="line">    fs.createReadStream(src).pipe(fs.createWriteSreeam(dst));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">main</span> (<span class="params">argv</span>) </span>&#123;</span><br><span class="line">    copy(argv[<span class="number">0</span>], argv[<span class="number">1</span>])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main(process.argv.slice(<span class="number">2</span>));</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>Stream</code>åŸºäºäº‹ä»¶æœºåˆ¶å·¥ä½œï¼Œæ‰€æœ‰<code>Stream</code>çš„å®ä¾‹éƒ½ç»§æ‰¿äºNodeJSæä¾›çš„<a href="http://nodejs.cn/api/events.html#events_class_eventemitter" target="_blank" rel="noopener"><code>EventEmitter</code></a></p>
</li>
</ul>
<h1 id="File-System"><a href="#File-System" class="headerlink" title="File System"></a><a href="http://nodejs.cn/api/fs.html" target="_blank" rel="noopener">File System</a></h1><p>NodeJSé€šè¿‡<code>fs</code>å†…ç½®æ¨¡å—æä¾›å¯¹æ–‡ä»¶çš„æ“ä½œï¼Œ<code>fs</code>æ¨¡å—æä¾›çš„APIåŸºæœ¬ä¸Šå¯ä»¥åˆ†ä¸ºä»¥ä¸‹ä¸‰ç±»ï¼š</p>
<ul>
<li>æ–‡ä»¶å±æ€§è¯»<br>å…¶ä¸­å¸¸è§çš„æœ‰<code>fs.state</code> <code>fs.chmod</code> <code>fs.chown</code></li>
<li>æ–‡ä»¶å±æ€§å†™<br>å…¶ä¸­å¸¸è§çš„æœ‰<code>fs.readFile</code> <code>fs.readdir</code> <code>fs.writeFile</code> <code>fs.mkdir</code></li>
<li>åº•å±‚æ–‡ä»¶æ“ä½œ<br>å…¶ä¸­å¸¸è§çš„æ“ä½œæœ‰<code>fs.open</code> <code>fs.read</code> <code>fs.write</code> <code>fs.close</code><br>æ‰€æœ‰çš„<code>fs</code>æ¨¡å—APIçš„å›è°ƒå‚æ•°éƒ½æœ‰ä¸¤ä¸ªï¼Œç¬¬ä¸€ä¸ªå‚æ•°åœ¨æœ‰é”™è¯¯å‘ç”Ÿæ—¶ç­‰äºå¼‚å¸¸å¯¹è±¡ï¼Œç¬¬äºŒä¸ªå‚æ•°å§‹ç»ˆç”¨äºè¿”å›APIæ–¹æ³•æ‰§è¡Œç»“æœ<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fs.readFile(pathname, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;&#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="Path"><a href="#Path" class="headerlink" title="Path"></a><a href="http://nodejs.cn/api/path.html" target="_blank" rel="noopener">Path</a></h2><p>æ“ä½œæ–‡ä»¶æ—¶éš¾å…ä¸ä¸æ–‡ä»¶è·¯å¾„æ‰“äº¤é“ã€‚NodeJSæä¾›äº†<code>path</code>å†…ç½®æ¨¡å—æ¥ç®€åŒ–è·¯å¾„ç›¸å…³æ“ä½œï¼Œå¹¶æå‡ä»£ç å¯è¯»æ€§ã€‚</p>
<ul>
<li><p><code>path.normalize</code><br>  å°†ä¼ å…¥çš„å‚æ•°è½¬ä¸ºæ ‡å‡†è·¯å¾„ï¼Œå…·ä½“è®²çš„è¯ï¼Œé™¤äº†è§£æè·¯å¾„ä¸­çš„<code>.</code>ä¸<code>..</code>å¤–ï¼Œè¿˜èƒ½å»æ‰å¤šä½™çš„æ–œæ ã€‚å¦‚æœæœ‰ç¨‹åºéœ€è¦ä½¿ç”¨è·¯å¾„ä½œä¸ºæŸäº›æ•°æ®çš„ç´¢å¼•ï¼Œä½†åˆå…è®¸ç”¨æˆ·éšæ„è¾“å…¥è·¯å¾„æ—¶ï¼Œå°±éœ€è¦ä½¿ç”¨è¯¥æ–¹æ³•ä¿è¯è·¯å¾„çš„å”¯ä¸€æ€§ã€‚</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> cache = &#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">store</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    cache[path.normalize(key)] = value</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">store(<span class="string">'foo/bar'</span>, <span class="number">1</span>);</span><br><span class="line">store(<span class="string">'foo//baz//../bar'</span>, <span class="number">2</span>);</span><br><span class="line"><span class="built_in">console</span>.log(cache);  <span class="comment">// =&gt; &#123; "foo/bar": 2 &#125;</span></span><br></pre></td></tr></table></figure>

<p>  æ ‡å‡†åŒ–ä¹‹åçš„è·¯å¾„é‡Œçš„æ–œæ åœ¨Windowsç³»ç»Ÿä¸‹æ˜¯\ï¼Œè€Œåœ¨Linuxç³»ç»Ÿä¸‹æ˜¯/ã€‚å¦‚æœæƒ³ä¿è¯ä»»ä½•ç³»ç»Ÿä¸‹éƒ½ä½¿ç”¨/ä½œä¸ºè·¯å¾„åˆ†éš”ç¬¦çš„è¯ï¼Œéœ€è¦ç”¨<code>.replace(/\\/g, &#39;/&#39;)</code>å†æ›¿æ¢ä¸€ä¸‹æ ‡å‡†è·¯å¾„ã€‚</p>
</li>
<li><p><code>path.join</code><br>  å°†ä¼ å…¥çš„å¤šä¸ªè·¯å¾„æ‹¼æ¥ä¸ºæ ‡å‡†è·¯å¾„ã€‚è¯¥æ–¹æ³•å¯é¿å…æ‰‹å·¥æ‹¼æ¥è·¯å¾„å­—ç¬¦ä¸²çš„ç¹çï¼Œå¹¶ä¸”èƒ½åœ¨ä¸åŒç³»ç»Ÿä¸‹æ­£ç¡®ä½¿ç”¨ç›¸åº”çš„è·¯å¾„åˆ†éš”ç¬¦ã€‚</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">path.join(<span class="string">'foo/'</span>, <span class="string">'baz/'</span>, <span class="string">'../bar'</span>); <span class="comment">// =&gt; "foo/bar"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>path.extname</code><br>  å½“æˆ‘ä»¬éœ€è¦æ ¹æ®ä¸åŒæ–‡ä»¶æ‰©å±•ååšä¸åŒæ“ä½œæ—¶ï¼Œè¯¥æ–¹æ³•å°±æ˜¾å¾—å¾ˆå¥½ç”¨ã€‚</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">path.extname(<span class="string">'foo/bar.js'</span>); <span class="comment">// =&gt; ".js"</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="éå†ç›®å½•"><a href="#éå†ç›®å½•" class="headerlink" title="éå†ç›®å½•"></a>éå†ç›®å½•</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">travel</span> (<span class="params">dir, callback</span>) </span>&#123;</span><br><span class="line">    fs.readdirSync(dir).forEach(<span class="function"><span class="params">file</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> pathname = path.join(dir, file)</span><br><span class="line">        <span class="keyword">if</span> (fs.statSync(pathname).isDirectory())</span><br><span class="line">            travel(pathname, callback)</span><br><span class="line">        <span class="keyword">else</span> callback(pathname)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">travel(__dirname, file =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(file)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// c:\Users\mrrs8\Desktop\desktop.ini</span></span><br><span class="line"><span class="comment">// c:\Users\mrrs8\Desktop\Postman.lnk</span></span><br><span class="line"><span class="comment">// c:\Users\mrrs8\Desktop\test.js</span></span><br><span class="line"><span class="comment">// c:\Users\mrrs8\Desktop\å¾®ä¿¡å¼€å‘è€…å·¥å…·.lnk</span></span><br></pre></td></tr></table></figure>

<h1 id="æ–‡æœ¬ç¼–ç "><a href="#æ–‡æœ¬ç¼–ç " class="headerlink" title="æ–‡æœ¬ç¼–ç "></a>æ–‡æœ¬ç¼–ç </h1><p>ä½¿ç”¨NodeJSç¼–å†™å‰ç«¯å·¥å…·æ—¶ï¼Œæ“ä½œå¾—æœ€å¤šçš„æ˜¯æ–‡æœ¬æ–‡ä»¶ï¼Œå› æ­¤ä¹Ÿå°±æ¶‰åŠåˆ°äº†æ–‡ä»¶ç¼–ç çš„å¤„ç†é—®é¢˜ã€‚æˆ‘ä»¬å¸¸ç”¨çš„æ–‡æœ¬ç¼–ç æœ‰<code>UTF8</code>å’Œ<code>GBK</code>ä¸¤ç§ï¼Œå¹¶ä¸”<code>UTF8</code>æ–‡ä»¶è¿˜å¯èƒ½å¸¦æœ‰<code>BOM</code>ã€‚åœ¨è¯»å–ä¸åŒç¼–ç çš„æ–‡æœ¬æ–‡ä»¶æ—¶ï¼Œéœ€è¦å°†æ–‡ä»¶å†…å®¹è½¬æ¢ä¸ºJSä½¿ç”¨çš„<code>UTF8</code>ç¼–ç å­—ç¬¦ä¸²åæ‰èƒ½æ­£å¸¸å¤„ç†ã€‚</p>
<h2 id="BOMçš„ç§»é™¤"><a href="#BOMçš„ç§»é™¤" class="headerlink" title="BOMçš„ç§»é™¤"></a>BOMçš„ç§»é™¤</h2><p>BOMç”¨äºæ ‡è®°ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ä½¿ç”¨<code>Unicode</code>ç¼–ç ï¼Œå…¶æœ¬èº«æ˜¯ä¸€ä¸ª<code>Unicode</code>å­—ç¬¦<code>ï¼ˆ&quot;\uFEFF&quot;ï¼‰</code>ï¼Œä½äºæ–‡æœ¬æ–‡ä»¶å¤´éƒ¨ã€‚åœ¨ä¸åŒçš„<code>Unicode</code>ç¼–ç ä¸‹ï¼Œ<code>BOM</code>å­—ç¬¦å¯¹åº”çš„äºŒè¿›åˆ¶å­—èŠ‚å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">    Bytes      Encoding</span><br><span class="line">----------------------------</span><br><span class="line">    FE FF       UTF16BE</span><br><span class="line">    FF FE       UTF16LE</span><br><span class="line">    EF BB BF    UTF8</span><br></pre></td></tr></table></figure>

<p>å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®æ–‡æœ¬æ–‡ä»¶å¤´å‡ ä¸ªå­—èŠ‚ç­‰äºå•¥æ¥åˆ¤æ–­æ–‡ä»¶æ˜¯å¦åŒ…å«<code>BOM</code>ï¼Œä»¥åŠä½¿ç”¨å“ªç§<code>Unicode</code>ç¼–ç ã€‚ä½†æ˜¯ï¼Œ<code>BOM</code>å­—ç¬¦è™½ç„¶èµ·åˆ°äº†æ ‡è®°æ–‡ä»¶ç¼–ç çš„ä½œç”¨ï¼Œå…¶æœ¬èº«å´ä¸å±äºæ–‡ä»¶å†…å®¹çš„ä¸€éƒ¨åˆ†ï¼Œå¦‚æœè¯»å–æ–‡æœ¬æ–‡ä»¶æ—¶ä¸å»æ‰<code>BOM</code>ï¼Œåœ¨æŸäº›ä½¿ç”¨åœºæ™¯ä¸‹å°±ä¼šæœ‰é—®é¢˜ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¯†åˆ«å’Œå»é™¤UTF8 BOM</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">readText</span> (<span class="params">pathname</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> bin = fs.readFileSync(pathname);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (bin[<span class="number">0</span>] === <span class="number">0xEF</span> &amp;&amp; bin[<span class="number">1</span>] === <span class="number">0xBB</span> &amp;&amp; bin[<span class="number">2</span>] === <span class="number">0xBF</span>) &#123;</span><br><span class="line">        bin = bin.slice(<span class="number">3</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> bin.toString(<span class="string">'utf-8'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="GBKè½¬UTF8"><a href="#GBKè½¬UTF8" class="headerlink" title="GBKè½¬UTF8"></a>GBKè½¬UTF8</h2><p>NodeJSæ”¯æŒåœ¨è¯»å–æ–‡æœ¬æ–‡ä»¶æ—¶ï¼Œæˆ–è€…åœ¨<code>Buffer</code>è½¬æ¢ä¸ºå­—ç¬¦ä¸²æ—¶æŒ‡å®šæ–‡æœ¬ç¼–ç ï¼Œä½†é—æ†¾çš„æ˜¯ï¼Œ<code>GBK</code>ç¼–ç ä¸åœ¨NodeJSè‡ªèº«æ”¯æŒèŒƒå›´å†…ã€‚å› æ­¤ï¼Œä¸€èˆ¬æˆ‘ä»¬å€ŸåŠ©<code>iconv-lite</code>è¿™ä¸ªä¸‰æ–¹åŒ…æ¥è½¬æ¢ç¼–ç </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// GBKè½¬UTF8</span></span><br><span class="line"><span class="keyword">const</span> iconv = <span class="built_in">require</span>(<span class="string">'iconv-lite'</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">readGBKText</span>(<span class="params">pathname</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> bin = fs.readFileSync(pathname);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> iconv.decode(bin, <span class="string">'gbk'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å•å­—èŠ‚ç¼–ç "><a href="#å•å­—èŠ‚ç¼–ç " class="headerlink" title="å•å­—èŠ‚ç¼–ç "></a>å•å­—èŠ‚ç¼–ç </h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">replace</span>(<span class="params">pathname</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> str = fs.readFileSync(pathname, <span class="string">'binary'</span>);</span><br><span class="line">    str = str.replace(<span class="string">'foo'</span>, <span class="string">'bar'</span>);</span><br><span class="line">    fs.writeFileSync(pathname, str, <span class="string">'binary'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://mrrs878.github.io/2020/01/14/go-gin-åŸºç¡€/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr.RS">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/imgs/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mr.RS">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            
            <a href="/2020/01/14/go-gin-åŸºç¡€/" class="post-title-link" itemprop="url">go-gin-åŸºç¡€</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-01-14 14:05:44" itemprop="dateCreated datePublished" datetime="2020-01-14T14:05:44+08:00">2020-01-14</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-02-06 17:42:49" itemprop="dateModified" datetime="2020-02-06T17:42:49+08:00">2020-02-06</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/go-gin/" itemprop="url" rel="index">
                    <span itemprop="name">go gin</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="è·å–GET-pathå‚æ•°"><a href="#è·å–GET-pathå‚æ•°" class="headerlink" title="è·å–GET pathå‚æ•°"></a>è·å–<code>GET</code> <code>path</code>å‚æ•°</h1><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  r := gin.Default()</span><br><span class="line">  r.GET(<span class="string">"/index/:id"</span>, <span class="function"><span class="keyword">func</span><span class="params">(context *gin.Context)</span></span>&#123;</span><br><span class="line">    r.JOSN(http.StatusOK, gin.H&#123;</span><br><span class="line">      <span class="string">"id"</span>: context.Param(<span class="string">"id"</span>),</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="è·å–POST-raw-jsonå‚æ•°"><a href="#è·å–POST-raw-jsonå‚æ•°" class="headerlink" title="è·å–POST raw jsonå‚æ•°"></a>è·å–<code>POST</code> <code>raw json</code>å‚æ•°</h1><ol>
<li><p>å®šä¹‰ä¸€ä¸ªå…¬ç”¨<code>struct</code>ï¼Œç”¨äºæ ‡å‡†è¿”å›æ•°æ®æ ¼å¼</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> ResBodyS <span class="keyword">struct</span> &#123;</span><br><span class="line">  ErrCode <span class="keyword">int</span> <span class="string">`json:"errCode"`</span></span><br><span class="line">  Desc <span class="keyword">string</span> <span class="string">`json:"description" binding:"required"`</span> <span class="comment">//å‚æ•°å­˜åœ¨æ€§æ ¡éªŒ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>å®šä¹‰é’ˆå¯¹äºç‰¹å®šæ¥å£çš„<code>struct</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> IndexReqBodyS <span class="keyword">struct</span> &#123;</span><br><span class="line">  ResBodyS</span><br><span class="line">  Data <span class="keyword">string</span> <span class="string">`json:"index"`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä½¿ç”¨<code>context.BindJSON()</code>è§£æè¯·æ±‚ä¸­çš„bodyå‚æ•°</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  r := gin,Default()</span><br><span class="line">  r.POST(<span class="string">"/index"</span>, <span class="function"><span class="keyword">func</span><span class="params">(context *gin.Context)</span></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> reqInfo IndexReqBodyS</span><br><span class="line">    err := context.BindJSON(&amp;reqInfo)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">      fmt.PrintFln(<span class="string">"parse json data error! err:"</span>, err)</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    context.JSON(http.StatusOK, reqInfo)</span><br><span class="line">  &#125;)</span><br><span class="line">  r.Run(<span class="string">":9090"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h1 id="æ•è·å¼‚å¸¸"><a href="#æ•è·å¼‚å¸¸" class="headerlink" title="æ•è·å¼‚å¸¸"></a>æ•è·å¼‚å¸¸</h1><p>åœ¨ Go ä¸­å¼‚å¸¸å°±æ˜¯<code>panic</code>ï¼Œå®ƒæ˜¯åœ¨ç¨‹åºè¿è¡Œçš„æ—¶å€™æŠ›å‡ºçš„ï¼Œå½“<code>panic</code>æŠ›å‡ºä¹‹åï¼Œå¦‚æœåœ¨ç¨‹åºé‡Œæ²¡æœ‰æ·»åŠ ä»»ä½•ä¿æŠ¤æªæ–½çš„è¯ï¼Œæ§åˆ¶å°å°±ä¼šåœ¨æ‰“å°å‡º<code>panic</code>çš„è¯¦ç»†æƒ…å†µï¼Œç„¶åç»ˆæ­¢è¿è¡Œã€‚<br>å½“ç¨‹åºå‘ç”Ÿ<code>panic</code>åï¼Œåœ¨<code>defer</code>(å»¶è¿Ÿå‡½æ•°) å†…éƒ¨å¯ä»¥è°ƒç”¨<code>recover</code>è¿›è¡Œæ•è·ã€‚</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">  err := <span class="built_in">recover</span>();</span><br><span class="line">  <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    fmp.Println(err)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="å•å…ƒæµ‹è¯•"><a href="#å•å…ƒæµ‹è¯•" class="headerlink" title="å•å…ƒæµ‹è¯•"></a>å•å…ƒæµ‹è¯•</h1><p>ä½¿ç”¨<code>net/http/httptest</code>åŒ…<br>ä¸åŸç”Ÿæµ‹è¯•ç›¸æ¯”ï¼Œä½¿ç”¨<code>gin.Engine.ServeHTTP</code>å‘é€è¯·æ±‚(åŸç”Ÿä½¿ç”¨<code>http.HandlerFunc.ServeHTTP</code>)</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> engine *gin.Engine</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> accessToken = <span class="string">"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE1ODA5OTE1NTUsInVzZXJfaWQiOjE4LCJuYW1lIjoidGVzdDEifQ.900X9t3qveW0NGn3_FhYxHXlgsLAdl1BkjfKxNlBNyE"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">CreateRequest</span><span class="params">(method constant.HttpRequestMethod, url <span class="keyword">string</span>, params <span class="keyword">interface</span>&#123;&#125;)</span> <span class="params">(status constant.ResultCode, resBody *util.ResS, returnError error)</span></span> &#123;</span><br><span class="line">	<span class="keyword">if</span> engine == <span class="literal">nil</span> &#123;</span><br><span class="line">		gin.SetMode(gin.ReleaseMode)</span><br><span class="line">		engine = gin.New()</span><br><span class="line">		database.SetUpDatabase()</span><br><span class="line">		controller.SetupRouter(engine)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> (</span><br><span class="line">		rr        = httptest.NewRecorder()</span><br><span class="line">		req       = <span class="built_in">new</span>(http.Request)</span><br><span class="line">		err error = <span class="literal">nil</span></span><br><span class="line">	)</span><br><span class="line">	<span class="keyword">if</span> params != <span class="literal">nil</span> &#123;</span><br><span class="line">		tmp, err := json.Encode(params)</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			<span class="keyword">return</span> constant.FAILED, <span class="literal">nil</span>, err</span><br><span class="line">		&#125;</span><br><span class="line">		req, err = http.NewRequest(<span class="keyword">string</span>(method), url, bytes.NewBuffer([]<span class="keyword">byte</span>(tmp)))</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		req, err = http.NewRequest(<span class="keyword">string</span>(method), url, <span class="literal">nil</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> constant.FAILED, <span class="literal">nil</span>, err</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	req.Header.Add(<span class="string">"Authorization"</span>, fmt.Sprintf(<span class="string">"Bear %s"</span>, accessToken))</span><br><span class="line">	engine.ServeHTTP(rr, req)</span><br><span class="line"></span><br><span class="line">	formatRes := util.ResS&#123;&#125;</span><br><span class="line">	err = json.Decode(rr.Body.Bytes(), &amp;formatRes)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> constant.FAILED, <span class="literal">nil</span>, err</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> constant.SUCCESS, &amp;formatRes, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">CreateTest</span><span class="params">(t *testing.T, method constant.HttpRequestMethod, url <span class="keyword">string</span>, params <span class="keyword">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class="line">	_, resBody, err := CreateRequest(method, url, params)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		t.Errorf(<span class="string">"got error: %s"</span>, err.Error())</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> resBody != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> resBody.Code != constant.SUCCESS &#123;</span><br><span class="line">			t.Errorf(<span class="string">"GetInfo test failed, got: %v, info: %s"</span>, resBody.Data, resBody.Message)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://mrrs878.github.io/2020/01/14/go-åŸºç¡€/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr.RS">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/imgs/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mr.RS">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            
            <a href="/2020/01/14/go-åŸºç¡€/" class="post-title-link" itemprop="url">go-æé€Ÿå…¥é—¨</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-01-14 13:43:45" itemprop="dateCreated datePublished" datetime="2020-01-14T13:43:45+08:00">2020-01-14</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-02-06 17:25:31" itemprop="dateModified" datetime="2020-02-06T17:25:31+08:00">2020-02-06</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/go/" itemprop="url" rel="index">
                    <span itemprop="name">go</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="ä¾èµ–åŒ…ç®¡ç†å·¥å…·"><a href="#ä¾èµ–åŒ…ç®¡ç†å·¥å…·" class="headerlink" title="ä¾èµ–åŒ…ç®¡ç†å·¥å…·"></a>ä¾èµ–åŒ…ç®¡ç†å·¥å…·</h1><ul>
<li><p>dep<br>æœªå®Œå¾…ç»­â€¦</p>
</li>
<li><p>go vendor<br>æœªå®Œå¾…ç»­â€¦</p>
</li>
<li><p>glide<br>æœªå®Œå¾…ç»­â€¦</p>
</li>
<li><p><strong>go modules</strong></p>
<p>ä¼´éšGo 1.11å‡ºç°ï¼Œ<strong>å®˜æ–¹æ¨è</strong></p>
</li>
</ul>
<h1 id="go-mod-å‘½ä»¤"><a href="#go-mod-å‘½ä»¤" class="headerlink" title="go mod å‘½ä»¤"></a>go mod å‘½ä»¤</h1><ul>
<li><p><code>go mod tidy</code></p>
<p>æ‹‰å–ç¼ºå°‘çš„æ¨¡å—ï¼Œç§»é™¤ä¸ç”¨çš„æ¨¡å—</p>
</li>
<li><p><code>go mod vandor</code></p>
<p>å°†ä¾èµ–å¤åˆ¶åˆ°vendorä¸‹</p>
</li>
<li><p><code>go mod download</code></p>
<p>ä¸‹è½½ä¾èµ–åŒ…</p>
</li>
<li><p><code>go mod verify</code></p>
<p>æ£€æµ‹ä¾èµ–</p>
</li>
<li><p><code>go mod graph</code></p>
<p>æ‰“å°æ¨¡å—ä¾èµ–å›¾</p>
</li>
</ul>
<h1 id="åˆ‡ç‰‡"><a href="#åˆ‡ç‰‡" class="headerlink" title="åˆ‡ç‰‡"></a>åˆ‡ç‰‡</h1><h2 id="åˆ‡ç‰‡å°±åƒæ•°ç»„çš„å¼•ç”¨"><a href="#åˆ‡ç‰‡å°±åƒæ•°ç»„çš„å¼•ç”¨" class="headerlink" title="åˆ‡ç‰‡å°±åƒæ•°ç»„çš„å¼•ç”¨"></a>åˆ‡ç‰‡å°±åƒæ•°ç»„çš„å¼•ç”¨</h2><h2 id="åˆ‡ç‰‡æ‹¥æœ‰-é•¿åº¦-å’Œ-å®¹é‡"><a href="#åˆ‡ç‰‡æ‹¥æœ‰-é•¿åº¦-å’Œ-å®¹é‡" class="headerlink" title="åˆ‡ç‰‡æ‹¥æœ‰ é•¿åº¦ å’Œ å®¹é‡"></a>åˆ‡ç‰‡æ‹¥æœ‰ <em>é•¿åº¦</em> å’Œ <em>å®¹é‡</em></h2><ul>
<li>åˆ‡ç‰‡çš„é•¿åº¦å°±æ˜¯å®ƒæ‰€åŒ…å«çš„å…ƒç´ ä¸ªæ•°ã€‚</li>
<li>åˆ‡ç‰‡çš„å®¹é‡æ˜¯ä»å®ƒçš„ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹æ•°ï¼Œåˆ°å…¶åº•å±‚æ•°ç»„å…ƒç´ æœ«å°¾çš„ä¸ªæ•°ã€‚</li>
<li>åˆ‡ç‰‡ s çš„é•¿åº¦å’Œå®¹é‡å¯é€šè¿‡è¡¨è¾¾å¼ <code>len(s)</code> å’Œ <code>cap(s)</code> æ¥è·å–ã€‚</li>
</ul>
<h2 id="åˆ‡ç‰‡å¯ä»¥ç”¨å†…å»ºå‡½æ•°-make-æ¥åˆ›å»ºï¼Œè¿™ä¹Ÿæ˜¯åˆ›å»ºåŠ¨æ€æ•°ç»„çš„æ–¹å¼ã€‚make-å‡½æ•°ä¼šåˆ†é…ä¸€ä¸ªå…ƒç´ ä¸ºé›¶å€¼çš„æ•°ç»„å¹¶è¿”å›ä¸€ä¸ªå¼•ç”¨äº†å®ƒçš„åˆ‡ç‰‡ï¼š"><a href="#åˆ‡ç‰‡å¯ä»¥ç”¨å†…å»ºå‡½æ•°-make-æ¥åˆ›å»ºï¼Œè¿™ä¹Ÿæ˜¯åˆ›å»ºåŠ¨æ€æ•°ç»„çš„æ–¹å¼ã€‚make-å‡½æ•°ä¼šåˆ†é…ä¸€ä¸ªå…ƒç´ ä¸ºé›¶å€¼çš„æ•°ç»„å¹¶è¿”å›ä¸€ä¸ªå¼•ç”¨äº†å®ƒçš„åˆ‡ç‰‡ï¼š" class="headerlink" title="åˆ‡ç‰‡å¯ä»¥ç”¨å†…å»ºå‡½æ•° make æ¥åˆ›å»ºï¼Œè¿™ä¹Ÿæ˜¯åˆ›å»ºåŠ¨æ€æ•°ç»„çš„æ–¹å¼ã€‚make å‡½æ•°ä¼šåˆ†é…ä¸€ä¸ªå…ƒç´ ä¸ºé›¶å€¼çš„æ•°ç»„å¹¶è¿”å›ä¸€ä¸ªå¼•ç”¨äº†å®ƒçš„åˆ‡ç‰‡ï¼š"></a>åˆ‡ç‰‡å¯ä»¥ç”¨å†…å»ºå‡½æ•° <code>make</code> æ¥åˆ›å»ºï¼Œè¿™ä¹Ÿæ˜¯åˆ›å»ºåŠ¨æ€æ•°ç»„çš„æ–¹å¼ã€‚<code>make</code> å‡½æ•°ä¼šåˆ†é…ä¸€ä¸ªå…ƒç´ ä¸ºé›¶å€¼çš„æ•°ç»„å¹¶è¿”å›ä¸€ä¸ªå¼•ç”¨äº†å®ƒçš„åˆ‡ç‰‡ï¼š</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">a := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">5</span>)  <span class="comment">// len(a)=5</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¦æŒ‡å®šå®ƒçš„å®¹é‡ï¼Œéœ€å‘ make ä¼ å…¥ç¬¬ä¸‰ä¸ªå‚æ•°ï¼š</span></span><br><span class="line">b := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">0</span>, <span class="number">5</span>) <span class="comment">// len(b)=0, cap(b)=5</span></span><br><span class="line">b = b[:<span class="built_in">cap</span>(b)] <span class="comment">// len(b)=5, cap(b)=5</span></span><br><span class="line">b = b[<span class="number">1</span>:]      <span class="comment">// len(b)=4, cap(b)=4</span></span><br></pre></td></tr></table></figure>

<h2 id="å‘åˆ‡ç‰‡è¿½åŠ å…ƒç´ "><a href="#å‘åˆ‡ç‰‡è¿½åŠ å…ƒç´ " class="headerlink" title="å‘åˆ‡ç‰‡è¿½åŠ å…ƒç´ "></a>å‘åˆ‡ç‰‡è¿½åŠ å…ƒç´ </h2><p>append çš„ç¬¬ä¸€ä¸ªå‚æ•° s æ˜¯ä¸€ä¸ªå…ƒç´ ç±»å‹ä¸º T çš„åˆ‡ç‰‡ï¼Œå…¶ä½™ç±»å‹ä¸º T çš„å€¼å°†ä¼šè¿½åŠ åˆ°è¯¥åˆ‡ç‰‡çš„æœ«å°¾ã€‚append çš„ç»“æœæ˜¯ä¸€ä¸ªåŒ…å«åŸåˆ‡ç‰‡æ‰€æœ‰å…ƒç´ åŠ ä¸Šæ–°æ·»åŠ å…ƒç´ çš„åˆ‡ç‰‡ã€‚å½“ s çš„åº•å±‚æ•°ç»„å¤ªå°ï¼Œä¸è¶³ä»¥å®¹çº³æ‰€æœ‰ç»™å®šçš„å€¼æ—¶ï¼Œå®ƒå°±ä¼šåˆ†é…ä¸€ä¸ª(<strong>capå€¼ç¿»å€</strong>)æ›´å¤§çš„æ•°ç»„ã€‚è¿”å›çš„åˆ‡ç‰‡ä¼šæŒ‡å‘è¿™ä¸ªæ–°åˆ†é…çš„æ•°ç»„ã€‚</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> s []<span class="keyword">int</span></span><br><span class="line">    printSlice(s)</span><br><span class="line">    <span class="comment">// len=0 cap=0 []</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// capä¸å¤Ÿç”¨â€”â€”&gt;capç¿»å€â€”â€”&gt;cap=2</span></span><br><span class="line">	s = <span class="built_in">append</span>(s, <span class="number">0</span>)</span><br><span class="line">    printSlice(s)</span><br><span class="line">    <span class="comment">// len=1 cap=2 [0]</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// capå¤Ÿç”¨â€”â€”&gt;ä¿æŒä¸å˜â€”â€”&gt;cap=2</span></span><br><span class="line">	s = <span class="built_in">append</span>(s, <span class="number">1</span>)</span><br><span class="line">    printSlice(s)</span><br><span class="line">    <span class="comment">// len=2 cap=2 [0 1]</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// capä¸å¤Ÿç”¨â€”â€”&gt;capç¿»å€â€”â€”&gt;cap=8</span></span><br><span class="line">	s = <span class="built_in">append</span>(s, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line">    printSlice(s)</span><br><span class="line">    <span class="comment">// len=5 cap=8 [0 1 2 3 4]</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// capå¤Ÿç”¨â€”â€”&gt;capä¿æŒä¸å˜â€”â€”&gt;cap=8</span></span><br><span class="line">    s = <span class="built_in">append</span>(s, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>)</span><br><span class="line">    printSlice(s)</span><br><span class="line">    <span class="comment">// len=8 cap=8 [0 1 2 3 4 5 6 7]</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printSlice</span><span class="params">(s []<span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	fmt.Printf(<span class="string">"len=%d cap=%d %v\n"</span>, <span class="built_in">len</span>(s), <span class="built_in">cap</span>(s), s)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="map-æ— åºçš„-key-value-æ•°æ®ç»“æ„"><a href="#map-æ— åºçš„-key-value-æ•°æ®ç»“æ„" class="headerlink" title="map-æ— åºçš„ key-value æ•°æ®ç»“æ„"></a><code>map</code>-æ— åºçš„ <code>key-value</code> æ•°æ®ç»“æ„</h1><p>mapé›†åˆä¸­çš„ <code>key/value</code> å¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼Œä½†æ‰€æœ‰<code>key</code>å¿…é¡»åŒå±äºä¸€ç§æ•°æ®ç±»å‹ï¼Œæ‰€æœ‰çš„<code>value</code>å¿…é¡»åŒå±äºä¸€ç§æ•°æ®ç±»å‹ã€‚<code>key</code> å’Œ <code>value</code> çš„æ•°æ®ç±»å‹å¯ä»¥ä¸ç›¸åŒ</p>
<h1 id="forå¾ªç¯"><a href="#forå¾ªç¯" class="headerlink" title="forå¾ªç¯"></a><code>for</code>å¾ªç¯</h1><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">person := [<span class="number">3</span>]<span class="keyword">string</span> &#123; <span class="string">"tom"</span>, <span class="string">"john"</span>, <span class="string">"jerry"</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> k, v := <span class="keyword">range</span> person &#123;</span><br><span class="line">  fmt.Printf(<span class="string">"person[%d]: %s\n"</span>, k, v)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="goå…³é”®å­—"><a href="#goå…³é”®å­—" class="headerlink" title="goå…³é”®å­—"></a><code>go</code>å…³é”®å­—</h1><p>åœ¨goå…³é”®å­—åé¢åŠ ä¸€ä¸ªå‡½æ•°ï¼Œå°±å¯ä»¥åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œå‡½æ•°å¯ä»¥ä¸ºå·²ç»å†™å¥½çš„å‡½æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯åŒ¿åå‡½æ•°</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  fmt.Printf(<span class="string">"main start"</span>)</span><br><span class="line">  <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Println(<span class="string">"goroutine"</span>)</span><br><span class="line">  &#125;()</span><br><span class="line">  time.sleep(<span class="number">1</span> * time.Second)</span><br><span class="line">  fmt.Printf(<span class="string">"main end"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="chan-ç±»ä¼¼äºé˜Ÿåˆ—ï¼Œéµå¾ªå…ˆè¿›å…ˆå‡ºçš„è§„åˆ™"><a href="#chan-ç±»ä¼¼äºé˜Ÿåˆ—ï¼Œéµå¾ªå…ˆè¿›å…ˆå‡ºçš„è§„åˆ™" class="headerlink" title="chan-ç±»ä¼¼äºé˜Ÿåˆ—ï¼Œéµå¾ªå…ˆè¿›å…ˆå‡ºçš„è§„åˆ™"></a><code>chan</code>-ç±»ä¼¼äºé˜Ÿåˆ—ï¼Œéµå¾ªå…ˆè¿›å…ˆå‡ºçš„è§„åˆ™</h1><h2 id="å£°æ˜chan"><a href="#å£°æ˜chan" class="headerlink" title="å£°æ˜chan"></a>å£°æ˜<code>chan</code></h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å£°æ˜ä¸å¸¦ç¼“å†²çš„é€šé“</span></span><br><span class="line">ch1 := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">string</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å£°æ˜å¸¦10ä¸ªç¼“å†²çš„é€šé“</span></span><br><span class="line">ch2 := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">string</span>, <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å£°æ˜åªè¯»é€šé“</span></span><br><span class="line">ch3 := <span class="built_in">make</span>(&lt;-<span class="keyword">chan</span> <span class="keyword">string</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å£°æ˜åªå†™é€šé“</span></span><br><span class="line">ch4 := <span class="built_in">make</span>(<span class="keyword">chan</span>&lt;- <span class="keyword">string</span>)</span><br></pre></td></tr></table></figure>

<p>ä¸å¸¦ç¼“å†²çš„é€šé“ï¼Œè¿›ä½•å¤„éƒ½ä¼šé˜»å¡<br>å¸¦ç¼“å†²çš„é€šé“ï¼Œè¿›ä¸€æ¬¡é•¿åº¦+1ï¼Œå‡ºä¸€æ¬¡é•¿åº¦-1ï¼Œå¦‚æœé•¿åº¦ç­‰äºç¼“å†²åŒºé•¿åº¦æ—¶ï¼Œå†è¿›å°±ä¼šé˜»å¡</p>
<h2 id="å†™å…¥chan"><a href="#å†™å…¥chan" class="headerlink" title="å†™å…¥chan"></a>å†™å…¥<code>chan</code></h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ch1 := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">string</span>, <span class="number">10</span>)</span><br><span class="line">ch1 &lt;- <span class="string">"a"</span></span><br></pre></td></tr></table></figure>

<h2 id="è¯»å–chan"><a href="#è¯»å–chan" class="headerlink" title="è¯»å–chan"></a>è¯»å–<code>chan</code></h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">val, ok := &lt;- ch1</span><br><span class="line">val := &lt;- ch1</span><br></pre></td></tr></table></figure>

<h2 id="å…³é—­chan"><a href="#å…³é—­chan" class="headerlink" title="å…³é—­chan"></a>å…³é—­<code>chan</code></h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">close</span>(<span class="keyword">chan</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">productor</span><span class="params">(ch <span class="keyword">chan</span> <span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line">  fmt.Println(<span class="string">"producer start"</span>)</span><br><span class="line">  ch &lt;- <span class="string">"a"</span></span><br><span class="line">  ch &lt;- <span class="string">"b"</span></span><br><span class="line">  ch &lt;- <span class="string">"c"</span></span><br><span class="line">  ch &lt;- <span class="string">"d"</span></span><br><span class="line">  fmt.Println(<span class="string">"producer end"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  fmt.Println(<span class="string">"main start"</span>)</span><br><span class="line">  ch := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">string</span>, <span class="number">3</span>)</span><br><span class="line">  <span class="keyword">go</span> producer(ch)</span><br><span class="line"></span><br><span class="line">  time.Sleep(<span class="number">1</span> * time.Second)</span><br><span class="line">  fmt.Println(<span class="string">"main end"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// main start</span></span><br><span class="line"><span class="comment">// producer start  å‘ç”Ÿé˜»å¡</span></span><br><span class="line"><span class="comment">// main end</span></span><br></pre></td></tr></table></figure>

<h1 id="defer"><a href="#defer" class="headerlink" title="defer"></a><code>defer</code></h1><p>ä¸»è¦åº”ç”¨åœºæ™¯æœ‰å¼‚å¸¸å¤„ç†ã€è®°å½•æ—¥å¿—ã€æ¸…ç†æ•°æ®ã€é‡Šæ”¾èµ„æº ç­‰ç­‰ã€‚</p>
<ul>
<li><code>defer</code>åœ¨å£°æ˜æ—¶ä¸ä¼šç«‹åˆ»å»æ‰§è¡Œï¼Œè€Œæ˜¯åœ¨å‡½æ•° <code>return</code> åå»æ‰§è¡Œçš„ã€‚</li>
<li><code>defer</code>å‡½æ•°å®šä¹‰çš„é¡ºåºä¸å®é™…æ‰§è¡Œçš„é¡ºåºæ˜¯ç›¸åçš„ï¼Œä¹Ÿå°±æ˜¯æœ€å…ˆå£°æ˜çš„æœ€åæ‰æ‰§è¡Œ</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="keyword">defer</span> fmt.Println(<span class="string">"a"</span>)</span><br><span class="line">  <span class="keyword">defer</span> fmt.Println(<span class="string">"b"</span>)</span><br><span class="line">  <span class="keyword">defer</span> fmt.Println(<span class="string">"c"</span>)</span><br><span class="line">  <span class="keyword">defer</span> fmt.Println(<span class="string">"d"</span>)</span><br><span class="line"></span><br><span class="line">  fmt.Println(<span class="string">"main"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// main</span></span><br><span class="line"><span class="comment">// d</span></span><br><span class="line"><span class="comment">// c</span></span><br><span class="line"><span class="comment">// b</span></span><br><span class="line"><span class="comment">// a</span></span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">calc</span><span class="params">(index <span class="keyword">string</span>, a, b <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	ret := a + b</span><br><span class="line">	fmt.Println(index, a, b, ret)</span><br><span class="line">	<span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	x := <span class="number">1</span></span><br><span class="line">	y := <span class="number">2</span></span><br><span class="line">	<span class="keyword">defer</span> calc(<span class="string">"A"</span>, x, calc(<span class="string">"B"</span>, x, y))</span><br><span class="line">	x = <span class="number">3</span></span><br><span class="line">	<span class="keyword">defer</span> calc(<span class="string">"C"</span>, x, calc(<span class="string">"D"</span>, x, y))</span><br><span class="line">	y = <span class="number">4</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// B 1 2 3</span></span><br><span class="line"><span class="comment">// D 3 2 5</span></span><br><span class="line"><span class="comment">// C 3 5 8</span></span><br><span class="line"><span class="comment">// A 1 3 4</span></span><br></pre></td></tr></table></figure>

<h1 id="interface"><a href="#interface" class="headerlink" title="interface"></a><code>interface</code></h1><h2 id="åŸºæœ¬"><a href="#åŸºæœ¬" class="headerlink" title="åŸºæœ¬"></a>åŸºæœ¬</h2><ul>
<li>ä¸€ç§<strong>æŠ½è±¡</strong>ç±»å‹</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Sayer <span class="keyword">interface</span> &#123;</span><br><span class="line">	say()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Cat <span class="keyword">struct</span> &#123;</span><br><span class="line">	Sayer</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Dog <span class="keyword">struct</span> &#123;</span><br><span class="line">	Sayer</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(cat *Cat)</span> <span class="title">say</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"miao miao miao~"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(dog *Dog)</span> <span class="title">say</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"wang wang wang~"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> dog Dog</span><br><span class="line">	dog.say()</span><br><span class="line">	<span class="keyword">var</span> cat Cat</span><br><span class="line">	cat.say()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ç©ºæ¥å£çš„åº”ç”¨"><a href="#ç©ºæ¥å£çš„åº”ç”¨" class="headerlink" title="ç©ºæ¥å£çš„åº”ç”¨"></a>ç©ºæ¥å£çš„åº”ç”¨</h2><ul>
<li>ç©ºæ¥å£ä½œä¸ºå‡½æ•°çš„å‚æ•°</li>
<li>ç©ºæ¥å£ä½œä¸º<code>map</code>çš„å€¼</li>
<li>ç±»å‹æ–­è¨€<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> x <span class="keyword">interface</span>&#123;&#125;</span><br><span class="line">	x = <span class="string">"hello world"</span></span><br><span class="line">	v, ok := x.(<span class="keyword">string</span>)</span><br><span class="line">	<span class="keyword">if</span> ok &#123;</span><br><span class="line">		fmt.Println(v)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">"ç±»å‹æ–­è¨€å¤±è´¥"</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h1 id="å•å…ƒæµ‹è¯•"><a href="#å•å…ƒæµ‹è¯•" class="headerlink" title="å•å…ƒæµ‹è¯•"></a>å•å…ƒæµ‹è¯•</h1><p>Goè¯­è¨€ä¸­çš„æµ‹è¯•ä¾èµ–<code>go test</code>å‘½ä»¤ã€‚ç¼–å†™æµ‹è¯•ä»£ç å’Œç¼–å†™æ™®é€šçš„<code>Go</code>ä»£ç è¿‡ç¨‹æ˜¯ç±»ä¼¼çš„ã€‚</p>
<p><code>go test</code>å‘½ä»¤æ˜¯ä¸€ä¸ªæŒ‰ç…§ä¸€å®šçº¦å®šå’Œç»„ç»‡çš„æµ‹è¯•ä»£ç çš„é©±åŠ¨ç¨‹åºã€‚åœ¨åŒ…ç›®å½•å†…ï¼Œæ‰€æœ‰ä»¥<code>_test.go</code>ä¸ºåç¼€åçš„æºä»£ç æ–‡ä»¶éƒ½æ˜¯<code>go test</code>æµ‹è¯•çš„ä¸€éƒ¨åˆ†ï¼Œä¸ä¼šè¢«<code>go build</code>ç¼–è¯‘åˆ°æœ€ç»ˆçš„å¯æ‰§è¡Œæ–‡ä»¶ä¸­ã€‚</p>
<p>åœ¨<code>*_test.go</code>æ–‡ä»¶ä¸­æœ‰ä¸‰ç§ç±»å‹çš„å‡½æ•°ï¼Œå•å…ƒæµ‹è¯•å‡½æ•°ã€åŸºå‡†æµ‹è¯•å‡½æ•°å’Œç¤ºä¾‹å‡½æ•°ã€‚</p>
<table>
<thead>
<tr>
<th>ç±»å‹</th>
<th align="left">æ ¼å¼</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td>æµ‹è¯•å‡½æ•°</td>
<td align="left">å‡½æ•°åå‰ç¼€ä¸º<code>Test</code></td>
<td>æµ‹è¯•ç¨‹åºçš„ä¸€äº›é€»è¾‘è¡Œä¸ºæ˜¯å¦æ­£ç¡®</td>
</tr>
<tr>
<td>åŸºå‡†å‡½æ•°</td>
<td align="left">å‡½æ•°åå‰ç¼€ä¸º<code>Benchmark</code></td>
<td>æµ‹è¯•å‡½æ•°çš„æ€§èƒ½</td>
</tr>
<tr>
<td>ç¤ºä¾‹å‡½æ•°</td>
<td align="left">å‡½æ•°åå‰ç¼€ä¸º<code>Example</code></td>
<td>ä¸ºæ–‡æ¡£æä¾›ç¤ºä¾‹æ–‡æ¡£</td>
</tr>
</tbody></table>
<p>æµ‹è¯•å‡½æ•°å®ä¾‹</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestName</span><span class="params">(t *testing.T)</span></span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

    
  </div>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="ä¸‹ä¸€é¡µ"></i></a>
  </nav>



          </div>
          

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image"
      src="/imgs/avatar.png"
      alt="Mr.RS">
  <p class="site-author-name" itemprop="name">Mr.RS</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">34</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-categories">
        
          
            <a href="/categories/">
          
        
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">åˆ†ç±»</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
          
            <a href="/tags/">
          
        
        <span class="site-state-item-count">30</span>
        <span class="site-state-item-name">æ ‡ç­¾</span>
        </a>
      </div>
    
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Mr.RS</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> å¼ºåŠ›é©±åŠ¨ v3.9.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">
      
    ä¸»é¢˜ â€“ <a href="https://pisces.theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.4.1
  </div>

        












        
      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js?v=3.1.0"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
<script src="/js/utils.js?v=7.4.1"></script><script src="/js/motion.js?v=7.4.1"></script>
<script src="/js/schemes/pisces.js?v=7.4.1"></script>
<script src="/js/next-boot.js?v=7.4.1"></script>



  





















  

  

  

</body>
</html>
