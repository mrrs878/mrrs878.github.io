<!DOCTYPE html>





<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.9.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/avatar.png?v=7.4.1">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/avatar.png?v=7.4.1">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/avatar.png?v=7.4.1">
  <link rel="mask-icon" href="/images/avatar.svg?v=7.4.1" color="#222">

<link rel="stylesheet" href="/css/main.css?v=7.4.1">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.4.1',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: 'å¤åˆ¶',
      copy_success: 'å¤åˆ¶æˆåŠŸ',
      copy_failure: 'å¤åˆ¶å¤±è´¥'
    },
    sidebarPadding: 40
  };
</script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Mr.RS">
<meta property="og:url" content="https://mrrs878.github.io/index.html">
<meta property="og:site_name" content="Mr.RS">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Mr.RS">
  <link rel="canonical" href="https://mrrs878.github.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false,
    isPage: false,
    isArchive: false
  };
</script>

  <title>Mr.RS</title>
  








  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Mr.RS</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">Read The Fucking Source Code!</p>
      
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
        
        
        <li class="menu-item menu-item-home">
      
    

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>é¦–é¡µ</a>

  </li>
      
    
      
      
        
        
        <li class="menu-item menu-item-about">
      
    

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>å…³äº</a>

  </li>
      
    
      
      
        
        
        <li class="menu-item menu-item-tags">
      
    

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>æ ‡ç­¾</a>

  </li>
      
    
      
      
        
        
        <li class="menu-item menu-item-categories">
      
    

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>åˆ†ç±»</a>

  </li>
      
    
      
      
        
        
        <li class="menu-item menu-item-archives">
      
    

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>å½’æ¡£</a>

  </li>
      
    
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
            

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://mrrs878.github.io/2020/02/11/JavaScriptç›¸å…³-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr.RS">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/imgs/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mr.RS">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            
            <a href="/2020/02/11/JavaScriptç›¸å…³-1/" class="post-title-link" itemprop="url">JavaScriptç›¸å…³-1</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-02-11 23:33:22 / ä¿®æ”¹æ—¶é—´ï¼š23:37:41" itemprop="dateCreated datePublished" datetime="2020-02-11T23:33:22+08:00">2020-02-11</time>
            </span>
          
            

            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaScript/" itemprop="url" rel="index">
                    <span itemprop="name">JavaScript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="document-write"><a href="#document-write" class="headerlink" title="document.write"></a>document.write</h2><p><code>document.write()</code> æ–¹æ³•å°†ä¸€ä¸ªæ–‡æœ¬å­—ç¬¦ä¸²å†™å…¥ä¸€ä¸ªç”± <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document/open" target="_blank" rel="noopener"><code>document.open()</code></a> æ‰“å¼€çš„æ–‡æ¡£æµï¼ˆdocument streamï¼‰ã€‚ï¼ˆ<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document/write" target="_blank" rel="noopener">MDN</a>ï¼‰</p>
<p>ä½œç”¨ï¼š</p>
<p>åŠ è½½åªæœ‰å¯ç”¨JavaScriptåçš„æ ·å¼æ–‡ä»¶</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line">    document.open()</span><br><span class="line"><span class="xml">    docuemnt.write('<span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"style_neads_js.css"</span> /&gt;</span>')</span></span><br><span class="line">    document.close()</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å¼Šç«¯ï¼š</p>
<ul>
<li>åœ¨éloadingé˜¶æ®µä½¿ç”¨<code>docuemnt.write</code>ä¼šæ¸…é™¤å·²åŠ è½½çš„é¡µé¢</li>
<li><code>docuemnt.write</code>ä¸èƒ½å¤Ÿåœ¨XHTMLä¸­ä½¿ç”¨</li>
<li>åµŒå…¥scriptä¸­çš„<code>docuemnt.write</code>ä¸èƒ½ç»™ä»»æ„èŠ‚ç‚¹æ·»åŠ å­èŠ‚ç‚¹ï¼Œå› ä¸ºå®ƒæ˜¯éšç€DOMçš„æ„å»ºæ‰§è¡Œçš„</li>
<li>åˆ©ç”¨<code>docuemnt.write</code>å†™å…¥HTMLå­—ç¬¦æµå¹¶ä¸æ˜¯ä¸€ä¸ªå¥½æ–¹æ³•ï¼Œå®ƒæœ‰è¿DOMæ“ä½œçš„æ¦‚å¿µ</li>
<li>åˆ©ç”¨<code>docuemnt.write</code>æ·»åŠ scriptåŠ è½½å¤–éƒ¨è„šæœ¬æ—¶ï¼Œæµè§ˆå™¨çš„HTMLè§£æä¼šè¢«scriptçš„åŠ è½½æ‰€é˜»å¡</li>
</ul>
<h2 id="åŠŸèƒ½æ£€æµ‹ï¼ˆfeature-detectionï¼‰ã€åŠŸèƒ½æ¨æ–­ï¼ˆfeature-inferenceï¼‰ã€å’Œä½¿ç”¨UAå­—ç¬¦ä¸²ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«"><a href="#åŠŸèƒ½æ£€æµ‹ï¼ˆfeature-detectionï¼‰ã€åŠŸèƒ½æ¨æ–­ï¼ˆfeature-inferenceï¼‰ã€å’Œä½¿ç”¨UAå­—ç¬¦ä¸²ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«" class="headerlink" title="åŠŸèƒ½æ£€æµ‹ï¼ˆfeature detectionï¼‰ã€åŠŸèƒ½æ¨æ–­ï¼ˆfeature inferenceï¼‰ã€å’Œä½¿ç”¨UAå­—ç¬¦ä¸²ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«"></a>åŠŸèƒ½æ£€æµ‹ï¼ˆfeature detectionï¼‰ã€åŠŸèƒ½æ¨æ–­ï¼ˆfeature inferenceï¼‰ã€å’Œä½¿ç”¨UAå­—ç¬¦ä¸²ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«</h2><p>åŠŸèƒ½æ£€æµ‹ï¼ˆfeature detectionï¼‰ ğŸ‘</p>
<p>åŠŸèƒ½æ£€æµ‹åŒ…æ‹¬ç¡®å®šæµè§ˆå™¨æ˜¯å¦æ”¯æŒæŸæ®µä»£ç ï¼Œä»¥åŠæ˜¯å¦èƒ½è¿è¡Œä¸åŒçš„ä»£ç ï¼ˆå–å†³äºå®ƒæ˜¯å¦æ‰§è¡Œï¼‰ï¼Œä¸€è¾¹æµè§ˆå™¨èƒ½å§‹ç»ˆæ­£ç¡®è¿è¡Œä»£ç åŠŸèƒ½ï¼Œè€Œä¸ä¼šåœ¨æŸäº›æµè§ˆå™¨ä¸­å‡ºç°å´©æºƒå’Œé”™è¯¯</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="string">"geolocation"</span> <span class="keyword">in</span> navigator) &#123;</span><br><span class="line">    <span class="comment">// å¯ä»¥ä½¿ç”¨ navigator.geolocation</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// å¤„ç† navigator.geolocation åŠŸèƒ½ç¼ºå¤±</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åŠŸèƒ½æ¨æ–­ï¼ˆfeature inferenceï¼‰ğŸ‘</p>
<p>åŠŸèƒ½æ¨æ–­ä¸åŠŸèƒ½æ£€æµ‹ä¸€æ ·ï¼Œä¼šå¯¹åŠŸèƒ½å¯ç”¨æ€§è¿›è¡Œæ£€æŸ¥ï¼Œä½†æ˜¯åœ¨åˆ¤æ–­é€šè¿‡åè¿˜ä¼šä½¿ç”¨å…¶ä»–åŠŸèƒ½ï¼Œå› ä¸ºå®ƒå‡è®¾å…¶ä»–åŠŸèƒ½ä¹Ÿå¯ç”¨</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="built_in">document</span>.getElementsByTagName) &#123;</span><br><span class="line">  element = <span class="built_in">document</span>.getElementById(id);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>UA ğŸ‘</p>
<p>è¿™æ˜¯ä¸€ä¸ªæµè§ˆå™¨æŠ¥å‘Šçš„å­—ç¬¦ä¸²ï¼Œå®ƒå…è®¸ç½‘ç»œåè®®å¯¹ç­‰æ–¹ï¼ˆnetwork protocol peersï¼‰è¯†åˆ«è¯·æ±‚ç”¨æˆ·ä»£ç†çš„åº”ç”¨ç±»å‹ã€æ“ä½œç³»ç»Ÿã€åº”ç”¨ä¾›åº”å•†å’Œåº”ç”¨ç‰ˆæœ¬ã€‚å®ƒå¯ä»¥é€šè¿‡<code>navigator.userAgent</code>è®¿é—®ã€‚ç„¶è€Œï¼Œè¿™ä¸ªå­—ç¬¦ä¸²å¾ˆå¯èƒ½å­˜åœ¨æ¬ºéª—æ€§ï¼Œä¾‹å¦‚ï¼Œchromeä¼šåŒæ—¶ä½œä¸ºchromeå’Œsafariè¿›è¡ŒæŠ¥å‘Šï¼Œå› æ­¤ï¼Œè¦æ£€æµ‹safariï¼Œé™¤äº†æ£€æŸ¥safariå­—ç¬¦ä¸²ï¼Œè¿˜è¦æ£€æŸ¥æ˜¯å¦åŒæ—¶å­˜åœ¨chromeå­—ç¬¦ä¸²ã€‚</p>
<h2 id="Ajax"><a href="#Ajax" class="headerlink" title="Ajax"></a>Ajax</h2><p><strong>WHAT</strong></p>
<p>Ajaxï¼ˆasynchronous JavaScript and XMLï¼‰æ˜¯ä½¿ç”¨å®¢æˆ·ç«¯ä¸Šçš„è®¸å¤šwebæŠ€æœ¯ï¼Œåˆ›å»ºå¼‚æ­¥webåº”ç”¨çš„ä¸€ç§<strong>æŠ€æœ¯ç»“åˆä½“</strong>ã€‚å€ŸåŠ©Ajaxï¼Œwebåº”ç”¨å¯ä»¥<strong>å¼‚æ­¥</strong>ï¼ˆåœ¨åå°ï¼‰å‘æœåŠ¡å™¨å‘é€æ•°æ®å¯ä»æœåŠ¡å™¨æ£€ç´¢æ•°æ®è€Œä¸ä¼šå¹²æ‰°ç°æœ‰é¡µé¢çš„æ˜¾ç¤ºå’Œè¡Œä¸ºã€‚é€šè¿‡å°†<strong>æ•°æ®äº¤äº’å±‚ä¸è¡¨ç¤ºå±‚åˆ†ç¦»</strong>ï¼ŒAjaxå…è®¸ç½‘é¡µå’Œæ‰©å±•webåº”ç”¨ç¨‹åºåŠ¨æ€æ›´æ”¹å†…å®¹è€Œ<strong>ä¸éœ€é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢</strong>ï¼Œå®é™…ä¸Šï¼Œç°åœ¨é€šå¸¸å°†XMLæ›¿æ¢ä¸ºJSONï¼Œå› ä¸ºJavaScriptå¯¹JSONæœ‰åŸç”Ÿæ”¯æŒä¼˜åŠ¿</p>
<p><strong>WHY</strong></p>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>äº¤äº’æ€§æ›´å¥½ï¼Œæ¥è‡ªæœåŠ¡å™¨çš„æ–°å†…å®¹å¯ä»¥åŠ¨æ€æ›´æ”¹ï¼Œæ— éœ€é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢</li>
<li>å‡å°‘ä¸æœåŠ¡å™¨çš„è¿æ¥ï¼Œå› ä¸ºè„šæœ¬å’Œæ ·å¼åªéœ€è¦è¢«è¯·æ±‚ä¸€æ¬¡</li>
<li>çŠ¶æ€å¯ä»¥ç»´æŠ¤åœ¨ä¸€ä¸ªé¡µé¢ä¸Šï¼ŒJavaScriptå˜é‡å’ŒDOMçŠ¶æ€å°†çš„åˆ°ä¿æŒï¼Œå› ä¸ºä¸»å®¹å™¨é¡µé¢æœªè¢«é‡æ–°åŠ è½½</li>
<li>åŸºæœ¬ä¸ŠåŒ…å«å¤§éƒ¨åˆ†SPAçš„ä¼˜ç‚¹</li>
</ul>
<p>ç¼ºç‚¹</p>
<ul>
<li>åŠ¨æ€ç½‘é¡µå¾ˆéš¾æ”¶è—</li>
<li>å¦‚æœJavaScriptåœ¨æµè§ˆå™¨ä¸­è¢«ç¦ç”¨åˆ™ä¸èµ·ä½œç”¨</li>
<li>æœ‰äº›ç½‘ç»œçˆ¬è™«ä¸æ‰§è¡ŒJavaScriptï¼Œä¹Ÿä¸ä¼šçœ‹åˆ°JavaScriptåŠ è½½çš„å†…å®¹</li>
</ul>
<p><strong>HOW</strong></p>
<ul>
<li>ä½¿ç”¨<code>CSS</code>å’Œ<code>XHTML</code>æ¥è¡¨ç¤º</li>
<li>ä½¿ç”¨<code>DOM</code>æ¨¡å‹æ¥äº¤äº’å’ŒåŠ¨æ€æ˜¾ç¤º</li>
<li>ä½¿ç”¨<code>XMLHttpRequest</code>æ¥å’ŒæœåŠ¡å™¨è¿›è¡Œå¼‚æ­¥é€šä¿¡</li>
<li>ä½¿ç”¨<code>JavaScript</code>æ¥ç»‘å®šå’Œè°ƒç”¨</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ajax = &#123;&#125;;</span><br><span class="line">ajax.httpRequest = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">window</span>.XMLHttpRequest) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> versions = [</span><br><span class="line">        <span class="string">"MSXML2.XmlHttp.6.0"</span>,</span><br><span class="line">        <span class="string">"MSXML2.XmlHttp.5.0"</span>,</span><br><span class="line">        <span class="string">"MSXML2.XmlHttp.4.0"</span>,</span><br><span class="line">        <span class="string">"MSXML2.XmlHttp.3.0"</span>,</span><br><span class="line">        <span class="string">"MSXML2.XmlHttp.2.0"</span>,</span><br><span class="line">        <span class="string">"Microsoft.XmlHttp"</span></span><br><span class="line">    ];</span><br><span class="line">    <span class="keyword">let</span> xhr;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; versions.length; i++) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            xhr = <span class="keyword">new</span> ActiveXObject(versions[i]);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> xhr;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">ajax.send = <span class="function"><span class="keyword">function</span> (<span class="params">url, callback, method, data, async</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">async</span> === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        <span class="keyword">async</span> = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> httpRequest = ajax.httpRequest();</span><br><span class="line">    httpRequest.open(method, url, <span class="keyword">async</span>);</span><br><span class="line">    httpRequest.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (httpRequest.readyState == <span class="number">4</span>) &#123;</span><br><span class="line">            callback(httpRequest.responseText)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">if</span> (method == <span class="string">'POST'</span>) &#123;</span><br><span class="line">        httpRequest.setRequestHeader(<span class="string">'Content-type'</span>, <span class="string">'application/x-www-form-urlencoded'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    httpRequest.send(data);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">ajax.get = <span class="function"><span class="keyword">function</span> (<span class="params">url, data, callback, async</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> query = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> data) &#123;</span><br><span class="line">        query.push(<span class="built_in">encodeURIComponent</span>(key) + <span class="string">'='</span> + <span class="built_in">encodeURIComponent</span>(data[key]));</span><br><span class="line">    &#125;</span><br><span class="line">    ajax.send(url + (query.length ? <span class="string">'?'</span> + query.join(<span class="string">'&amp;'</span>) : <span class="string">''</span>), callback, <span class="string">'GET'</span>, <span class="literal">null</span>, <span class="keyword">async</span>)</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">ajax.post = <span class="function"><span class="keyword">function</span> (<span class="params">url, data, callback, async</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> query = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> data) &#123;</span><br><span class="line">        query.push(<span class="built_in">encodeURIComponent</span>(key) + <span class="string">'='</span> + <span class="built_in">encodeURIComponent</span>(data[key]));</span><br><span class="line">    &#125;</span><br><span class="line">    ajax.send(url, callback, <span class="string">'POST'</span>, query.join(<span class="string">'&amp;'</span>), <span class="keyword">async</span>)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="JSONP"><a href="#JSONP" class="headerlink" title="JSONP"></a>JSONP</h2><p><strong>WHAT</strong></p>
<p>å¸¦å¡«å……çš„jsonï¼ˆp for paddingï¼‰ï¼Œæ˜¯ä¸€ç§é€šå¸¸ç”¨äºç»•è¿‡æµè§ˆå™¨ä¸­çš„è·¨åŸŸé€‰å€çš„æ–¹æ³•ï¼Œå› ä¸ºAjaxä¸å…è®¸è·¨åŸŸè¯·æ±‚ã€‚</p>
<p>åŸç†ï¼šåˆ©ç”¨ <code>&lt;script&gt;</code> æ ‡ç­¾æ²¡æœ‰è·¨åŸŸé™åˆ¶çš„æ¼æ´ã€‚é€šè¿‡ <code>&lt;script&gt;</code> æ ‡ç­¾æŒ‡å‘ä¸€ä¸ªéœ€è¦è®¿é—®çš„åœ°å€å¹¶æä¾›ä¸€ä¸ªå›è°ƒå‡½æ•°æ¥æ¥æ”¶æ•°æ®ã€‚</p>
<p><strong>WHY</strong></p>
<p>è§£å†³è·¨åŸŸï¼ˆåªé€‚ç”¨äºGETè¯·æ±‚ï¼‰</p>
<p><strong>HOW</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jsonp.js</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">jsonp</span>(<span class="params">&#123; url, params, cb &#125;</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> script = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>)</span><br><span class="line">        <span class="built_in">window</span>[cb] = <span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">            resolve(data)</span><br><span class="line">            <span class="built_in">document</span>.body.removeChild(script)</span><br><span class="line">        &#125;</span><br><span class="line">        params = &#123; ...params, cb &#125;</span><br><span class="line">        <span class="keyword">let</span> tmp = []</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> key <span class="keyword">in</span> params)</span><br><span class="line">            tmp.push(<span class="string">`<span class="subst">$&#123; key &#125;</span>=<span class="subst">$&#123; params[key] &#125;</span>`</span>)</span><br><span class="line">        script.src = <span class="string">`<span class="subst">$&#123; url &#125;</span>?<span class="subst">$&#123; tmp.join(<span class="string">"&amp;"</span>) &#125;</span>`</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">jsonp(&#123; </span><br><span class="line">    url: <span class="string">"http://localhost:3000/say"</span>,</span><br><span class="line">    params: &#123; <span class="attr">wd</span>: <span class="string">"hello jsonp"</span> &#125;,</span><br><span class="line">    cb: <span class="string">"show"</span></span><br><span class="line">&#125;).then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// server.js</span></span><br><span class="line"><span class="keyword">let</span> express = <span class="built_in">require</span>(<span class="string">"express"</span>)</span><br><span class="line"><span class="keyword">let</span> app = express()</span><br><span class="line">app.get(<span class="string">"/say"</span>, (res, res) =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> &#123; wd, cb &#125; = req.query</span><br><span class="line">    res.end(<span class="string">`<span class="subst">$&#123;cb&#125;</span>('i am fine, and you?')`</span>)</span><br><span class="line">&#125;)</span><br><span class="line">app.listen(<span class="number">3000</span>)</span><br></pre></td></tr></table></figure>

<h2 id="å˜é‡æå‡"><a href="#å˜é‡æå‡" class="headerlink" title="å˜é‡æå‡"></a>å˜é‡æå‡</h2><p>å˜é‡æå‡ï¼ˆhoistingï¼‰ç”¨äºè§£é‡Šä»£ç ä¸­å˜é‡å£°æ˜è¡Œä¸ºçš„æœ¯è¯­ã€‚ä½¿ç”¨<code>var</code>å…³é”®å­—å£°æ˜æˆ–åˆå§‹åŒ–çš„å˜é‡ä¼šå°†å£°æ˜è¯­å¥â€œæå‡â€åˆ°å½“å‰ä½œç”¨åŸŸçš„é¡¶éƒ¨ã€‚ä½†æ˜¯åªæœ‰å£°æ˜æ‰ä¼šè§¦å‘æå‡ï¼Œèµ‹å€¼è¯­å¥å°†ä¿æŒåŸæ ·ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(foo) <span class="comment">// undefined</span></span><br><span class="line"><span class="keyword">var</span> foo = <span class="number">1</span></span><br><span class="line"><span class="built_in">console</span>.log(foo) <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(foo) <span class="comment">// ReferenceError: bar is not defined</span></span><br><span class="line"><span class="keyword">let</span> foo = <span class="number">1</span></span><br><span class="line"><span class="built_in">console</span>.log(foo) <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>

<p>å‡½æ•°å£°æ˜ä¼šä½¿å‡½æ•°ä½“æå‡ï¼Œä½†å‡½æ•°è¡¨è¾¾å¼ï¼ˆä»¥å£°æ˜å˜é‡çš„å½¢å¼ä¹¦å†™ï¼‰åªæœ‰å˜é‡å£°æ˜ä¼šæå‡</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‡½æ•°å£°æ˜</span></span><br><span class="line"><span class="built_in">console</span>.log(foo)</span><br><span class="line">foo(); <span class="comment">// 'foo'</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'foo'</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(foo); <span class="comment">// [Function: foo]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡½æ•°è¡¨è¾¾å¼</span></span><br><span class="line"><span class="built_in">console</span>.log(bar) <span class="comment">// undefined</span></span><br><span class="line">bar(); <span class="comment">// Uncaught TypeError: bar is not a function</span></span><br><span class="line"><span class="keyword">var</span> bar = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'bar'</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(bar) <span class="comment">// [Function: bar]</span></span><br></pre></td></tr></table></figure>

<h2 id="äº‹ä»¶å†’æ³¡"><a href="#äº‹ä»¶å†’æ³¡" class="headerlink" title="äº‹ä»¶å†’æ³¡"></a>äº‹ä»¶å†’æ³¡</h2><p>å½“ä¸€ä¸ªäº‹ä»¶åœ¨DOMå…ƒç´ ä¸Šè§¦å‘æ—¶ï¼Œå¦‚æœæœ‰æ—¶é—´ç›‘å¬å™¨ï¼Œå®ƒå°è¯•å¤„ç†è¯¥äº‹ä»¶ï¼Œç„¶åäº‹ä»¶å†’æ³¡åˆ°å…¶çˆ¶çº§å…ƒç´ ï¼Œå¹¶å‘ç”ŸåŒæ ·çš„äº‹æƒ…ï¼Œæœ€åç›´è‡³åˆ°è¾¾ç¥–å…ˆå…ƒç´ ã€‚æ—¶é—´å†’æ³¡æœºåˆ¶æ˜¯å®ç°äº‹ä»¶å§”æ‰˜ï¼ˆevent delegationï¼‰çš„åŸç†</p>
<h2 id="attributeå’Œproperty"><a href="#attributeå’Œproperty" class="headerlink" title="attributeå’Œproperty"></a>attributeå’Œproperty</h2><p>attributeæ˜¯åœ¨HTMLä¸­å®šä¹‰çš„ï¼Œè€Œpropertyå®åœ¨DOMä¸Šå®šä¹‰çš„ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"input1"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">value</span>=<span class="string">"hello"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">	<span class="keyword">const</span> input = <span class="built_in">document</span>.getElementById(<span class="string">"input1"</span>)</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(input.getAttribute(<span class="string">"value"</span>)) <span class="comment">// hello</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(input.value) <span class="comment">// hello</span></span></span><br><span class="line">    </span><br><span class="line"><span class="javascript">    <span class="comment">// å½“åœ¨æ–‡æœ¬æ¡†ä¸­è¾“å…¥ â€˜worldâ€™ å</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(input.getAttribute(<span class="string">"value"</span>)) <span class="comment">// hello</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(input.value) <span class="comment">// world</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="documentçš„loadäº‹ä»¶å’ŒDOMContentLoadedäº‹ä»¶ä¹‹é—´çš„åŒºåˆ«"><a href="#documentçš„loadäº‹ä»¶å’ŒDOMContentLoadedäº‹ä»¶ä¹‹é—´çš„åŒºåˆ«" class="headerlink" title="documentçš„loadäº‹ä»¶å’ŒDOMContentLoadedäº‹ä»¶ä¹‹é—´çš„åŒºåˆ«"></a>documentçš„loadäº‹ä»¶å’ŒDOMContentLoadedäº‹ä»¶ä¹‹é—´çš„åŒºåˆ«</h2><p>DOMContentLoadedï¼šğŸ‘</p>
<p>å½“åˆå§‹çš„HTMLæ–‡æ¡£æœ¬å®Œå…¨åŠ è½½å’Œè§£æå®Œæˆä¹‹åï¼ŒDOMContentLoadedäº‹ä»¶è¢«è§¦å‘è€Œæ— éœ€ç­‰å¾…æ ·å¼è¡¨ã€å›¾åƒå’Œå­æ¡†æ¶çš„å®ŒæˆåŠ è½½</p>
<p>loadï¼š</p>
<p>windowçš„loadäº‹ä»¶ä»…åœ¨DOMå’Œæ‰€æœ‰ç›¸å…³èµ„æºå…¨éƒ¨å®ŒæˆåŠ è½½åæ‰ä¼šè§¦å‘</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">"DOMContentLoaded"</span>, event =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"DOMContentLoaded"</span>);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">"load"</span>, () =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"window loaded"</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// DOMContentLoaded</span></span><br><span class="line"><span class="comment">// window loaded</span></span><br></pre></td></tr></table></figure>

<h2 id="åŒæºç­–ç•¥"><a href="#åŒæºç­–ç•¥" class="headerlink" title="åŒæºç­–ç•¥"></a>åŒæºç­–ç•¥</h2><p>åŒæºç­–ç•¥æ˜¯ç”±Netscapeæå‡ºçš„ä¸€ä¸ªè‘—åçš„å®‰å…¨ç­–ç•¥ï¼Œæµè§ˆå™¨å‡ºäºå®‰å…¨æ–¹é¢çš„è€ƒè™‘ï¼Œåªå…è®¸æœ¬åŸŸåä¸‹çš„æ¥å£äº¤äº’ï¼Œä¸åŒæºçš„å®¢æˆ·ç«¯è„šæœ¬ï¼Œåœ¨æ²¡æœ‰æ˜ç¡®æˆæƒçš„æƒ…å†µä¸‹ï¼Œä¸èƒ½è¯»å–å¯¹æ–¹çš„èµ„æºã€‚</p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/Security/Same-origin_policy" target="_blank" rel="noopener">åŒæºçš„å®šä¹‰:</a></p>
<p>å¦‚æœä¸¤ä¸ªé¡µé¢çš„åè®®ï¼Œç«¯å£ï¼ˆå¦‚æœæœ‰æŒ‡å®šï¼‰å’Œä¸»æœºéƒ½ç›¸åŒï¼Œåˆ™ä¸¤ä¸ªé¡µé¢å…·æœ‰ç›¸åŒçš„<strong>æº</strong>ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠå®ƒç§°ä¸ºâ€œåè®®/ä¸»æœº/ç«¯å£ tupleâ€ï¼Œæˆ–ç®€å•åœ°å«åšâ€œtupleâ€. (â€œtupleâ€ ï¼Œâ€œå…ƒâ€ï¼Œæ˜¯æŒ‡ä¸€äº›äº‹ç‰©ç»„åˆåœ¨ä¸€èµ·å½¢æˆä¸€ä¸ªæ•´ä½“ï¼Œæ¯”å¦‚ï¼ˆ1ï¼Œ2ï¼‰å«äºŒå…ƒï¼Œï¼ˆ1ï¼Œ2ï¼Œ3ï¼‰å«ä¸‰å…ƒ)</p>
<p>ä¸‹è¡¨ç»™å‡ºäº†ç›¸å¯¹<code>http://store.company.com/dir/page.html</code>åŒæºæ£€æµ‹çš„ç¤ºä¾‹:</p>
<table>
<thead>
<tr>
<th>URL</th>
<th>ç»“æœ</th>
<th>åŸå› </th>
</tr>
</thead>
<tbody><tr>
<td><code>http://store.company.com/dir2/other.html</code></td>
<td>æˆåŠŸ</td>
<td>åªæœ‰è·¯å¾„ä¸åŒ</td>
</tr>
<tr>
<td><code>http://store.company.com/dir/inner/another.html</code></td>
<td>æˆåŠŸ</td>
<td>åªæœ‰è·¯å¾„ä¸åŒ</td>
</tr>
<tr>
<td><code>https://store.company.com/secure.html</code></td>
<td>å¤±è´¥</td>
<td>åè®®ä¸åŒ</td>
</tr>
<tr>
<td><code>http://store.company.com:81/dir/etc.html</code></td>
<td>å¤±è´¥</td>
<td>ç«¯å£ä¸åŒ</td>
</tr>
<tr>
<td><code>http://news.company.com/dir/other.html</code></td>
<td>å¤±è´¥</td>
<td>åŸŸåä¸åŒ</td>
</tr>
</tbody></table>
<h2 id="JavaScriptä¸¥æ ¼æ¨¡å¼"><a href="#JavaScriptä¸¥æ ¼æ¨¡å¼" class="headerlink" title="JavaScriptä¸¥æ ¼æ¨¡å¼"></a>JavaScriptä¸¥æ ¼æ¨¡å¼</h2><p><strong>WHAT</strong></p>
<p>ES5æœ€æ—©å¼•å…¥äº†â€œä¸¥æ ¼æ¨¡å¼â€ï¼ˆstrict modeï¼‰çš„æ¦‚å¿µã€‚å¯é€‰æ‹©çš„ä¸€ä¸ªé™åˆ¶JavaScriptçš„å˜ä½“çš„ä¸€ç§æ–¹å¼</p>
<p><strong>WHY</strong></p>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>æ— æ³•å†æ„å¤–åˆ›å»ºå…¨å±€å˜é‡</li>
<li>ä¼šå¼•èµ·é™é»˜å¤±è´¥ï¼ˆsliently failï¼Œ å³ï¼šä¸æŠ¥é”™ä¹Ÿæ²¡æœ‰ä»»ä½•æ•ˆæœï¼‰çš„æ“ä½œæŠ›å‡ºå¼‚å¸¸<ul>
<li>å¯¹å˜é‡è°ƒç”¨<code>delete</code>æ“ä½œç¬¦</li>
<li>ä¸ºåªè¯»å±æ€§èµ‹å€¼</li>
<li>å¯¹ä¸å¯é…ç½®ï¼ˆnonconfigurableï¼‰çš„å±æ€§ä½¿ç”¨<code>delete</code>æ“ä½œç¬¦</li>
</ul>
</li>
<li>è¯•å›¾åˆ é™¤ä¸å¯åˆ é™¤çš„å±æ€§æ—¶ä¼šæŠ›å‡ºå¼‚å¸¸</li>
<li>è¦æ±‚å‡½æ•°çš„å‚æ•°åå”¯ä¸€</li>
<li>æŸäº›ä¿ç•™å­—ï¼ˆ<code>interface</code>ã€<code>implements</code>ã€<code>package</code>ç­‰ï¼‰ä¸èƒ½ä½œä¸ºå˜é‡å</li>
<li>æŠ‘åˆ¶<code>this</code><ul>
<li>å…¨å±€ä½œç”¨åŸŸä¸‹ï¼Œ<code>this</code>çš„å€¼ä¸º<code>undefined</code></li>
<li><code>.call()</code>ã€<code>.apply()</code>ä¼ é€’é”™è¯¯çš„<code>this</code>ä¼šæŠ¥é”™ï¼ˆéä¸¥æ ¼æ¨¡å¼ä¸‹ä¼šè½¬æ¢ä¸ºå…¨éƒ¨å¯¹è±¡ï¼‰</li>
</ul>
</li>
<li>æ•è·äº†ä¸€äº›å¸¸è§çš„ç¼–ç é”™è¯¯ï¼Œå¹¶æŠ›å‡ºå¼‚å¸¸</li>
</ul>
<p>ç¼ºç‚¹ï¼š</p>
<ul>
<li>ç¡®å®è®¸å¤šå¼€å‘äººå‘˜å·²ç»ä¹ æƒ¯çš„åŠŸèƒ½</li>
<li>æ— æ³•è®¿é—®<code>function.caller</code>å’Œ<code>function.arguments</code></li>
<li>ä»¥ä¸åŒä¸¥æ ¼æ¨¡å¼ç¼–å†™çš„è„šæœ¬åˆå¹¶åå¯èƒ½ä¼šå¯¼è‡´é—®é¢˜</li>
</ul>
<p><strong>HOW</strong></p>
<p>åœ¨éœ€è¦å¯ç”¨ä¸¥æ ¼æ¨¡å¼çš„<strong>ä»£ç </strong>é¡¶éƒ¨æ·»åŠ ï¼š<code>&quot;use strict;&quot;</code></p>
<h2 id="SPA"><a href="#SPA" class="headerlink" title="SPA"></a>SPA</h2><p><strong>WHAT</strong></p>
<p>single page application å•é¡µé¢åº”ç”¨</p>
<p>ç°å¦‚ä»Šï¼Œwebç¨‹åºå‘˜å°†ä»–ä»¬æ„å»ºçš„äº§å“æˆä¸ºwebåº”ç”¨è€Œä¸æ˜¯ç½‘ç«™ã€‚è™½ç„¶è¿™ä¸¤ä¸ªæœ¯è¯­ä¹‹é—´æ²¡æœ‰ä¸¥æ ¼çš„åŒºåˆ«ï¼Œä½†ç½‘ç»œåº”ç”¨å¾€å¾€å…·æœ‰é«˜åº¦çš„äº¤äº’æ€§å’ŒåŠ¨æ€æ€§ï¼Œå…è®¸ç”¨æˆ·æ‰§è¡Œæ“ä½œå¹¶æ¥å—ä»–ä»¬çš„æ“ä½œå“åº”ã€‚åœ¨è¿‡å»ï¼Œæµè§ˆå™¨ä»æœåŠ¡å™¨æ¥æ”¶HTMLå¹¶æ¸²æŸ“ï¼Œå½“ç”¨æˆ·å¯¼èˆªåˆ°å…¶ä»–URLæ—¶ï¼Œéœ€è¦æ•´é¡µåˆ·æ–°ï¼ŒæœåŠ¡å™¨ä¼šä¸ºæ–°é¡µé¢å‘é€æ–°çš„HTMLï¼Œè¿™è¢«ç§°ä¸ºæœåŠ¡ç«¯æ¸²æŸ“</p>
<p>ç„¶è€Œï¼Œåœ¨ç°ä»£çš„SPAä¸­ï¼Œå®¢æˆ·ç«¯æ¸²æŸ“å–è€Œä»£ä¹‹ã€‚æµè§ˆå™¨ä»éƒ½æ­¦å™¨åŠ è½½<strong>åˆå§‹é¡µé¢</strong>ï¼Œæ•´ä¸ªåº”ç”¨ç¨‹åºæ‰€æ‰€éœ€çš„è„šæœ¬ï¼ˆåº“ã€æ¡†æ¶ã€åº”ç”¨ä»£ç ï¼‰å’Œæ ·å¼è¡¨ã€‚å½“ç”¨æˆ·å¯¼èˆªåˆ°å…¶ä»–é¡µé¢æ—¶ï¼Œ<strong>ä¸ä¼šè§¦å‘é¡µé¢åˆ·æ–°</strong>ï¼Œè¯¥é¡µé¢çš„URLé€šè¿‡<a href="https://developer.mozilla.org/en-US/docs/Web/API/History_API" target="_blank" rel="noopener">HTML5 History API</a>è¿›è¡Œæ›´æ–°ã€‚æµè§ˆå™¨é€šè¿‡Ajaxè¯·æ±‚å‘æœåŠ¡å™¨æ£€ç´¢æ‰€éœ€çš„æ•°æ®ï¼ˆé€šå¸¸é‡‡ç”¨jsonæ ¼å¼ï¼‰ï¼Œç„¶åSPA<strong>é€šè¿‡JavaScriptæ¥åŠ¨æ€æ›´æ–°é¡µé¢</strong>ï¼Œè¿™äº›JavaScriptåœ¨åˆå§‹é¡µé¢å·²ç»ä¸‹è½½ã€‚è¿™ç§æ¨¡å¼ç±»ä¼¼äºåŸç”Ÿç§»åŠ¨åº”ç”¨çš„å·¥ä½œæ–¹å¼ã€‚</p>
<p><img src="../imgs/spa.png" alt="SPA"></p>
<p><strong>WHY</strong></p>
<p>å¥½å¤„ï¼š</p>
<ul>
<li>ç”¨æˆ·æ„ŸçŸ¥å“åº”æ›´å¿«ï¼Œç”¨æˆ·åˆ‡æ¢é¡µé¢æ—¶ä¸ä¼šå†çœ‹åˆ°å› é¡µé¢åˆ·æ–°è€Œå¯¼è‡´çš„ç™½å±</li>
<li>å¯¹æœåŠ¡å™¨è¿›è¡Œçš„HTTPè¯·æ±‚å‡å°‘ï¼Œå› ä¸ºå¯¹äºæ²¡å’Œé¡µé¢çš„åŠ è½½ä¸å¿…å†æ¬¡ä¸‹è½½ç›¸åŒçš„èµ„æº</li>
<li>å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¹‹é—´çš„å…³æ³¨ç‚¹åˆ†ç¦»ï¼Œå¯ä»¥ä¸ºä¸åŒå¹³å°ï¼ˆæ‰‹æœºã€æ™ºèƒ½æ‰‹è¡¨ï¼‰å»ºç«‹æ–°çš„å®¢æˆ·ç«¯è€Œä¸éœ€ä¿®æ”¹æœåŠ¡å™¨ä»£ç ã€‚</li>
</ul>
<p>å¼Šç«¯ï¼š</p>
<ul>
<li>ç”±äºåŠ è½½äº†å¤šä¸ªé¡µé¢éœ€è¦çš„æ¡†æ¶ã€åº”ç”¨ä»£ç å’Œèµ„æºå¯¼è‡´åˆå§‹é¡µé¢åŠ è½½æ—¶é—´è¿‡é•¿</li>
<li>æœåŠ¡å™¨è¿˜éœ€é¢å¤–çš„å·¥ä½œå°†æ˜¯æ‰€æœ‰è·¯ç”±è¯·æ±‚é…ç½®åˆ°å•ä¸ªå…¥å£ç‚¹ï¼Œç„¶åç”±å®¢æˆ·ç«¯æ¥ç®¡è·¯ç”±</li>
<li>SPAä¾èµ–äºJavaScriptæ¥æ¸²æŸ“é¡µé¢ï¼Œå¯¹SEOä¸å‹å¥½</li>
</ul>
<p><strong>HOW</strong></p>
<ol>
<li>å‘æœåŠ¡å™¨è¯·æ±‚åˆå§‹é¡µé¢å¹¶æ¸²æŸ“ï¼ŒåŒæ—¶è¯·æ±‚æ•´ä¸ªåº”ç”¨æ‰€éœ€çš„è„šæœ¬ã€æ ·å¼</li>
<li>ç›‘å¬ç”¨æˆ·æ“ä½œï¼š<ul>
<li>é€šè¿‡<a href="https://developer.mozilla.org/en-US/docs/Web/API/History_API" target="_blank" rel="noopener">HTML5 History API</a>è¿›è¡Œé¡µé¢å¯¼èˆª</li>
<li>é€šè¿‡Ajaxå‘æœåŠ¡å™¨è¯·æ±‚æ•°æ®å¹¶ä½¿ç”¨JavaScriptåŠ¨æ€æ¸²æŸ“åˆ°é¡µé¢ä¸Š</li>
</ul>
</li>
</ol>

        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://mrrs878.github.io/2020/02/10/JavaScriptç›¸å…³-0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr.RS">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/imgs/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mr.RS">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            
            <a href="/2020/02/10/JavaScriptç›¸å…³-0/" class="post-title-link" itemprop="url">JavaScriptç›¸å…³-0</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-02-10 23:18:10 / ä¿®æ”¹æ—¶é—´ï¼š23:37:50" itemprop="dateCreated datePublished" datetime="2020-02-10T23:18:10+08:00">2020-02-10</time>
            </span>
          
            

            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaScript/" itemprop="url" rel="index">
                    <span itemprop="name">JavaScript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="äº‹ä»¶å§”æ‰˜-ï¼ˆevent-delegationï¼‰"><a href="#äº‹ä»¶å§”æ‰˜-ï¼ˆevent-delegationï¼‰" class="headerlink" title="äº‹ä»¶å§”æ‰˜ ï¼ˆevent delegationï¼‰"></a>äº‹ä»¶å§”æ‰˜ ï¼ˆevent delegationï¼‰</h2><p>äº‹ä»¶å§”æ‰˜æ˜¯å°†äº‹ä»¶ç›‘å¬å™¨æ·»åŠ åˆ°çˆ¶å…ƒç´ ï¼Œè€Œä¸æ˜¯æ¯ä¸ªå­å…ƒç´ å•ç‹¬è®¾ç½®äº‹ä»¶ç›‘å¬å™¨ï¼Œå½“è§¦å‘å­å…ƒç´ æ—¶ï¼Œäº‹ä»¶ä¼šå†’æ³¡åˆ°çˆ¶å…ƒç´ ï¼Œç›‘å¬å™¨å°±ä¼šè§¦å‘ï¼Œè¿™ç§æŠ€æœ¯çš„å¥½å¤„æ˜¯ï¼š</p>
<ol>
<li>å†…å­˜å ç”¨å°‘ï¼Œå› ä¸ºåªéœ€è¦ä¸€ä¸ªçˆ¶å…ƒç´ çš„äº‹ä»¶å¤„ç†ç¨‹åºï¼Œè€Œä¸å¿…ä¸ºæ¯ä¸ªåä»£éƒ½æ·»åŠ äº‹ä»¶å¤„ç†ç¨‹åºã€‚</li>
<li>æ— éœ€ä»å·²åˆ é™¤çš„å…ƒç´ ä¸­è§£ç»‘å¤„ç†ç¨‹åºï¼Œä¹Ÿæ— éœ€å°†å¤„ç†ç¨‹åºç»‘å®šåˆ°æ–°å…ƒç´ ä¸Šã€‚</li>
</ol>
<h2 id="JavaScriptä¸­çš„thisæŒ‡å‘"><a href="#JavaScriptä¸­çš„thisæŒ‡å‘" class="headerlink" title="JavaScriptä¸­çš„thisæŒ‡å‘"></a>JavaScriptä¸­çš„thisæŒ‡å‘</h2><p>ç®€å•æ¥è®²ï¼Œ<code>this</code>çš„æŒ‡å‘å–å†³äºå‡½æ•°çš„è°ƒç”¨æ–¹å¼</p>
<ol start="0">
<li>å¦‚æœæ˜¯ç®­å¤´å‡½æ•°ï¼Œ<code>this</code>è¢«è®¾ç½®ä¸ºè°ƒç”¨æ—¶çš„ä¸Šä¸‹æ–‡</li>
<li>å¦‚æœä½¿ç”¨<code>new</code>ï¼Œå‡½æ•°å†…çš„<code>this</code>æ˜¯ä¸€ä¸ªå…¨æ–°çš„å¯¹è±¡</li>
<li>å¦‚æœ<code>applyã€callã€bind</code>æ–¹æ³•ç”¨äºè°ƒç”¨/åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°å†…çš„<code>this</code>å°±æ˜¯ä½œä¸ºå‚æ•°ä¼ å…¥è¿™äº›æ–¹æ³•çš„å¯¹è±¡</li>
<li>å½“å‡½æ•°ä½œä¸ºå¯¹è±¡é‡Œçš„æ–¹æ³•è¢«è°ƒç”¨æ—¶ï¼Œå‡½æ•°å†…çš„<code>this</code>æ˜¯è°ƒç”¨è¯¥å‡½æ•°çš„å¯¹è±¡ï¼Œæ¯”å¦‚å½“<code>obj.method()</code>è¢«è°ƒç”¨æ—¶ï¼Œå‡½æ•°å†…çš„<code>this</code>å°†ç»‘å®šåˆ°<code>obj</code>å¯¹è±¡</li>
<li>å¦‚æœä¸ç¬¦åˆä¸Šè¿°è§„åˆ™ï¼Œé‚£ä¹ˆ<code>this</code>çš„å€¼æŒ‡å‘å…¨å±€å¯¹è±¡<code>global object</code>ï¼Œæµè§ˆå™¨ç¯å¢ƒä¸‹<code>this</code>çš„å€¼æŒ‡å‘<code>window</code>å¯¹è±¡ï¼Œä½†åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹<code>use strict</code>ï¼Œ<code>this</code>çš„å€¼ä¸º<code>undefined</code></li>
<li>å¦‚æœç¬¦åˆä¸Šè¿°å¤šä¸ªè§„åˆ™ï¼Œä»ä¸Šåˆ°ä¸‹æƒé‡ä¾æ¬¡é€’å‡</li>
</ol>
<h2 id="åŸå‹ç»§æ‰¿-prototypal-inheritance"><a href="#åŸå‹ç»§æ‰¿-prototypal-inheritance" class="headerlink" title="åŸå‹ç»§æ‰¿ prototypal inheritance"></a>åŸå‹ç»§æ‰¿ <code>prototypal inheritance</code></h2><p>æ‰€æœ‰çš„JSå¯¹è±¡éƒ½æœ‰ä¸€ä¸ª<code>prototype</code>å¯¹è±¡ï¼ŒæŒ‡å‘å®ƒçš„åŸå‹å¯¹è±¡ï¼Œå½“è¯•å›¾è®¿é—®ä¸€ä¸ªå¯¹è±¡çš„å±æ€§æ—¶ï¼Œå¦‚æœæ²¡æœ‰åœ¨è¯¥å¯¹è±¡ä¸Šæ‰¾åˆ°å®ƒè¿˜ä¼šæœç´¢è¯¥å¯¹è±¡çš„åŸå‹ï¼Œä»¥åŠè¯¥å¯¹è±¡çš„åŸå‹çš„åŸå‹ï¼Œä¾æ¬¡å±‚å±‚å‘ä¸Šæœç´¢ï¼Œç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªåå­—åŒ¹é…çš„å±æ€§æˆ–è¾¾åˆ°åŸå‹é“¾çš„æœ«å°¾ã€‚è¿™ç§è¡Œä¸ºæ˜¯åœ¨æ¨¡æ‹Ÿç»å…¸çš„ç»§æ‰¿ï¼Œä½†ä¸å…¶è¯´æ—¶ç»§æ‰¿è¿˜ä¸å¦‚è¯´æ˜¯å§”æ‰˜<code>delegation</code></p>
<p>è¯»å–å¯¹è±¡çš„å±æ€§å€¼æ—¶ï¼Œä¼šè‡ªåŠ¨åˆ°åŸå‹é“¾ä¸­æŸ¥æ‰¾</p>
<p>è®¾ç½®å¯¹è±¡çš„å±æ€§å€¼æ—¶ï¼Œä¸ä¼šæŸ¥æ‰¾åŸå‹é“¾ï¼Œå¦‚æœå½“å‰å¯¹è±¡ä¸­æ²¡æœ‰æ­¤å±æ€§ï¼Œç›´æ¥æ·»åŠ æ­¤å±æ€§å¹¶è®¾ç½®å…¶å€¼</p>
<p><img src="../imgs/1581317824537.png" alt="åŸå‹"></p>
<h2 id="JavaScriptçš„æ¨¡å—åŒ–æœºåˆ¶"><a href="#JavaScriptçš„æ¨¡å—åŒ–æœºåˆ¶" class="headerlink" title="JavaScriptçš„æ¨¡å—åŒ–æœºåˆ¶"></a>JavaScriptçš„æ¨¡å—åŒ–æœºåˆ¶</h2><ul>
<li><p>AMD</p>
<p><strong>Asynchronous Module Definition å¼‚æ­¥æ¨¡å—åŠ è½½æœºåˆ¶</strong>ï¼ŒReqireJSå®ç°äº†AMDè§„èŒƒ</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//a.js</span></span><br><span class="line"><span class="comment">//defineå¯ä»¥ä¼ å…¥ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯å­—ç¬¦ä¸²-æ¨¡å—åã€æ•°ç»„-ä¾èµ–æ¨¡å—ã€å‡½æ•°-å›è°ƒå‡½æ•°</span></span><br><span class="line">define(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// b.js</span></span><br><span class="line"><span class="comment">//æ•°ç»„ä¸­å£°æ˜éœ€è¦åŠ è½½çš„æ¨¡å—ï¼Œå¯ä»¥æ˜¯æ¨¡å—åã€jsæ–‡ä»¶è·¯å¾„</span></span><br><span class="line"><span class="built_in">require</span>([<span class="string">'a'</span>], <span class="function"><span class="keyword">function</span>(<span class="params">a</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(a);<span class="comment">// 1</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>ç‰¹ç‚¹ï¼š</p>
<p>å¯¹äºä¾èµ–çš„æ¨¡å—ï¼ŒAMDæ¨å´‡<strong>ä¾èµ–å‰ç½®ï¼Œæå‰æ‰§è¡Œ</strong>ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨<code>define</code>æ–¹æ³•é‡Œä¼ å…¥çš„ä¾èµ–æ¨¡å—ï¼ˆæ•°ç»„ï¼‰ä¼šåœ¨ä¸€å¼€å§‹å°±ä¸‹è½½å¹¶æ‰§è¡Œã€‚é€‚åˆåœ¨<strong>æµè§ˆå™¨ç«¯</strong>ä½¿ç”¨</p>
</li>
<li><p>CommonJS</p>
<p>CommonJSè§„èŒƒä¸ºCommonJSå°ç»„æ‰€æå‡ºï¼Œç›®çš„æ˜¯å¼¥è¡¥JavaScriptåœ¨æœåŠ¡å™¨ç«¯ç¼ºå°‘æ¨¡å—åŒ–æœºåˆ¶ï¼Œ<strong>NodeJSã€webpack</strong>éƒ½æ˜¯åŸºäºè¯¥è§„èŒƒæ¥å®ç°çš„ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//a.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"hello world"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//b.js</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="built_in">require</span>(<span class="string">'./a'</span>);</span><br><span class="line"></span><br><span class="line">a();<span class="comment">//"hello world"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æˆ–è€…</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//a2.js</span></span><br><span class="line">exports.num = <span class="number">1</span>;</span><br><span class="line">exports.obj = &#123;<span class="attr">xx</span>: <span class="number">2</span>&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//b2.js</span></span><br><span class="line"><span class="keyword">var</span> a2 = <span class="built_in">require</span>(<span class="string">'./a2'</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(a2);<span class="comment">//&#123; num: 1, obj: &#123; xx: 2 &#125; &#125;</span></span><br></pre></td></tr></table></figure>

<p>ç‰¹ç‚¹ï¼š</p>
<ul>
<li>æ‰€æœ‰ä»£ç éƒ½è¿è¡Œåœ¨<strong>æ¨¡å—ä½œç”¨åŸŸ</strong>ï¼Œä¸ä¼šæ±¡æŸ“å…¨å±€ä½œç”¨åŸŸ</li>
<li>æ¨¡å—æ˜¯<strong>åŒæ­¥åŠ è½½</strong>çš„ï¼Œå³åªæœ‰åŠ è½½å®Œæˆæ‰èƒ½æ‰§è¡Œåé¢çš„æ“ä½œ</li>
<li>æ¨¡å—åœ¨é¦–æ¬¡æ‰§è¡Œåå°±ä¼š<strong>ç¼“å­˜</strong>ï¼Œå†æ¬¡åŠ è½½åªè¿”å›ç¼“å­˜ç»“æœï¼Œå¦‚æœæƒ³è¦å†æ¬¡æ‰§è¡Œï¼Œå¯æ¸…é™¤ç¼“å­˜</li>
<li><code>require</code>è¿”å›çš„æ˜¯è¢«è¾“å‡ºçš„<strong>å€¼çš„æ‹·è´</strong>ï¼Œæ¨¡å—å†…éƒ¨çš„å˜åŒ–ä¹Ÿä¸ä¼šå½±å“è¿™ä¸ªå€¼</li>
</ul>
</li>
<li><p>ES6 Module</p>
<p>ES6 Moduleæ˜¯<strong>ES6</strong>ä¸­è§„å®šçš„æ¨¡å—ä½“ç³»</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//a.js</span></span><br><span class="line"><span class="keyword">var</span> name = <span class="string">'lin'</span>;</span><br><span class="line"><span class="keyword">var</span> age = <span class="number">13</span>;</span><br><span class="line"><span class="keyword">var</span> job = <span class="string">'ninja'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; name, age, job&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//b.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; name, age, job&#125; <span class="keyword">from</span> <span class="string">'./a.js'</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(name, age, job);<span class="comment">// lin 13 ninja</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æˆ–è€…</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//a2.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'default '</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//b2.js</span></span><br><span class="line"><span class="keyword">import</span> customName <span class="keyword">from</span> <span class="string">'./a2.js'</span>;</span><br><span class="line">customName(); <span class="comment">// 'default'</span></span><br></pre></td></tr></table></figure>

<p>ç‰¹ç‚¹ï¼ˆå¯¹æ¯”CommonJSï¼‰ï¼š</p>
<table>
<thead>
<tr>
<th></th>
<th>CommonJS</th>
<th>ES6 Module</th>
</tr>
</thead>
<tbody><tr>
<td>åŠ è½½æ—¶é—´</td>
<td>è¿è¡Œæ—¶åŠ è½½</td>
<td>ç¼–è¯‘æ—¶è¾“å‡ºæ¥å£</td>
</tr>
<tr>
<td>åŠ è½½æ–¹å¼</td>
<td>åŠ è½½æ•´ä¸ªæ¨¡å—</td>
<td>æŒ‰éœ€åŠ è½½</td>
</tr>
<tr>
<td>è¾“å‡ºæ–¹å¼</td>
<td>å€¼çš„æ‹·è´</td>
<td>å€¼çš„å¼•ç”¨</td>
</tr>
<tr>
<td>this</td>
<td>æŒ‡å‘å½“å‰æ¨¡å—</td>
<td>undefined</td>
</tr>
</tbody></table>
</li>
</ul>
<h2 id="é—­åŒ…ï¼ˆclosureï¼‰"><a href="#é—­åŒ…ï¼ˆclosureï¼‰" class="headerlink" title="é—­åŒ…ï¼ˆclosureï¼‰"></a>é—­åŒ…ï¼ˆclosureï¼‰</h2><ul>
<li><p>WHAT</p>
<p>å®šä¹‰ï¼š</p>
<ol>
<li><p>å³ä½¿è¢«å¤–éƒ¨å‡½æ•°è¿”å›ï¼Œä¾ç„¶å¯ä»¥è®¿é—®åˆ°å¤–éƒ¨ï¼ˆå°é—­ï¼‰å‡½æ•°ä½œç”¨åŸŸçš„<strong>å‡½æ•°</strong>ã€‚</p>
</li>
<li><p>åŒ…å«è¢«å¼•ç”¨å˜é‡ï¼ˆå‡½æ•°ï¼‰çš„<strong>å¯¹è±¡</strong></p>
</li>
</ol>
<p>ç”Ÿå‘½å‘¨æœŸï¼š</p>
<p>â€‹    äº§ç”Ÿï¼šåœ¨åµŒå¥—å†…éƒ¨å‡½æ•°<strong>å®šä¹‰æ‰§è¡Œå®Œ</strong>æ—¶å°±äº§ç”Ÿäº†ï¼ˆ<strong>ä¸æ˜¯åœ¨è°ƒç”¨</strong>ï¼‰</p>
<p>â€‹    æ­»äº¡ï¼šåœ¨åµŒå¥—å†…éƒ¨å‡½æ•°æˆä¸ºåƒåœ¾å¯¹è±¡æ—¶</p>
</li>
<li><p>WHY</p>
<ul>
<li><p>å¯ä»¥å®ç°æ•°æ®ç§æœ‰åŒ–æˆ–ç‰¹æƒæ–¹æ³•</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">count</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> tmp = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> tmp++;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> counter1 = count()</span><br><span class="line"><span class="built_in">console</span>.log(counter1());</span><br><span class="line"><span class="built_in">console</span>.log(counter1());</span><br><span class="line"><span class="built_in">console</span>.log(counter1());</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"---------"</span>);</span><br><span class="line"><span class="keyword">let</span> counter2 = count()</span><br><span class="line"><span class="built_in">console</span>.log(counter2());</span><br><span class="line"><span class="built_in">console</span>.log(counter2());</span><br><span class="line"></span><br><span class="line"><span class="comment">// 0</span></span><br><span class="line"><span class="comment">// 1</span></span><br><span class="line"><span class="comment">// 2</span></span><br><span class="line"><span class="comment">// ----new counter-----</span></span><br><span class="line"><span class="comment">// 0</span></span><br><span class="line"><span class="comment">// 1</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>å®ç°å•ä¾‹æ¨¡å¼</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å•ä¾‹æ¨¡å¼</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Single</span> </span>&#123;</span><br><span class="line">  test () &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"test"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ()()çš„ä½œç”¨ï¼šä½¿å‡½æ•°ç«‹å³è°ƒç”¨ä¸€æ¬¡</span></span><br><span class="line"><span class="comment">// é—­åŒ…çš„ä½œç”¨ï¼šç§æœ‰åŒ–å˜é‡</span></span><br><span class="line">Single.getIntance = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> instance = <span class="literal">null</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!instance) &#123;</span><br><span class="line">      instance = <span class="keyword">new</span> Single()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> instance</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>
</li>
<li><p>éƒ¨åˆ†å‚æ•°å‡½æ•°ï¼ˆpartial applicationsï¼‰æŸ¯é‡ŒåŒ–ï¼ˆcurryingï¼‰</p>
<p>å‡½æ•°å¼ç¼–ç¨‹-æŸ¯é‡ŒåŒ–</p>
</li>
</ul>
</li>
<li><p>HOW</p>
<p>å¸¸è§çš„åˆ›å»ºé—­åŒ…çš„æ–¹å¼æ˜¯åœ¨ä¸€ä¸ªå‡½æ•°å†…éƒ¨åˆ›å»ºå¦ä¸€ä¸ªå‡½æ•°</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> a = <span class="number">12</span></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"test"</span>, a)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="foreachå’Œ-mapçš„åŒºåˆ«"><a href="#foreachå’Œ-mapçš„åŒºåˆ«" class="headerlink" title=".foreachå’Œ.mapçš„åŒºåˆ«"></a><code>.foreach</code>å’Œ<code>.map</code>çš„åŒºåˆ«</h2><ul>
<li>éƒ½æ˜¯ç”¨æ¥éå†ä¸€ä¸ªæ•°ç»„</li>
<li><code>foreach</code>å¯¹åŸæ•°ç»„æœ‰å‰¯ä½œç”¨ï¼Œè€Œ<code>map</code>åˆ™ä¼šè¿”å›ä¸€ä¸ªæ–°çš„æ•°ç»„</li>
</ul>
<h2 id="åŒ¿åå‡½æ•°çš„ä½¿ç”¨åœºæ™¯"><a href="#åŒ¿åå‡½æ•°çš„ä½¿ç”¨åœºæ™¯" class="headerlink" title="åŒ¿åå‡½æ•°çš„ä½¿ç”¨åœºæ™¯"></a>åŒ¿åå‡½æ•°çš„ä½¿ç”¨åœºæ™¯</h2><ul>
<li><p>åœ¨IIFEä¸­ä½¿ç”¨,ç”¨æ¥å°è£…å±€éƒ¨ä½œç”¨åŸŸå†…çš„ä»£ç ï¼Œé¿å…æ±¡æŸ“å…¨å±€ä½œç”¨åŸŸ</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// do something</span></span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>
</li>
<li><p>å¯ä»¥ä½œä¸ºå›è°ƒå‡½æ•°ï¼Œç®€æ´æ˜“è¯»</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">settimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// do something</span></span><br><span class="line">&#125;, <span class="number">1000</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>ç”¨ä½œå‡½æ•°å¼ç¼–ç¨‹</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">arr.map(<span class="function"><span class="params">el</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(el)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="å®¿ä¸»å¯¹è±¡ï¼ˆhost-objectsï¼‰å’ŒåŸç”Ÿå¯¹è±¡ï¼ˆnative-objectsï¼‰çš„åŒºåˆ«"><a href="#å®¿ä¸»å¯¹è±¡ï¼ˆhost-objectsï¼‰å’ŒåŸç”Ÿå¯¹è±¡ï¼ˆnative-objectsï¼‰çš„åŒºåˆ«" class="headerlink" title="å®¿ä¸»å¯¹è±¡ï¼ˆhost objectsï¼‰å’ŒåŸç”Ÿå¯¹è±¡ï¼ˆnative objectsï¼‰çš„åŒºåˆ«"></a>å®¿ä¸»å¯¹è±¡ï¼ˆhost objectsï¼‰å’ŒåŸç”Ÿå¯¹è±¡ï¼ˆnative objectsï¼‰çš„åŒºåˆ«</h2><ul>
<li>åŸç”Ÿå¯¹è±¡æ˜¯ç”±ECMAScriptè§„èŒƒå®šä¹‰çš„JavaScriptå†…ç½®å¯¹è±¡ï¼Œå¦‚<code>String</code>ã€<code>Math</code>ã€<code>RegExp</code>ç­‰</li>
<li>å®¿ä¸»å¯¹è±¡æ˜¯æŒ‡ç”±è¿è¡Œæ—¶ç¯å¢ƒï¼ˆæµè§ˆå™¨æˆ–Nodeï¼‰æä¾›ï¼Œå¦‚<code>window</code>ã€<code>XMLRequest</code>ã€<code>Buffer</code></li>
</ul>
<h2 id="function-Persion-ã€var-person-Person-ã€var-person-new-Person-çš„åŒºåˆ«"><a href="#function-Persion-ã€var-person-Person-ã€var-person-new-Person-çš„åŒºåˆ«" class="headerlink" title="function Persion() {}ã€var person = Person()ã€var person = new Person()çš„åŒºåˆ«"></a><code>function Persion() {}</code>ã€<code>var person = Person()</code>ã€<code>var person = new Person()</code>çš„åŒºåˆ«</h2><p><code>function Persion() {}</code>åªæ˜¯ä¸€ä¸ªæ™®é€šçš„å‡½æ•°å£°æ˜ã€‚ä½¿ç”¨PascalCaseæ–¹å¼å‘½åçš„å‡½æ•°ä½œä¸ºæ„é€ å‡½æ•°æ˜¯ä¸€ç§æƒ¯ä¾‹</p>
<p><code>var person = Person()</code>å°†<code>Person</code>ä½œä¸ºæ™®é€šå‡½æ•°è°ƒç”¨è€Œä¸æ˜¯æ„é€ å‡½æ•°ã€‚å¦‚æœè¯¥å‡½æ•°æ˜¯ç”¨ä½œæ„é€ å‡½æ•°ï¼Œé‚£ä¹ˆè¿™ç§è°ƒç”¨æ–¹å¼æ˜¯ä¸€ç§åˆ›å»ºé”™è¯¯ï¼Œé€šå¸¸æƒ…å†µä¸‹æ„é€ å‡½æ•°ä¸ä¼šè¿”å›ä»»ä½•ä¸œè¥¿ï¼Œå› æ­¤å‘æ™®é€šå‡½æ•°ä¸€æ ·è°ƒç”¨æ„é€ å‡½æ•°åªä¼šè¿”å›<code>undefined</code></p>
<p><code>var person = new Person()</code>ä½¿ç”¨<code>new</code>æ“ä½œç¬¦ï¼Œåˆ›å»º<code>Person</code>å¯¹è±¡çš„å®ä¾‹ï¼Œè¯¥å®ä¾‹ç»§æ‰¿è‡ª<code>Person.prototype</code><br>åœ¨ä½¿ç”¨newçš„è¿‡ç¨‹ä¸­ä¼šå‘ç”Ÿä»¥ä¸‹äº‹æƒ…ï¼š</p>
<ol>
<li>æ–°ç”Ÿæˆäº†ä¸€ä¸ªå¯¹è±¡</li>
<li>é“¾æ¥åˆ°åŸå‹</li>
<li>ç»‘å®šthis</li>
<li>è¿”å›æ–°å¯¹è±¡</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span> (<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = Person()</span><br><span class="line"><span class="built_in">console</span>.log(person) <span class="comment">//undefined</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> person = <span class="keyword">new</span> Person(<span class="string">"tom"</span>)</span><br><span class="line"><span class="built_in">console</span>.log(person) <span class="comment">// Person &#123; name: "tom" &#125;</span></span><br></pre></td></tr></table></figure>

<h2 id="callå’Œ-applyçš„åŒºåˆ«"><a href="#callå’Œ-applyçš„åŒºåˆ«" class="headerlink" title=".callå’Œ.applyçš„åŒºåˆ«"></a><code>.call</code>å’Œ<code>.apply</code>çš„åŒºåˆ«</h2><table>
<thead>
<tr>
<th></th>
<th><code>call</code></th>
<th><code>apply</code></th>
</tr>
</thead>
<tbody><tr>
<td>ä½œç”¨</td>
<td>æŒ‡å®šå‡½æ•°<code>this</code></td>
<td>æŒ‡å®šå‡½æ•°<code>this</code></td>
</tr>
<tr>
<td>ä¼ å‚æ–¹å¼</td>
<td>ä»¥é€—å·åˆ†éš”</td>
<td>æ•°ç»„</td>
</tr>
</tbody></table>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> leo = &#123;</span><br><span class="line">	name: <span class="string">"Leo"</span>,</span><br><span class="line">	sayHi() &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">"Hi! I'm "</span> + <span class="keyword">this</span>.name) </span><br><span class="line">	&#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> neil = &#123;</span><br><span class="line">	name: <span class="string">"Neil"</span></span><br><span class="line">&#125;;</span><br><span class="line">leo.sayHi(); <span class="comment">// "Hi! I'm Leo"</span></span><br><span class="line">leo.sayHi.call(neil); <span class="comment">// "Hi! I'm Neil"</span></span><br><span class="line">leo.sayHi.call(<span class="literal">null</span>); <span class="comment">// "Hi! I'm undefined"</span></span><br><span class="line"><span class="keyword">var</span> neilSayHi = leo.sayHi.bind(neil)</span><br><span class="line">consolo.log(<span class="keyword">typeof</span> neilSayHi)  <span class="comment">// function</span></span><br><span class="line">nei.sayHi() <span class="comment">// "Hi! I'm Neil"</span></span><br></pre></td></tr></table></figure>

<h2 id="bind"><a href="#bind" class="headerlink" title="bind"></a><code>bind</code></h2><p>ä¹Ÿç”¨äºæ”¹å˜<code>this</code>çš„åªæƒ³ç›¸è¾ƒäº<code>call</code>ã€<code>apply</code>ï¼Œ<code>bind</code>è¿”å›çš„æ˜¯ä¸€ä¸ªå‡½æ•°</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="number">12</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.x)</span><br><span class="line">&#125;</span><br><span class="line">test()</span><br><span class="line">test.bind(&#123; <span class="attr">x</span>: <span class="number">100</span> &#125;)()</span><br><span class="line"></span><br><span class="line"><span class="comment">// 12</span></span><br><span class="line"><span class="comment">// 100</span></span><br></pre></td></tr></table></figure>


        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://mrrs878.github.io/2020/01/14/Node.js-åŸºç¡€/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr.RS">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/imgs/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mr.RS">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            
            <a href="/2020/01/14/Node.js-åŸºç¡€/" class="post-title-link" itemprop="url">Node.js-åŸºç¡€</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-01-14 14:11:45 / ä¿®æ”¹æ—¶é—´ï¼š14:13:09" itemprop="dateCreated datePublished" datetime="2020-01-14T14:11:45+08:00">2020-01-14</time>
            </span>
          
            

            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Node-js/" itemprop="url" rel="index">
                    <span itemprop="name">Node.js</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="Buffer"><a href="#Buffer" class="headerlink" title="Buffer"></a><a href="http://nodejs.cn/api/buffer.html" target="_blank" rel="noopener">Buffer</a></h1><p>JSè‡ªèº«åªèƒ½åªæœ‰å­—ç¬¦ä¸²æ•°æ®ç±»å‹ï¼Œæ²¡æœ‰äºŒè¿›åˆ¶æ•°æ®ç±»å‹ï¼Œå› æ­¤nodejsæä¾›äº†ä¸€ä¸ªä¸stringå¯¹ç­‰çš„å…¨å±€æ„é€ å‡½æ•°Bufferæ¥æä¾›å¯¹äºŒè¿›åˆ¶æ•°æ®çš„æ“ä½œ</p>
<ul>
<li><p><code>Buffer.form</code> åˆ›å»ºä¸€ä¸ªbuffer</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Buffer.form([ <span class="number">0x68</span>, <span class="number">0x65</span>, <span class="number">0x6c</span>, <span class="number">0x6c</span>, <span class="number">0x6f</span> ]).toString()</span><br><span class="line"><span class="comment">// hello</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>Burrer</code>ä¸<code>String</code>çš„ä¸€ä¸ªé‡è¦åŒºåˆ«å°±æ˜¯å­—ç¬¦ä¸²æ—¶åªè¯»çš„ï¼Œå¹¶ä¸”å¯¹äºå­—ç¬¦ä¸²çš„ä»»ä½•ä¿®æ”¹å¾—åˆ°çš„éƒ½æ˜¯ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œæºå­—ç¬¦ä¸²ä¿æŒä¸å˜ã€‚è‡³äº<code>Buffer</code>ï¼Œæ›´åƒæ˜¯å¯ä»¥åšæŒ‡é’ˆæ“ä½œçš„Cè¯­è¨€æ•°ç»„ï¼Œä¾‹å¦‚ï¼Œå¯ä»¥ä½¿ç”¨<code>[index]</code>æ–¹å¼ç›´æ¥ä¿®æ”¹æŸä¸ªä½ç½®çš„å­—èŠ‚</p>
</li>
</ul>
<h1 id="Stream"><a href="#Stream" class="headerlink" title="Stream"></a><a href="http://nodejs.cn/api/stream.html" target="_blank" rel="noopener">Stream</a></h1><ul>
<li><p>å½“å†…å­˜ä¸­æ— æ³•ä¸€æ¬¡è£…ä¸‹éœ€è¦å¤„ç†çš„æ•°æ®æ—¶ï¼Œæˆ–è€…ä¸€è¾¹è¯»å–ä¸€è¾¹å¤„ç†æ›´åŠ é«˜æ•ˆæ—¶ï¼Œæˆ‘ä»¬å°±éœ€è¦ç”¨åˆ°æ•°æ®æµã€‚NodeJSä¸­é€šè¿‡å„ç§<code>Stream</code>æ¥æä¾›å¯¹æ•°æ®æµçš„æ“ä½œã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> rs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">copy</span> (<span class="params">src, dst</span>) </span>&#123;</span><br><span class="line">    fs.createReadStream(src).pipe(fs.createWriteSreeam(dst));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">main</span> (<span class="params">argv</span>) </span>&#123;</span><br><span class="line">    copy(argv[<span class="number">0</span>], argv[<span class="number">1</span>])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">main(process.argv.slice(<span class="number">2</span>));</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>Stream</code>åŸºäºäº‹ä»¶æœºåˆ¶å·¥ä½œï¼Œæ‰€æœ‰<code>Stream</code>çš„å®ä¾‹éƒ½ç»§æ‰¿äºNodeJSæä¾›çš„<a href="http://nodejs.cn/api/events.html#events_class_eventemitter" target="_blank" rel="noopener"><code>EventEmitter</code></a></p>
</li>
</ul>
<h1 id="File-System"><a href="#File-System" class="headerlink" title="File System"></a><a href="http://nodejs.cn/api/fs.html" target="_blank" rel="noopener">File System</a></h1><p>NodeJSé€šè¿‡<code>fs</code>å†…ç½®æ¨¡å—æä¾›å¯¹æ–‡ä»¶çš„æ“ä½œï¼Œ<code>fs</code>æ¨¡å—æä¾›çš„APIåŸºæœ¬ä¸Šå¯ä»¥åˆ†ä¸ºä»¥ä¸‹ä¸‰ç±»ï¼š</p>
<ul>
<li>æ–‡ä»¶å±æ€§è¯»<br>å…¶ä¸­å¸¸è§çš„æœ‰<code>fs.state</code> <code>fs.chmod</code> <code>fs.chown</code></li>
<li>æ–‡ä»¶å±æ€§å†™<br>å…¶ä¸­å¸¸è§çš„æœ‰<code>fs.readFile</code> <code>fs.readdir</code> <code>fs.writeFile</code> <code>fs.mkdir</code></li>
<li>åº•å±‚æ–‡ä»¶æ“ä½œ<br>å…¶ä¸­å¸¸è§çš„æ“ä½œæœ‰<code>fs.open</code> <code>fs.read</code> <code>fs.write</code> <code>fs.close</code><br>æ‰€æœ‰çš„<code>fs</code>æ¨¡å—APIçš„å›è°ƒå‚æ•°éƒ½æœ‰ä¸¤ä¸ªï¼Œç¬¬ä¸€ä¸ªå‚æ•°åœ¨æœ‰é”™è¯¯å‘ç”Ÿæ—¶ç­‰äºå¼‚å¸¸å¯¹è±¡ï¼Œç¬¬äºŒä¸ªå‚æ•°å§‹ç»ˆç”¨äºè¿”å›APIæ–¹æ³•æ‰§è¡Œç»“æœ<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fs.readFile(pathname, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;&#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="Path"><a href="#Path" class="headerlink" title="Path"></a><a href="http://nodejs.cn/api/path.html" target="_blank" rel="noopener">Path</a></h2><p>æ“ä½œæ–‡ä»¶æ—¶éš¾å…ä¸ä¸æ–‡ä»¶è·¯å¾„æ‰“äº¤é“ã€‚NodeJSæä¾›äº†<code>path</code>å†…ç½®æ¨¡å—æ¥ç®€åŒ–è·¯å¾„ç›¸å…³æ“ä½œï¼Œå¹¶æå‡ä»£ç å¯è¯»æ€§ã€‚</p>
<ul>
<li><p><code>path.normalize</code><br>  å°†ä¼ å…¥çš„å‚æ•°è½¬ä¸ºæ ‡å‡†è·¯å¾„ï¼Œå…·ä½“è®²çš„è¯ï¼Œé™¤äº†è§£æè·¯å¾„ä¸­çš„<code>.</code>ä¸<code>..</code>å¤–ï¼Œè¿˜èƒ½å»æ‰å¤šä½™çš„æ–œæ ã€‚å¦‚æœæœ‰ç¨‹åºéœ€è¦ä½¿ç”¨è·¯å¾„ä½œä¸ºæŸäº›æ•°æ®çš„ç´¢å¼•ï¼Œä½†åˆå…è®¸ç”¨æˆ·éšæ„è¾“å…¥è·¯å¾„æ—¶ï¼Œå°±éœ€è¦ä½¿ç”¨è¯¥æ–¹æ³•ä¿è¯è·¯å¾„çš„å”¯ä¸€æ€§ã€‚</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> cache = &#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">store</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    cache[path.normalize(key)] = value</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">store(<span class="string">'foo/bar'</span>, <span class="number">1</span>);</span><br><span class="line">store(<span class="string">'foo//baz//../bar'</span>, <span class="number">2</span>);</span><br><span class="line"><span class="built_in">console</span>.log(cache);  <span class="comment">// =&gt; &#123; "foo/bar": 2 &#125;</span></span><br></pre></td></tr></table></figure>

<p>  æ ‡å‡†åŒ–ä¹‹åçš„è·¯å¾„é‡Œçš„æ–œæ åœ¨Windowsç³»ç»Ÿä¸‹æ˜¯\ï¼Œè€Œåœ¨Linuxç³»ç»Ÿä¸‹æ˜¯/ã€‚å¦‚æœæƒ³ä¿è¯ä»»ä½•ç³»ç»Ÿä¸‹éƒ½ä½¿ç”¨/ä½œä¸ºè·¯å¾„åˆ†éš”ç¬¦çš„è¯ï¼Œéœ€è¦ç”¨<code>.replace(/\\/g, &#39;/&#39;)</code>å†æ›¿æ¢ä¸€ä¸‹æ ‡å‡†è·¯å¾„ã€‚</p>
</li>
<li><p><code>path.join</code><br>  å°†ä¼ å…¥çš„å¤šä¸ªè·¯å¾„æ‹¼æ¥ä¸ºæ ‡å‡†è·¯å¾„ã€‚è¯¥æ–¹æ³•å¯é¿å…æ‰‹å·¥æ‹¼æ¥è·¯å¾„å­—ç¬¦ä¸²çš„ç¹çï¼Œå¹¶ä¸”èƒ½åœ¨ä¸åŒç³»ç»Ÿä¸‹æ­£ç¡®ä½¿ç”¨ç›¸åº”çš„è·¯å¾„åˆ†éš”ç¬¦ã€‚</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">path.join(<span class="string">'foo/'</span>, <span class="string">'baz/'</span>, <span class="string">'../bar'</span>); <span class="comment">// =&gt; "foo/bar"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>path.extname</code><br>  å½“æˆ‘ä»¬éœ€è¦æ ¹æ®ä¸åŒæ–‡ä»¶æ‰©å±•ååšä¸åŒæ“ä½œæ—¶ï¼Œè¯¥æ–¹æ³•å°±æ˜¾å¾—å¾ˆå¥½ç”¨ã€‚</p>
  <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">path.extname(<span class="string">'foo/bar.js'</span>); <span class="comment">// =&gt; ".js"</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="éå†ç›®å½•"><a href="#éå†ç›®å½•" class="headerlink" title="éå†ç›®å½•"></a>éå†ç›®å½•</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">travel</span> (<span class="params">dir, callback</span>) </span>&#123;</span><br><span class="line">    fs.readdirSync(dir).forEach(<span class="function"><span class="params">file</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> pathname = path.join(dir, file)</span><br><span class="line">        <span class="keyword">if</span> (fs.statSync(pathname).isDirectory())</span><br><span class="line">            travel(pathname, callback)</span><br><span class="line">        <span class="keyword">else</span> callback(pathname)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">travel(__dirname, file =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(file)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// c:\Users\mrrs8\Desktop\desktop.ini</span></span><br><span class="line"><span class="comment">// c:\Users\mrrs8\Desktop\Postman.lnk</span></span><br><span class="line"><span class="comment">// c:\Users\mrrs8\Desktop\test.js</span></span><br><span class="line"><span class="comment">// c:\Users\mrrs8\Desktop\å¾®ä¿¡å¼€å‘è€…å·¥å…·.lnk</span></span><br></pre></td></tr></table></figure>

<h1 id="æ–‡æœ¬ç¼–ç "><a href="#æ–‡æœ¬ç¼–ç " class="headerlink" title="æ–‡æœ¬ç¼–ç "></a>æ–‡æœ¬ç¼–ç </h1><p>ä½¿ç”¨NodeJSç¼–å†™å‰ç«¯å·¥å…·æ—¶ï¼Œæ“ä½œå¾—æœ€å¤šçš„æ˜¯æ–‡æœ¬æ–‡ä»¶ï¼Œå› æ­¤ä¹Ÿå°±æ¶‰åŠåˆ°äº†æ–‡ä»¶ç¼–ç çš„å¤„ç†é—®é¢˜ã€‚æˆ‘ä»¬å¸¸ç”¨çš„æ–‡æœ¬ç¼–ç æœ‰<code>UTF8</code>å’Œ<code>GBK</code>ä¸¤ç§ï¼Œå¹¶ä¸”<code>UTF8</code>æ–‡ä»¶è¿˜å¯èƒ½å¸¦æœ‰<code>BOM</code>ã€‚åœ¨è¯»å–ä¸åŒç¼–ç çš„æ–‡æœ¬æ–‡ä»¶æ—¶ï¼Œéœ€è¦å°†æ–‡ä»¶å†…å®¹è½¬æ¢ä¸ºJSä½¿ç”¨çš„<code>UTF8</code>ç¼–ç å­—ç¬¦ä¸²åæ‰èƒ½æ­£å¸¸å¤„ç†ã€‚</p>
<h2 id="BOMçš„ç§»é™¤"><a href="#BOMçš„ç§»é™¤" class="headerlink" title="BOMçš„ç§»é™¤"></a>BOMçš„ç§»é™¤</h2><p>BOMç”¨äºæ ‡è®°ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ä½¿ç”¨<code>Unicode</code>ç¼–ç ï¼Œå…¶æœ¬èº«æ˜¯ä¸€ä¸ª<code>Unicode</code>å­—ç¬¦<code>ï¼ˆ&quot;\uFEFF&quot;ï¼‰</code>ï¼Œä½äºæ–‡æœ¬æ–‡ä»¶å¤´éƒ¨ã€‚åœ¨ä¸åŒçš„<code>Unicode</code>ç¼–ç ä¸‹ï¼Œ<code>BOM</code>å­—ç¬¦å¯¹åº”çš„äºŒè¿›åˆ¶å­—èŠ‚å¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">    Bytes      Encoding</span><br><span class="line">----------------------------</span><br><span class="line">    FE FF       UTF16BE</span><br><span class="line">    FF FE       UTF16LE</span><br><span class="line">    EF BB BF    UTF8</span><br></pre></td></tr></table></figure>

<p>å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®æ–‡æœ¬æ–‡ä»¶å¤´å‡ ä¸ªå­—èŠ‚ç­‰äºå•¥æ¥åˆ¤æ–­æ–‡ä»¶æ˜¯å¦åŒ…å«<code>BOM</code>ï¼Œä»¥åŠä½¿ç”¨å“ªç§<code>Unicode</code>ç¼–ç ã€‚ä½†æ˜¯ï¼Œ<code>BOM</code>å­—ç¬¦è™½ç„¶èµ·åˆ°äº†æ ‡è®°æ–‡ä»¶ç¼–ç çš„ä½œç”¨ï¼Œå…¶æœ¬èº«å´ä¸å±äºæ–‡ä»¶å†…å®¹çš„ä¸€éƒ¨åˆ†ï¼Œå¦‚æœè¯»å–æ–‡æœ¬æ–‡ä»¶æ—¶ä¸å»æ‰<code>BOM</code>ï¼Œåœ¨æŸäº›ä½¿ç”¨åœºæ™¯ä¸‹å°±ä¼šæœ‰é—®é¢˜ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¯†åˆ«å’Œå»é™¤UTF8 BOM</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">readText</span> (<span class="params">pathname</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> bin = fs.readFileSync(pathname);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (bin[<span class="number">0</span>] === <span class="number">0xEF</span> &amp;&amp; bin[<span class="number">1</span>] === <span class="number">0xBB</span> &amp;&amp; bin[<span class="number">2</span>] === <span class="number">0xBF</span>) &#123;</span><br><span class="line">        bin = bin.slice(<span class="number">3</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> bin.toString(<span class="string">'utf-8'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="GBKè½¬UTF8"><a href="#GBKè½¬UTF8" class="headerlink" title="GBKè½¬UTF8"></a>GBKè½¬UTF8</h2><p>NodeJSæ”¯æŒåœ¨è¯»å–æ–‡æœ¬æ–‡ä»¶æ—¶ï¼Œæˆ–è€…åœ¨<code>Buffer</code>è½¬æ¢ä¸ºå­—ç¬¦ä¸²æ—¶æŒ‡å®šæ–‡æœ¬ç¼–ç ï¼Œä½†é—æ†¾çš„æ˜¯ï¼Œ<code>GBK</code>ç¼–ç ä¸åœ¨NodeJSè‡ªèº«æ”¯æŒèŒƒå›´å†…ã€‚å› æ­¤ï¼Œä¸€èˆ¬æˆ‘ä»¬å€ŸåŠ©<code>iconv-lite</code>è¿™ä¸ªä¸‰æ–¹åŒ…æ¥è½¬æ¢ç¼–ç </p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// GBKè½¬UTF8</span></span><br><span class="line"><span class="keyword">const</span> iconv = <span class="built_in">require</span>(<span class="string">'iconv-lite'</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">readGBKText</span>(<span class="params">pathname</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> bin = fs.readFileSync(pathname);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> iconv.decode(bin, <span class="string">'gbk'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="å•å­—èŠ‚ç¼–ç "><a href="#å•å­—èŠ‚ç¼–ç " class="headerlink" title="å•å­—èŠ‚ç¼–ç "></a>å•å­—èŠ‚ç¼–ç </h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">replace</span>(<span class="params">pathname</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> str = fs.readFileSync(pathname, <span class="string">'binary'</span>);</span><br><span class="line">    str = str.replace(<span class="string">'foo'</span>, <span class="string">'bar'</span>);</span><br><span class="line">    fs.writeFileSync(pathname, str, <span class="string">'binary'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://mrrs878.github.io/2020/01/14/go-gin-åŸºç¡€/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr.RS">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/imgs/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mr.RS">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            
            <a href="/2020/01/14/go-gin-åŸºç¡€/" class="post-title-link" itemprop="url">go-gin-åŸºç¡€</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-01-14 14:05:44" itemprop="dateCreated datePublished" datetime="2020-01-14T14:05:44+08:00">2020-01-14</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-02-06 17:42:49" itemprop="dateModified" datetime="2020-02-06T17:42:49+08:00">2020-02-06</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/go-gin/" itemprop="url" rel="index">
                    <span itemprop="name">go gin</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="è·å–GET-pathå‚æ•°"><a href="#è·å–GET-pathå‚æ•°" class="headerlink" title="è·å–GET pathå‚æ•°"></a>è·å–<code>GET</code> <code>path</code>å‚æ•°</h1><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  r := gin.Default()</span><br><span class="line">  r.GET(<span class="string">"/index/:id"</span>, <span class="function"><span class="keyword">func</span><span class="params">(context *gin.Context)</span></span>&#123;</span><br><span class="line">    r.JOSN(http.StatusOK, gin.H&#123;</span><br><span class="line">      <span class="string">"id"</span>: context.Param(<span class="string">"id"</span>),</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="è·å–POST-raw-jsonå‚æ•°"><a href="#è·å–POST-raw-jsonå‚æ•°" class="headerlink" title="è·å–POST raw jsonå‚æ•°"></a>è·å–<code>POST</code> <code>raw json</code>å‚æ•°</h1><ol>
<li><p>å®šä¹‰ä¸€ä¸ªå…¬ç”¨<code>struct</code>ï¼Œç”¨äºæ ‡å‡†è¿”å›æ•°æ®æ ¼å¼</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> ResBodyS <span class="keyword">struct</span> &#123;</span><br><span class="line">  ErrCode <span class="keyword">int</span> <span class="string">`json:"errCode"`</span></span><br><span class="line">  Desc <span class="keyword">string</span> <span class="string">`json:"description" binding:"required"`</span> <span class="comment">//å‚æ•°å­˜åœ¨æ€§æ ¡éªŒ</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>å®šä¹‰é’ˆå¯¹äºç‰¹å®šæ¥å£çš„<code>struct</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> IndexReqBodyS <span class="keyword">struct</span> &#123;</span><br><span class="line">  ResBodyS</span><br><span class="line">  Data <span class="keyword">string</span> <span class="string">`json:"index"`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>ä½¿ç”¨<code>context.BindJSON()</code>è§£æè¯·æ±‚ä¸­çš„bodyå‚æ•°</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  r := gin,Default()</span><br><span class="line">  r.POST(<span class="string">"/index"</span>, <span class="function"><span class="keyword">func</span><span class="params">(context *gin.Context)</span></span>&#123;</span><br><span class="line">    <span class="keyword">var</span> reqInfo IndexReqBodyS</span><br><span class="line">    err := context.BindJSON(&amp;reqInfo)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">      fmt.PrintFln(<span class="string">"parse json data error! err:"</span>, err)</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    context.JSON(http.StatusOK, reqInfo)</span><br><span class="line">  &#125;)</span><br><span class="line">  r.Run(<span class="string">":9090"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ol>
<h1 id="æ•è·å¼‚å¸¸"><a href="#æ•è·å¼‚å¸¸" class="headerlink" title="æ•è·å¼‚å¸¸"></a>æ•è·å¼‚å¸¸</h1><p>åœ¨ Go ä¸­å¼‚å¸¸å°±æ˜¯<code>panic</code>ï¼Œå®ƒæ˜¯åœ¨ç¨‹åºè¿è¡Œçš„æ—¶å€™æŠ›å‡ºçš„ï¼Œå½“<code>panic</code>æŠ›å‡ºä¹‹åï¼Œå¦‚æœåœ¨ç¨‹åºé‡Œæ²¡æœ‰æ·»åŠ ä»»ä½•ä¿æŠ¤æªæ–½çš„è¯ï¼Œæ§åˆ¶å°å°±ä¼šåœ¨æ‰“å°å‡º<code>panic</code>çš„è¯¦ç»†æƒ…å†µï¼Œç„¶åç»ˆæ­¢è¿è¡Œã€‚<br>å½“ç¨‹åºå‘ç”Ÿ<code>panic</code>åï¼Œåœ¨<code>defer</code>(å»¶è¿Ÿå‡½æ•°) å†…éƒ¨å¯ä»¥è°ƒç”¨<code>recover</code>è¿›è¡Œæ•è·ã€‚</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">  err := <span class="built_in">recover</span>();</span><br><span class="line">  <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">    fmp.Println(err)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="å•å…ƒæµ‹è¯•"><a href="#å•å…ƒæµ‹è¯•" class="headerlink" title="å•å…ƒæµ‹è¯•"></a>å•å…ƒæµ‹è¯•</h1><p>ä½¿ç”¨<code>net/http/httptest</code>åŒ…<br>ä¸åŸç”Ÿæµ‹è¯•ç›¸æ¯”ï¼Œä½¿ç”¨<code>gin.Engine.ServeHTTP</code>å‘é€è¯·æ±‚(åŸç”Ÿä½¿ç”¨<code>http.HandlerFunc.ServeHTTP</code>)</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> engine *gin.Engine</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> accessToken = <span class="string">"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE1ODA5OTE1NTUsInVzZXJfaWQiOjE4LCJuYW1lIjoidGVzdDEifQ.900X9t3qveW0NGn3_FhYxHXlgsLAdl1BkjfKxNlBNyE"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">CreateRequest</span><span class="params">(method constant.HttpRequestMethod, url <span class="keyword">string</span>, params <span class="keyword">interface</span>&#123;&#125;)</span> <span class="params">(status constant.ResultCode, resBody *util.ResS, returnError error)</span></span> &#123;</span><br><span class="line">	<span class="keyword">if</span> engine == <span class="literal">nil</span> &#123;</span><br><span class="line">		gin.SetMode(gin.ReleaseMode)</span><br><span class="line">		engine = gin.New()</span><br><span class="line">		database.SetUpDatabase()</span><br><span class="line">		controller.SetupRouter(engine)</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> (</span><br><span class="line">		rr        = httptest.NewRecorder()</span><br><span class="line">		req       = <span class="built_in">new</span>(http.Request)</span><br><span class="line">		err error = <span class="literal">nil</span></span><br><span class="line">	)</span><br><span class="line">	<span class="keyword">if</span> params != <span class="literal">nil</span> &#123;</span><br><span class="line">		tmp, err := json.Encode(params)</span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			<span class="keyword">return</span> constant.FAILED, <span class="literal">nil</span>, err</span><br><span class="line">		&#125;</span><br><span class="line">		req, err = http.NewRequest(<span class="keyword">string</span>(method), url, bytes.NewBuffer([]<span class="keyword">byte</span>(tmp)))</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		req, err = http.NewRequest(<span class="keyword">string</span>(method), url, <span class="literal">nil</span>)</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> constant.FAILED, <span class="literal">nil</span>, err</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	req.Header.Add(<span class="string">"Authorization"</span>, fmt.Sprintf(<span class="string">"Bear %s"</span>, accessToken))</span><br><span class="line">	engine.ServeHTTP(rr, req)</span><br><span class="line"></span><br><span class="line">	formatRes := util.ResS&#123;&#125;</span><br><span class="line">	err = json.Decode(rr.Body.Bytes(), &amp;formatRes)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">return</span> constant.FAILED, <span class="literal">nil</span>, err</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> constant.SUCCESS, &amp;formatRes, <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">CreateTest</span><span class="params">(t *testing.T, method constant.HttpRequestMethod, url <span class="keyword">string</span>, params <span class="keyword">interface</span>&#123;&#125;)</span></span> &#123;</span><br><span class="line">	_, resBody, err := CreateRequest(method, url, params)</span><br><span class="line">	<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">		t.Errorf(<span class="string">"got error: %s"</span>, err.Error())</span><br><span class="line">		<span class="keyword">return</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> resBody != <span class="literal">nil</span> &#123;</span><br><span class="line">		<span class="keyword">if</span> resBody.Code != constant.SUCCESS &#123;</span><br><span class="line">			t.Errorf(<span class="string">"GetInfo test failed, got: %v, info: %s"</span>, resBody.Data, resBody.Message)</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://mrrs878.github.io/2020/01/14/go-åŸºç¡€/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr.RS">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/imgs/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mr.RS">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            
            <a href="/2020/01/14/go-åŸºç¡€/" class="post-title-link" itemprop="url">go-æé€Ÿå…¥é—¨</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-01-14 13:43:45" itemprop="dateCreated datePublished" datetime="2020-01-14T13:43:45+08:00">2020-01-14</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-02-06 17:25:31" itemprop="dateModified" datetime="2020-02-06T17:25:31+08:00">2020-02-06</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/go/" itemprop="url" rel="index">
                    <span itemprop="name">go</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="ä¾èµ–åŒ…ç®¡ç†å·¥å…·"><a href="#ä¾èµ–åŒ…ç®¡ç†å·¥å…·" class="headerlink" title="ä¾èµ–åŒ…ç®¡ç†å·¥å…·"></a>ä¾èµ–åŒ…ç®¡ç†å·¥å…·</h1><ul>
<li><p>dep<br>æœªå®Œå¾…ç»­â€¦</p>
</li>
<li><p>go vendor<br>æœªå®Œå¾…ç»­â€¦</p>
</li>
<li><p>glide<br>æœªå®Œå¾…ç»­â€¦</p>
</li>
<li><p><strong>go modules</strong></p>
<p>ä¼´éšGo 1.11å‡ºç°ï¼Œ<strong>å®˜æ–¹æ¨è</strong></p>
</li>
</ul>
<h1 id="go-mod-å‘½ä»¤"><a href="#go-mod-å‘½ä»¤" class="headerlink" title="go mod å‘½ä»¤"></a>go mod å‘½ä»¤</h1><ul>
<li><p><code>go mod tidy</code></p>
<p>æ‹‰å–ç¼ºå°‘çš„æ¨¡å—ï¼Œç§»é™¤ä¸ç”¨çš„æ¨¡å—</p>
</li>
<li><p><code>go mod vandor</code></p>
<p>å°†ä¾èµ–å¤åˆ¶åˆ°vendorä¸‹</p>
</li>
<li><p><code>go mod download</code></p>
<p>ä¸‹è½½ä¾èµ–åŒ…</p>
</li>
<li><p><code>go mod verify</code></p>
<p>æ£€æµ‹ä¾èµ–</p>
</li>
<li><p><code>go mod graph</code></p>
<p>æ‰“å°æ¨¡å—ä¾èµ–å›¾</p>
</li>
</ul>
<h1 id="åˆ‡ç‰‡"><a href="#åˆ‡ç‰‡" class="headerlink" title="åˆ‡ç‰‡"></a>åˆ‡ç‰‡</h1><h2 id="åˆ‡ç‰‡å°±åƒæ•°ç»„çš„å¼•ç”¨"><a href="#åˆ‡ç‰‡å°±åƒæ•°ç»„çš„å¼•ç”¨" class="headerlink" title="åˆ‡ç‰‡å°±åƒæ•°ç»„çš„å¼•ç”¨"></a>åˆ‡ç‰‡å°±åƒæ•°ç»„çš„å¼•ç”¨</h2><h2 id="åˆ‡ç‰‡æ‹¥æœ‰-é•¿åº¦-å’Œ-å®¹é‡"><a href="#åˆ‡ç‰‡æ‹¥æœ‰-é•¿åº¦-å’Œ-å®¹é‡" class="headerlink" title="åˆ‡ç‰‡æ‹¥æœ‰ é•¿åº¦ å’Œ å®¹é‡"></a>åˆ‡ç‰‡æ‹¥æœ‰ <em>é•¿åº¦</em> å’Œ <em>å®¹é‡</em></h2><ul>
<li>åˆ‡ç‰‡çš„é•¿åº¦å°±æ˜¯å®ƒæ‰€åŒ…å«çš„å…ƒç´ ä¸ªæ•°ã€‚</li>
<li>åˆ‡ç‰‡çš„å®¹é‡æ˜¯ä»å®ƒçš„ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹æ•°ï¼Œåˆ°å…¶åº•å±‚æ•°ç»„å…ƒç´ æœ«å°¾çš„ä¸ªæ•°ã€‚</li>
<li>åˆ‡ç‰‡ s çš„é•¿åº¦å’Œå®¹é‡å¯é€šè¿‡è¡¨è¾¾å¼ <code>len(s)</code> å’Œ <code>cap(s)</code> æ¥è·å–ã€‚</li>
</ul>
<h2 id="åˆ‡ç‰‡å¯ä»¥ç”¨å†…å»ºå‡½æ•°-make-æ¥åˆ›å»ºï¼Œè¿™ä¹Ÿæ˜¯åˆ›å»ºåŠ¨æ€æ•°ç»„çš„æ–¹å¼ã€‚make-å‡½æ•°ä¼šåˆ†é…ä¸€ä¸ªå…ƒç´ ä¸ºé›¶å€¼çš„æ•°ç»„å¹¶è¿”å›ä¸€ä¸ªå¼•ç”¨äº†å®ƒçš„åˆ‡ç‰‡ï¼š"><a href="#åˆ‡ç‰‡å¯ä»¥ç”¨å†…å»ºå‡½æ•°-make-æ¥åˆ›å»ºï¼Œè¿™ä¹Ÿæ˜¯åˆ›å»ºåŠ¨æ€æ•°ç»„çš„æ–¹å¼ã€‚make-å‡½æ•°ä¼šåˆ†é…ä¸€ä¸ªå…ƒç´ ä¸ºé›¶å€¼çš„æ•°ç»„å¹¶è¿”å›ä¸€ä¸ªå¼•ç”¨äº†å®ƒçš„åˆ‡ç‰‡ï¼š" class="headerlink" title="åˆ‡ç‰‡å¯ä»¥ç”¨å†…å»ºå‡½æ•° make æ¥åˆ›å»ºï¼Œè¿™ä¹Ÿæ˜¯åˆ›å»ºåŠ¨æ€æ•°ç»„çš„æ–¹å¼ã€‚make å‡½æ•°ä¼šåˆ†é…ä¸€ä¸ªå…ƒç´ ä¸ºé›¶å€¼çš„æ•°ç»„å¹¶è¿”å›ä¸€ä¸ªå¼•ç”¨äº†å®ƒçš„åˆ‡ç‰‡ï¼š"></a>åˆ‡ç‰‡å¯ä»¥ç”¨å†…å»ºå‡½æ•° <code>make</code> æ¥åˆ›å»ºï¼Œè¿™ä¹Ÿæ˜¯åˆ›å»ºåŠ¨æ€æ•°ç»„çš„æ–¹å¼ã€‚<code>make</code> å‡½æ•°ä¼šåˆ†é…ä¸€ä¸ªå…ƒç´ ä¸ºé›¶å€¼çš„æ•°ç»„å¹¶è¿”å›ä¸€ä¸ªå¼•ç”¨äº†å®ƒçš„åˆ‡ç‰‡ï¼š</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">a := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">5</span>)  <span class="comment">// len(a)=5</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// è¦æŒ‡å®šå®ƒçš„å®¹é‡ï¼Œéœ€å‘ make ä¼ å…¥ç¬¬ä¸‰ä¸ªå‚æ•°ï¼š</span></span><br><span class="line">b := <span class="built_in">make</span>([]<span class="keyword">int</span>, <span class="number">0</span>, <span class="number">5</span>) <span class="comment">// len(b)=0, cap(b)=5</span></span><br><span class="line">b = b[:<span class="built_in">cap</span>(b)] <span class="comment">// len(b)=5, cap(b)=5</span></span><br><span class="line">b = b[<span class="number">1</span>:]      <span class="comment">// len(b)=4, cap(b)=4</span></span><br></pre></td></tr></table></figure>

<h2 id="å‘åˆ‡ç‰‡è¿½åŠ å…ƒç´ "><a href="#å‘åˆ‡ç‰‡è¿½åŠ å…ƒç´ " class="headerlink" title="å‘åˆ‡ç‰‡è¿½åŠ å…ƒç´ "></a>å‘åˆ‡ç‰‡è¿½åŠ å…ƒç´ </h2><p>append çš„ç¬¬ä¸€ä¸ªå‚æ•° s æ˜¯ä¸€ä¸ªå…ƒç´ ç±»å‹ä¸º T çš„åˆ‡ç‰‡ï¼Œå…¶ä½™ç±»å‹ä¸º T çš„å€¼å°†ä¼šè¿½åŠ åˆ°è¯¥åˆ‡ç‰‡çš„æœ«å°¾ã€‚append çš„ç»“æœæ˜¯ä¸€ä¸ªåŒ…å«åŸåˆ‡ç‰‡æ‰€æœ‰å…ƒç´ åŠ ä¸Šæ–°æ·»åŠ å…ƒç´ çš„åˆ‡ç‰‡ã€‚å½“ s çš„åº•å±‚æ•°ç»„å¤ªå°ï¼Œä¸è¶³ä»¥å®¹çº³æ‰€æœ‰ç»™å®šçš„å€¼æ—¶ï¼Œå®ƒå°±ä¼šåˆ†é…ä¸€ä¸ª(<strong>capå€¼ç¿»å€</strong>)æ›´å¤§çš„æ•°ç»„ã€‚è¿”å›çš„åˆ‡ç‰‡ä¼šæŒ‡å‘è¿™ä¸ªæ–°åˆ†é…çš„æ•°ç»„ã€‚</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> s []<span class="keyword">int</span></span><br><span class="line">    printSlice(s)</span><br><span class="line">    <span class="comment">// len=0 cap=0 []</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// capä¸å¤Ÿç”¨â€”â€”&gt;capç¿»å€â€”â€”&gt;cap=2</span></span><br><span class="line">	s = <span class="built_in">append</span>(s, <span class="number">0</span>)</span><br><span class="line">    printSlice(s)</span><br><span class="line">    <span class="comment">// len=1 cap=2 [0]</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// capå¤Ÿç”¨â€”â€”&gt;ä¿æŒä¸å˜â€”â€”&gt;cap=2</span></span><br><span class="line">	s = <span class="built_in">append</span>(s, <span class="number">1</span>)</span><br><span class="line">    printSlice(s)</span><br><span class="line">    <span class="comment">// len=2 cap=2 [0 1]</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// capä¸å¤Ÿç”¨â€”â€”&gt;capç¿»å€â€”â€”&gt;cap=8</span></span><br><span class="line">	s = <span class="built_in">append</span>(s, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line">    printSlice(s)</span><br><span class="line">    <span class="comment">// len=5 cap=8 [0 1 2 3 4]</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// capå¤Ÿç”¨â€”â€”&gt;capä¿æŒä¸å˜â€”â€”&gt;cap=8</span></span><br><span class="line">    s = <span class="built_in">append</span>(s, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>)</span><br><span class="line">    printSlice(s)</span><br><span class="line">    <span class="comment">// len=8 cap=8 [0 1 2 3 4 5 6 7]</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">printSlice</span><span class="params">(s []<span class="keyword">int</span>)</span></span> &#123;</span><br><span class="line">	fmt.Printf(<span class="string">"len=%d cap=%d %v\n"</span>, <span class="built_in">len</span>(s), <span class="built_in">cap</span>(s), s)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="map-æ— åºçš„-key-value-æ•°æ®ç»“æ„"><a href="#map-æ— åºçš„-key-value-æ•°æ®ç»“æ„" class="headerlink" title="map-æ— åºçš„ key-value æ•°æ®ç»“æ„"></a><code>map</code>-æ— åºçš„ <code>key-value</code> æ•°æ®ç»“æ„</h1><p>mapé›†åˆä¸­çš„ <code>key/value</code> å¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼Œä½†æ‰€æœ‰<code>key</code>å¿…é¡»åŒå±äºä¸€ç§æ•°æ®ç±»å‹ï¼Œæ‰€æœ‰çš„<code>value</code>å¿…é¡»åŒå±äºä¸€ç§æ•°æ®ç±»å‹ã€‚<code>key</code> å’Œ <code>value</code> çš„æ•°æ®ç±»å‹å¯ä»¥ä¸ç›¸åŒ</p>
<h1 id="forå¾ªç¯"><a href="#forå¾ªç¯" class="headerlink" title="forå¾ªç¯"></a><code>for</code>å¾ªç¯</h1><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">person := [<span class="number">3</span>]<span class="keyword">string</span> &#123; <span class="string">"tom"</span>, <span class="string">"john"</span>, <span class="string">"jerry"</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> k, v := <span class="keyword">range</span> person &#123;</span><br><span class="line">  fmt.Printf(<span class="string">"person[%d]: %s\n"</span>, k, v)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="goå…³é”®å­—"><a href="#goå…³é”®å­—" class="headerlink" title="goå…³é”®å­—"></a><code>go</code>å…³é”®å­—</h1><p>åœ¨goå…³é”®å­—åé¢åŠ ä¸€ä¸ªå‡½æ•°ï¼Œå°±å¯ä»¥åˆ›å»ºä¸€ä¸ªçº¿ç¨‹ï¼Œå‡½æ•°å¯ä»¥ä¸ºå·²ç»å†™å¥½çš„å‡½æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯åŒ¿åå‡½æ•°</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  fmt.Printf(<span class="string">"main start"</span>)</span><br><span class="line">  <span class="keyword">go</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">    fmt.Println(<span class="string">"goroutine"</span>)</span><br><span class="line">  &#125;()</span><br><span class="line">  time.sleep(<span class="number">1</span> * time.Second)</span><br><span class="line">  fmt.Printf(<span class="string">"main end"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="chan-ç±»ä¼¼äºé˜Ÿåˆ—ï¼Œéµå¾ªå…ˆè¿›å…ˆå‡ºçš„è§„åˆ™"><a href="#chan-ç±»ä¼¼äºé˜Ÿåˆ—ï¼Œéµå¾ªå…ˆè¿›å…ˆå‡ºçš„è§„åˆ™" class="headerlink" title="chan-ç±»ä¼¼äºé˜Ÿåˆ—ï¼Œéµå¾ªå…ˆè¿›å…ˆå‡ºçš„è§„åˆ™"></a><code>chan</code>-ç±»ä¼¼äºé˜Ÿåˆ—ï¼Œéµå¾ªå…ˆè¿›å…ˆå‡ºçš„è§„åˆ™</h1><h2 id="å£°æ˜chan"><a href="#å£°æ˜chan" class="headerlink" title="å£°æ˜chan"></a>å£°æ˜<code>chan</code></h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å£°æ˜ä¸å¸¦ç¼“å†²çš„é€šé“</span></span><br><span class="line">ch1 := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">string</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å£°æ˜å¸¦10ä¸ªç¼“å†²çš„é€šé“</span></span><br><span class="line">ch2 := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">string</span>, <span class="number">10</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å£°æ˜åªè¯»é€šé“</span></span><br><span class="line">ch3 := <span class="built_in">make</span>(&lt;-<span class="keyword">chan</span> <span class="keyword">string</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// å£°æ˜åªå†™é€šé“</span></span><br><span class="line">ch4 := <span class="built_in">make</span>(<span class="keyword">chan</span>&lt;- <span class="keyword">string</span>)</span><br></pre></td></tr></table></figure>

<p>ä¸å¸¦ç¼“å†²çš„é€šé“ï¼Œè¿›ä½•å¤„éƒ½ä¼šé˜»å¡<br>å¸¦ç¼“å†²çš„é€šé“ï¼Œè¿›ä¸€æ¬¡é•¿åº¦+1ï¼Œå‡ºä¸€æ¬¡é•¿åº¦-1ï¼Œå¦‚æœé•¿åº¦ç­‰äºç¼“å†²åŒºé•¿åº¦æ—¶ï¼Œå†è¿›å°±ä¼šé˜»å¡</p>
<h2 id="å†™å…¥chan"><a href="#å†™å…¥chan" class="headerlink" title="å†™å…¥chan"></a>å†™å…¥<code>chan</code></h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ch1 := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">string</span>, <span class="number">10</span>)</span><br><span class="line">ch1 &lt;- <span class="string">"a"</span></span><br></pre></td></tr></table></figure>

<h2 id="è¯»å–chan"><a href="#è¯»å–chan" class="headerlink" title="è¯»å–chan"></a>è¯»å–<code>chan</code></h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">val, ok := &lt;- ch1</span><br><span class="line">val := &lt;- ch1</span><br></pre></td></tr></table></figure>

<h2 id="å…³é—­chan"><a href="#å…³é—­chan" class="headerlink" title="å…³é—­chan"></a>å…³é—­<code>chan</code></h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">close</span>(<span class="keyword">chan</span>)</span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">productor</span><span class="params">(ch <span class="keyword">chan</span> <span class="keyword">string</span>)</span></span> &#123;</span><br><span class="line">  fmt.Println(<span class="string">"producer start"</span>)</span><br><span class="line">  ch &lt;- <span class="string">"a"</span></span><br><span class="line">  ch &lt;- <span class="string">"b"</span></span><br><span class="line">  ch &lt;- <span class="string">"c"</span></span><br><span class="line">  ch &lt;- <span class="string">"d"</span></span><br><span class="line">  fmt.Println(<span class="string">"producer end"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  fmt.Println(<span class="string">"main start"</span>)</span><br><span class="line">  ch := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="keyword">string</span>, <span class="number">3</span>)</span><br><span class="line">  <span class="keyword">go</span> producer(ch)</span><br><span class="line"></span><br><span class="line">  time.Sleep(<span class="number">1</span> * time.Second)</span><br><span class="line">  fmt.Println(<span class="string">"main end"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// main start</span></span><br><span class="line"><span class="comment">// producer start  å‘ç”Ÿé˜»å¡</span></span><br><span class="line"><span class="comment">// main end</span></span><br></pre></td></tr></table></figure>

<h1 id="defer"><a href="#defer" class="headerlink" title="defer"></a><code>defer</code></h1><p>ä¸»è¦åº”ç”¨åœºæ™¯æœ‰å¼‚å¸¸å¤„ç†ã€è®°å½•æ—¥å¿—ã€æ¸…ç†æ•°æ®ã€é‡Šæ”¾èµ„æº ç­‰ç­‰ã€‚</p>
<ul>
<li><code>defer</code>åœ¨å£°æ˜æ—¶ä¸ä¼šç«‹åˆ»å»æ‰§è¡Œï¼Œè€Œæ˜¯åœ¨å‡½æ•° <code>return</code> åå»æ‰§è¡Œçš„ã€‚</li>
<li><code>defer</code>å‡½æ•°å®šä¹‰çš„é¡ºåºä¸å®é™…æ‰§è¡Œçš„é¡ºåºæ˜¯ç›¸åçš„ï¼Œä¹Ÿå°±æ˜¯æœ€å…ˆå£°æ˜çš„æœ€åæ‰æ‰§è¡Œ</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">  <span class="keyword">defer</span> fmt.Println(<span class="string">"a"</span>)</span><br><span class="line">  <span class="keyword">defer</span> fmt.Println(<span class="string">"b"</span>)</span><br><span class="line">  <span class="keyword">defer</span> fmt.Println(<span class="string">"c"</span>)</span><br><span class="line">  <span class="keyword">defer</span> fmt.Println(<span class="string">"d"</span>)</span><br><span class="line"></span><br><span class="line">  fmt.Println(<span class="string">"main"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// main</span></span><br><span class="line"><span class="comment">// d</span></span><br><span class="line"><span class="comment">// c</span></span><br><span class="line"><span class="comment">// b</span></span><br><span class="line"><span class="comment">// a</span></span><br></pre></td></tr></table></figure>

<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">calc</span><span class="params">(index <span class="keyword">string</span>, a, b <span class="keyword">int</span>)</span> <span class="title">int</span></span> &#123;</span><br><span class="line">	ret := a + b</span><br><span class="line">	fmt.Println(index, a, b, ret)</span><br><span class="line">	<span class="keyword">return</span> ret</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	x := <span class="number">1</span></span><br><span class="line">	y := <span class="number">2</span></span><br><span class="line">	<span class="keyword">defer</span> calc(<span class="string">"A"</span>, x, calc(<span class="string">"B"</span>, x, y))</span><br><span class="line">	x = <span class="number">3</span></span><br><span class="line">	<span class="keyword">defer</span> calc(<span class="string">"C"</span>, x, calc(<span class="string">"D"</span>, x, y))</span><br><span class="line">	y = <span class="number">4</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// B 1 2 3</span></span><br><span class="line"><span class="comment">// D 3 2 5</span></span><br><span class="line"><span class="comment">// C 3 5 8</span></span><br><span class="line"><span class="comment">// A 1 3 4</span></span><br></pre></td></tr></table></figure>

<h1 id="interface"><a href="#interface" class="headerlink" title="interface"></a><code>interface</code></h1><h2 id="åŸºæœ¬"><a href="#åŸºæœ¬" class="headerlink" title="åŸºæœ¬"></a>åŸºæœ¬</h2><ul>
<li>ä¸€ç§<strong>æŠ½è±¡</strong>ç±»å‹</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">"fmt"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Sayer <span class="keyword">interface</span> &#123;</span><br><span class="line">	say()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Cat <span class="keyword">struct</span> &#123;</span><br><span class="line">	Sayer</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Dog <span class="keyword">struct</span> &#123;</span><br><span class="line">	Sayer</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(cat *Cat)</span> <span class="title">say</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"miao miao miao~"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(dog *Dog)</span> <span class="title">say</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">"wang wang wang~"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> dog Dog</span><br><span class="line">	dog.say()</span><br><span class="line">	<span class="keyword">var</span> cat Cat</span><br><span class="line">	cat.say()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="ç©ºæ¥å£çš„åº”ç”¨"><a href="#ç©ºæ¥å£çš„åº”ç”¨" class="headerlink" title="ç©ºæ¥å£çš„åº”ç”¨"></a>ç©ºæ¥å£çš„åº”ç”¨</h2><ul>
<li>ç©ºæ¥å£ä½œä¸ºå‡½æ•°çš„å‚æ•°</li>
<li>ç©ºæ¥å£ä½œä¸º<code>map</code>çš„å€¼</li>
<li>ç±»å‹æ–­è¨€<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">var</span> x <span class="keyword">interface</span>&#123;&#125;</span><br><span class="line">	x = <span class="string">"hello world"</span></span><br><span class="line">	v, ok := x.(<span class="keyword">string</span>)</span><br><span class="line">	<span class="keyword">if</span> ok &#123;</span><br><span class="line">		fmt.Println(v)</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		fmt.Println(<span class="string">"ç±»å‹æ–­è¨€å¤±è´¥"</span>)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h1 id="å•å…ƒæµ‹è¯•"><a href="#å•å…ƒæµ‹è¯•" class="headerlink" title="å•å…ƒæµ‹è¯•"></a>å•å…ƒæµ‹è¯•</h1><p>Goè¯­è¨€ä¸­çš„æµ‹è¯•ä¾èµ–<code>go test</code>å‘½ä»¤ã€‚ç¼–å†™æµ‹è¯•ä»£ç å’Œç¼–å†™æ™®é€šçš„<code>Go</code>ä»£ç è¿‡ç¨‹æ˜¯ç±»ä¼¼çš„ã€‚</p>
<p><code>go test</code>å‘½ä»¤æ˜¯ä¸€ä¸ªæŒ‰ç…§ä¸€å®šçº¦å®šå’Œç»„ç»‡çš„æµ‹è¯•ä»£ç çš„é©±åŠ¨ç¨‹åºã€‚åœ¨åŒ…ç›®å½•å†…ï¼Œæ‰€æœ‰ä»¥<code>_test.go</code>ä¸ºåç¼€åçš„æºä»£ç æ–‡ä»¶éƒ½æ˜¯<code>go test</code>æµ‹è¯•çš„ä¸€éƒ¨åˆ†ï¼Œä¸ä¼šè¢«<code>go build</code>ç¼–è¯‘åˆ°æœ€ç»ˆçš„å¯æ‰§è¡Œæ–‡ä»¶ä¸­ã€‚</p>
<p>åœ¨<code>*_test.go</code>æ–‡ä»¶ä¸­æœ‰ä¸‰ç§ç±»å‹çš„å‡½æ•°ï¼Œå•å…ƒæµ‹è¯•å‡½æ•°ã€åŸºå‡†æµ‹è¯•å‡½æ•°å’Œç¤ºä¾‹å‡½æ•°ã€‚</p>
<table>
<thead>
<tr>
<th>ç±»å‹</th>
<th align="left">æ ¼å¼</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td>æµ‹è¯•å‡½æ•°</td>
<td align="left">å‡½æ•°åå‰ç¼€ä¸º<code>Test</code></td>
<td>æµ‹è¯•ç¨‹åºçš„ä¸€äº›é€»è¾‘è¡Œä¸ºæ˜¯å¦æ­£ç¡®</td>
</tr>
<tr>
<td>åŸºå‡†å‡½æ•°</td>
<td align="left">å‡½æ•°åå‰ç¼€ä¸º<code>Benchmark</code></td>
<td>æµ‹è¯•å‡½æ•°çš„æ€§èƒ½</td>
</tr>
<tr>
<td>ç¤ºä¾‹å‡½æ•°</td>
<td align="left">å‡½æ•°åå‰ç¼€ä¸º<code>Example</code></td>
<td>ä¸ºæ–‡æ¡£æä¾›ç¤ºä¾‹æ–‡æ¡£</td>
</tr>
</tbody></table>
<p>æµ‹è¯•å‡½æ•°å®ä¾‹</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">TestName</span><span class="params">(t *testing.T)</span></span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://mrrs878.github.io/2019/10/21/è®¾è®¡æ¨¡å¼-èŒè´£é“¾æ¨¡å¼/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr.RS">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/imgs/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mr.RS">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            
            <a href="/2019/10/21/è®¾è®¡æ¨¡å¼-èŒè´£é“¾æ¨¡å¼/" class="post-title-link" itemprop="url">è®¾è®¡æ¨¡å¼-èŒè´£é“¾æ¨¡å¼</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-10-21 10:51:52 / ä¿®æ”¹æ—¶é—´ï¼š11:36:52" itemprop="dateCreated datePublished" datetime="2019-10-21T10:51:52+08:00">2019-10-21</time>
            </span>
          
            

            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/è®¾è®¡æ¨¡å¼/" itemprop="url" rel="index">
                    <span itemprop="name">è®¾è®¡æ¨¡å¼</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="WHAT"><a href="#WHAT" class="headerlink" title="WHAT"></a>WHAT</h1><p>ä½¿å¤šä¸ªå¯¹è±¡éƒ½æœ‰æœºä¼šå¤„ç†è¯·æ±‚ï¼Œä»è€Œé¿å…è¯·æ±‚çš„å‘é€è€…å’Œæ¥æ”¶è€…ä¹‹é—´çš„è€¦åˆå…³ç³»ï¼Œå°†è¿™äº›å¯¹è±¡ç»ƒæˆä¸€æ¡é“¾ï¼Œå¹¶æ²¿ç€è¿™æ¡é“¾ä¼ é€’è¯¥è¯·æ±‚ï¼Œç›´åˆ°æœ‰ä¸€ä¸ªå¯¹è±¡å¤„ç†å®ƒä¸ºæ­¢</p>
<p><img src="../imgs/chainOfResponsibility0.png" alt="æ™®é€šè®¾è®¡"></p>
<p><img src="../imgs/chainOfResponsibility1.png" alt="èŒè´£é“¾æ¨¡å¼"></p>
<h1 id="WHY"><a href="#WHY" class="headerlink" title="WHY"></a>WHY</h1><ul>
<li>èŒè´£é“¾æ¨¡å¼è§£è€¦äº†è¯·æ±‚å‘é€è€… A å’Œ N ä¸ªæ¥æ”¶è€…ä¹‹é—´çš„å¤æ‚å…³ç³»ï¼Œç”±äºä¸çŸ¥é“é“¾ä¸­çš„å“ªä¸ªèŠ‚ç‚¹å¯ä»¥å¤„ç†ä½ å‘å‡ºçš„è¯·æ±‚ï¼Œæ‰€ä»¥ä½ åªéœ€è¦æŠŠè¯·æ±‚ä¼ é€’ç»™ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å³å¯</li>
<li>ä½¿ç”¨èŒè´£é“¾åï¼Œé“¾ä¸­çš„èŠ‚ç‚¹å¯ä»¥çµæ´»æ‹†åˆ†é‡ç»„ï¼Œå¢åŠ /åˆ é™¤/æ”¹åŠ¨ä¸€ä¸ªèŠ‚ç‚¹éƒ½è½»è€Œæ˜“ä¸¾</li>
<li>å¯ä»¥æ‰‹åŠ¨æŒ‡å®šèµ·å§‹èŠ‚ç‚¹ï¼Œè¯·æ±‚å¹¶ä¸æ˜¯éå¾—ä»é“¾ä¸­çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å¼€å§‹ä¼ é€’ï¼Œè¿™æ ·å°±å¯ä»¥å‡å°‘è¯·æ±‚åœ¨é“¾ä¸­çš„ä¼ é€’æ¬¡æ•°ï¼Œæ›´å¿«çš„æ‰¾åˆ°åˆé€‚çš„è¯·æ±‚æ¥æ”¶è€…</li>
</ul>
<h1 id="HOW"><a href="#HOW" class="headerlink" title="HOW"></a>HOW</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">b</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">  <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">c</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">3</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// èŒè´£é“¾æ¨¡å¼æ™®é€šå®ç°</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Chain</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(fn) &#123;</span><br><span class="line">    <span class="keyword">this</span>.fn = fn;</span><br><span class="line">    <span class="keyword">this</span>.successor = <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  setNextSuccessor(successor) &#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="keyword">this</span>.successor = successor);</span><br><span class="line">  &#125;</span><br><span class="line">  passRequest() &#123;</span><br><span class="line">    <span class="keyword">let</span> ret = <span class="keyword">this</span>.fn.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">    <span class="keyword">if</span> (ret === <span class="literal">false</span>)</span><br><span class="line">      <span class="keyword">return</span> (</span><br><span class="line">        <span class="keyword">this</span>.successor &amp;&amp;</span><br><span class="line">        <span class="keyword">this</span>.successor.passRequest.apply(<span class="keyword">this</span>.successor, <span class="built_in">arguments</span>)</span><br><span class="line">      );</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> aChain = <span class="keyword">new</span> Chain(a);</span><br><span class="line"><span class="keyword">let</span> bChain = <span class="keyword">new</span> Chain(b);</span><br><span class="line"><span class="keyword">let</span> cChain = <span class="keyword">new</span> Chain(c);</span><br><span class="line">aChain.setNextSuccessor(bChain);</span><br><span class="line">bChain.setNextSuccessor(cChain);</span><br><span class="line"></span><br><span class="line">aChain.passRequest(<span class="number">12</span>); <span class="comment">// 2</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// AOPå®ç°èŒè´£é“¾æ¨¡å¼</span></span><br><span class="line"><span class="built_in">Function</span>.prototype.after = <span class="function"><span class="keyword">function</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> _self = <span class="keyword">this</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> tmp = _self.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">    <span class="keyword">if</span> (tmp === <span class="literal">false</span>) <span class="keyword">return</span> fn &amp;&amp; fn.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">    <span class="keyword">return</span> tmp;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">a.after(b).after(c)(<span class="number">12</span>); <span class="comment">// 2</span></span><br></pre></td></tr></table></figure>


        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://mrrs878.github.io/2019/10/20/è®¾è®¡æ¨¡å¼-ç­–ç•¥æ¨¡å¼/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr.RS">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/imgs/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mr.RS">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            
            <a href="/2019/10/20/è®¾è®¡æ¨¡å¼-ç­–ç•¥æ¨¡å¼/" class="post-title-link" itemprop="url">è®¾è®¡æ¨¡å¼-ç­–ç•¥æ¨¡å¼</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-10-20 10:43:35" itemprop="dateCreated datePublished" datetime="2019-10-20T10:43:35+08:00">2019-10-20</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2019-10-22 20:32:00" itemprop="dateModified" datetime="2019-10-22T20:32:00+08:00">2019-10-22</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/è®¾è®¡æ¨¡å¼/" itemprop="url" rel="index">
                    <span itemprop="name">è®¾è®¡æ¨¡å¼</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="WHAT"><a href="#WHAT" class="headerlink" title="WHAT"></a>WHAT</h1><p>å®šä¹‰ä¸€ç³»åˆ—çš„ç®—æ³•ï¼ŒæŠŠå®ƒä»¬ä¸€ä¸ªä¸ªå°è£…èµ·æ¥ï¼Œå¹¶ä¸”ä½¿å®ƒä»¬å¯ä»¥ç›¸äº’æ›¿æ¢ã€‚</p>
<p>ä¸€ä¸ªåŸºäºç­–ç•¥æ¨¡å¼çš„ç¨‹åºè‡³å°‘ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼Œç¬¬ä¸€éƒ¨åˆ†æ˜¯ä¸€ç»„ç­–ç•¥ç±»ï¼Œç­–ç•¥ç±»å°è£…äº†å…·ä½“çš„ç®—æ³•ï¼Œå¹¶è´Ÿè´£å…·ä½“çš„è®¡ç®—è¿‡ç¨‹ã€‚ç¬¬äºŒéƒ¨åˆ†æ˜¯ç¯å¢ƒç±» Context,Context æ¥å—å®¢æˆ·çš„è¯·æ±‚éšåæŠŠè¯·æ±‚å§”æ‰˜ç»™æŸä¸€ä¸ªç­–ç•¥ç±»ã€‚è¦åšåˆ°è¿™ä¸€ç‚¹ï¼Œè¯´æ˜ Context ä¸­è¦ç»´æŒå¯¹æŸä¸ªç­–ç•¥ç±»çš„å¼•ç”¨ã€‚</p>
<h1 id="WHY"><a href="#WHY" class="headerlink" title="WHY"></a>WHY</h1><ul>
<li>ç­–ç•¥æ¨¡å¼ä½¿ç”¨ç»„åˆã€å§”æ‰˜å’Œå¤šæ€ç­‰æŠ€æœ¯å’Œæ€æƒ³ï¼Œå¯ä»¥é¿å…å¤šé‡æ¡ä»¶é€‰æ‹©è¯­å¥</li>
<li>ç­–ç•¥æ¨¡å¼æä¾›äº†å¯¹<strong>å¼€æ”¾-å°é—­åŸåˆ™</strong>çš„å®Œç¾æ”¯æŒï¼Œå°†ç®—æ³•å°è£…åœ¨ç‹¬ç«‹çš„ strategy ä¸­ï¼Œä½¿å¾—å®ƒä»¬æ˜“äºæ›¿æ¢ã€ç†è§£ã€<strong>æ‰©å±•</strong></li>
<li>åœ¨ç­–ç•¥æ¨¡å¼ä¸­åˆ©ç”¨ç»„åˆå’Œå§”æ‰˜è®© context æ‹¥æœ‰æ‰§è¡Œç®—æ³•çš„èƒ½åŠ›ï¼Œè¿™ä¹Ÿæ˜¯ç»§æ‰¿çš„ä¸€ç§æ›´è½»ä¾¿çš„æ›¿ä»£æ–¹æ¡ˆ</li>
</ul>
<h1 id="HOW"><a href="#HOW" class="headerlink" title="HOW"></a>HOW</h1><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* è®¡ç®—å¥–é‡‘ï¼šç»©æ•ˆä¸ºSæœ‰å››å€å·¥èµ„ï¼Œç»©æ•ˆä¸ºAæœ‰3å€å·¥èµ„ï¼Œç»©æ•ˆä¸ºBæœ‰2å€å·¥èµ„ */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// common  ç¼ºä¹æ‰©å±•æ€§</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">calcBouns</span>(<span class="params">type, salary</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(type === <span class="string">'S'</span>) <span class="keyword">return</span> salary * <span class="number">4</span></span><br><span class="line">  <span class="keyword">if</span>(type === <span class="string">'A'</span>) <span class="keyword">return</span> salary * <span class="number">3</span></span><br><span class="line">  <span class="keyword">if</span>(type === <span class="string">'B'</span>) <span class="keyword">return</span> salary * <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line">calcBouns(<span class="string">'S'</span>, <span class="number">20000</span>)</span><br><span class="line">calcBouns(<span class="string">'A'</span>, <span class="number">10000</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// stratety pattern</span></span><br><span class="line"><span class="keyword">const</span> strategy &#123;</span><br><span class="line">  S: <span class="function"><span class="keyword">function</span>(<span class="params">salary</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> salary * <span class="number">4</span></span><br><span class="line">  &#125;,</span><br><span class="line">  A: <span class="function"><span class="keyword">function</span>(<span class="params">salary</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> salary * <span class="number">3</span></span><br><span class="line">  &#125;,</span><br><span class="line">  B: <span class="function"><span class="keyword">function</span>(<span class="params">salary</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> salary * <span class="number">2</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> calcBouns = <span class="function"><span class="keyword">function</span>(<span class="params">type, salary</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> strategy[type](salary)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">calcBouns(<span class="string">'S'</span>, <span class="number">20000</span>)</span><br><span class="line">calcBouns(<span class="string">'A'</span>, <span class="number">10000</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// functional programing</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">S</span>(<span class="params">salary</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> salary * <span class="number">4</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">A</span>(<span class="params">salary</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> salary * <span class="number">3</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">B</span>(<span class="params">salary</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> salary * <span class="number">2</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">calcBouns</span>(<span class="params">fn, salary</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> fn(salary)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">calcBouns(S, <span class="number">20000</span>)</span><br><span class="line">calcBouns(B, <span class="number">10000</span>)</span><br></pre></td></tr></table></figure>


        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://mrrs878.github.io/2019/10/19/è®¾è®¡æ¨¡å¼-æ¨¡æ¿æ–¹æ³•æ¨¡å¼/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr.RS">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/imgs/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mr.RS">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            
            <a href="/2019/10/19/è®¾è®¡æ¨¡å¼-æ¨¡æ¿æ–¹æ³•æ¨¡å¼/" class="post-title-link" itemprop="url">è®¾è®¡æ¨¡å¼-æ¨¡æ¿æ–¹æ³•æ¨¡å¼</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-10-19 14:32:49 / ä¿®æ”¹æ—¶é—´ï¼š15:59:14" itemprop="dateCreated datePublished" datetime="2019-10-19T14:32:49+08:00">2019-10-19</time>
            </span>
          
            

            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/è®¾è®¡æ¨¡å¼/" itemprop="url" rel="index">
                    <span itemprop="name">è®¾è®¡æ¨¡å¼</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="WHAT"><a href="#WHAT" class="headerlink" title="WHAT"></a>WHAT</h1><p>æ¨¡æ¿æ–¹æ³•æ˜¯ä¸€ç§åªéœ€è¦ä½¿ç”¨ç»§æ‰¿å°±å¯ä»¥å®ç°çš„è¾ƒä¸ºç®€å•çš„æ¨¡å¼ã€‚</p>
<p>æ¨¡æ¿æ–¹æ³•æ¨¡å¼ç”±ä¸¤éƒ¨åˆ†ç»“æ„ç»„æˆï¼Œç¬¬ä¸€éƒ¨åˆ†æ˜¯æŠ½è±¡çˆ¶ç±»ï¼Œç¬¬äºŒéƒ¨åˆ†æ˜¯å…·ä½“çš„å®ç°å­ç±»ã€‚é€šå¸¸åœ¨æŠ½è±¡çˆ¶ç±»ä¸­å°è£…äº†å­ç±»çš„ç®—æ³•æ¡†æ¶ï¼ŒåŒ…æ‹¬å®ç°ä¸€äº›å…¬å…±æ–¹æ³•åŠå°è£…<strong>å­ç±»ä¸­æ‰€æœ‰æ–¹æ³•çš„æ‰§è¡Œé¡ºåº</strong>ã€‚å­ç±»é€šè¿‡ç»§æ‰¿è¿™ä¸ªæŠ½è±¡ç±»ï¼Œä¹Ÿç»§æ‰¿äº†æ•´ä¸ªç®—æ³•ç»“æ„ï¼Œå¹¶ä¸”å¯ä»¥é€‰æ‹©é‡å†™çˆ¶ç±»çš„æ–¹æ³•ã€‚</p>
<p>ç¬¦åˆ OCP åŸåˆ™</p>
<h1 id="WHY"><a href="#WHY" class="headerlink" title="WHY"></a>WHY</h1><p>æ¨¡æ¿æ–¹æ³•æ¨¡å¼æ˜¯ä¸€ç§å…¸å‹çš„é€šè¿‡å°è£…å˜åŒ–æé«˜ç³»ç»Ÿæ‰©å±•æ€§çš„è®¾è®¡æ¨¡å¼ã€‚åœ¨ä¼ ç»Ÿçš„é¢å‘å¯¹è±¡è¯­ è¨€ä¸­ï¼Œä¸€ä¸ªè¿ç”¨äº†æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„ç¨‹åºä¸­ï¼Œå­ç±»çš„æ–¹æ³•ç§ç±»å’Œæ‰§è¡Œé¡ºåºéƒ½æ˜¯ä¸å˜çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬æŠŠ è¿™éƒ¨åˆ†é€»è¾‘æŠ½è±¡åˆ°çˆ¶ç±»çš„æ¨¡æ¿æ–¹æ³•é‡Œé¢ã€‚è€Œå­ç±»çš„æ–¹æ³•å…·ä½“æ€ä¹ˆå®ç°åˆ™æ˜¯å¯å˜çš„ï¼Œäºæ˜¯æˆ‘ä»¬æŠŠè¿™ éƒ¨åˆ†å˜åŒ–çš„é€»è¾‘å°è£…åˆ°å­ç±»ä¸­ã€‚é€šè¿‡å¢åŠ æ–°çš„å­ç±»ï¼Œæˆ‘ä»¬ä¾¿èƒ½ç»™ç³»ç»Ÿå¢åŠ æ–°çš„åŠŸèƒ½ï¼Œå¹¶ä¸éœ€è¦æ”¹ åŠ¨æŠ½è±¡çˆ¶ç±»ä»¥åŠå…¶ä»–å­ç±»ï¼Œè¿™ä¹Ÿæ˜¯ç¬¦åˆå¼€æ”¾-å°é—­åŸåˆ™çš„</p>
<h1 id="HOW"><a href="#HOW" class="headerlink" title="HOW"></a>HOW</h1><ul>
<li>åˆ†ç¦»å…±åŒç‚¹</li>
<li>å†™çˆ¶ç±»(å­ç±»çš„å…±åŒç‚¹)ï¼Œ<strong>ä¿è¯å­ç±»ä¸€å®šä¼šå®ç°(ä½¿ç”¨æŠ›å¼‚å¸¸ã€æŠ½è±¡ç±»/æŠ½è±¡æ–¹æ³•ã€æ„é€ å‡½æ•°ç­‰æ¥çº¦æŸ)</strong></li>
<li>å†™å­ç±»ï¼Œç»§æ‰¿çˆ¶ç±»ï¼Œå®ç°çˆ¶ç±»çš„æ–¹æ³•</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŠ›å¼‚å¸¸çº¦æŸç‰ˆ</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Beverage</span> </span>&#123;</span><br><span class="line">  boilWater() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"æŠŠæ°´ç…®æ²¸"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  brew() &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"å­ç±»åº”è¯¥å®ç°brewæ–¹æ³•"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  pourInCup() &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"å­ç±»åº”è¯¥å®ç°pourInCupæ–¹æ³•"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  addCondiments() &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">"å­ç±»åº”è¯¥å®ç°addCondimentsæ–¹æ³•"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">/* template method */</span></span><br><span class="line">  init() &#123;</span><br><span class="line">    <span class="keyword">this</span>.boilWater();</span><br><span class="line">    <span class="keyword">this</span>.brew();</span><br><span class="line">    <span class="keyword">this</span>.pourInCup();</span><br><span class="line">    <span class="keyword">this</span>.addCondiments();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Coffee</span> <span class="keyword">extends</span> <span class="title">Beverage</span> </span>&#123;</span><br><span class="line">  brew() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"ç”¨æ²¸æ°´å†²æ³¡å’–å•¡"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  pourInCup() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"æŠŠå’–å•¡å€’è¿›æ¯å­"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  addCondiments() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"åŠ ç³–å’Œç‰›å¥¶"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> coffee = <span class="keyword">new</span> Coffee();</span><br><span class="line">coffee.init();</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">"--------------------------"</span>);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tea</span> <span class="keyword">extends</span> <span class="title">Beverage</span> </span>&#123;</span><br><span class="line">  brew() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"ç”¨æ²¸æ°´æµ¸æ³¡èŒ¶å¶"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  pourInCup() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"æŠŠèŒ¶å€’è¿›æ¯å­"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  addCondiments() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"åŠ æŸ æª¬"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> tea = <span class="keyword">new</span> Tea();</span><br><span class="line">tea.init();</span><br><span class="line"></span><br><span class="line"><span class="comment">// é«˜é˜¶å‡½æ•°/æ„é€ å‡½æ•°çº¦æŸç‰ˆ</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Beverage</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(brew, pourInCup, addCondiments) &#123;</span><br><span class="line">    <span class="keyword">this</span>.brew = brew;</span><br><span class="line">    <span class="keyword">this</span>.pourInCup = pourInCup;</span><br><span class="line">    <span class="keyword">this</span>.addCondiments = addCondiments;</span><br><span class="line">  &#125;</span><br><span class="line">  boilWater() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"æŠŠæ°´ç…®æ²¸"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  init() &#123;</span><br><span class="line">    <span class="keyword">this</span>.boilWater();</span><br><span class="line">    <span class="keyword">this</span>.brew();</span><br><span class="line">    <span class="keyword">this</span>.pourInCup();</span><br><span class="line">    <span class="keyword">this</span>.addCondiments();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Coffee</span> <span class="keyword">extends</span> <span class="title">Beverage</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>() &#123;</span><br><span class="line">    <span class="keyword">super</span>(</span><br><span class="line">      () =&gt; <span class="built_in">console</span>.log(<span class="string">"ç”¨æ²¸æ°´å†²æ³¡å’–å•¡"</span>),</span><br><span class="line">      () =&gt; <span class="built_in">console</span>.log(<span class="string">"æŠŠå’–å•¡å€’è¿›æ¯å­"</span>),</span><br><span class="line">      () =&gt; <span class="built_in">console</span>.log(<span class="string">"åŠ ç³–å’Œç‰›å¥¶"</span>)</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> coffee = <span class="keyword">new</span> Coffee();</span><br><span class="line">coffee.init();</span><br></pre></td></tr></table></figure>


        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://mrrs878.github.io/2019/10/17/è®¾è®¡æ¨¡å¼-OCP/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr.RS">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/imgs/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mr.RS">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            
            <a href="/2019/10/17/è®¾è®¡æ¨¡å¼-OCP/" class="post-title-link" itemprop="url">è®¾è®¡æ¨¡å¼-OCP</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-10-17 18:12:29" itemprop="dateCreated datePublished" datetime="2019-10-17T18:12:29+08:00">2019-10-17</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2019-10-19 14:33:05" itemprop="dateModified" datetime="2019-10-19T14:33:05+08:00">2019-10-19</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/è®¾è®¡æ¨¡å¼/" itemprop="url" rel="index">
                    <span itemprop="name">è®¾è®¡æ¨¡å¼</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="å¼€æ”¾å°é—­åŸåˆ™"><a href="#å¼€æ”¾å°é—­åŸåˆ™" class="headerlink" title="å¼€æ”¾å°é—­åŸåˆ™"></a>å¼€æ”¾å°é—­åŸåˆ™</h2><p>å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å°é—­</p>
<p>å‡è®¾æˆ‘ä»¬æ˜¯ä¸€ä¸ªå¤§å‹ Web é¡¹ç›®çš„ç»´æŠ¤äººå‘˜ï¼Œåœ¨æ¥æ‰‹è¿™ä¸ªé¡¹ç›®æ—¶ï¼Œå‘ç°å®ƒå·²ç»æ‹¥æœ‰ 10 ä¸‡è¡Œä»¥ä¸Šçš„ JavaScript ä»£ç å’Œæ•°ç™¾ä¸ª JS æ–‡ä»¶ã€‚ ä¸ä¹…åæ¥åˆ°äº†ä¸€ä¸ªæ–°çš„éœ€æ±‚ï¼Œå³åœ¨ window.onload å‡½æ•°ä¸­æ‰“å°å‡ºé¡µé¢ä¸­çš„æ‰€æœ‰èŠ‚ç‚¹æ•°é‡</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ™®é€šç‰ˆ</span></span><br><span class="line"><span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">//åŸæœ‰ä»£ç </span></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">document</span>.getElementByName(<span class="string">"*"</span>).length);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// OCPç‰ˆ ---- AOP(é¢å‘åˆ‡é¢ç¼–ç¨‹)</span></span><br><span class="line"><span class="built_in">Function</span>.prototype.after = <span class="function"><span class="keyword">function</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> _self = <span class="keyword">this</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> ret = _self.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">    fn &amp;&amp; fn.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">Function</span>.prototype.before = <span class="function"><span class="keyword">function</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> _self = <span class="keyword">this</span>;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    fn &amp;&amp; fn.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">    <span class="keyword">return</span> _self.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">window</span>.onload = (<span class="built_in">window</span>.onload || <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;).after(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">document</span>.getElementByName(<span class="string">"*"</span>).length);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="ç¼–å†™ç¬¦åˆ-OCP-çš„ä»£ç "><a href="#ç¼–å†™ç¬¦åˆ-OCP-çš„ä»£ç " class="headerlink" title="ç¼–å†™ç¬¦åˆ OCP çš„ä»£ç "></a>ç¼–å†™ç¬¦åˆ OCP çš„ä»£ç </h2><p>å¼€æ”¾-å°é—­åŸåˆ™æ˜¯ä¸€ä¸ªçœ‹èµ·æ¥æ¯”è¾ƒè™šå¹»çš„åŸåˆ™ï¼Œå¹¶æ²¡æœ‰å®é™…çš„æ¨¡æ¿æ•™å¯¼æˆ‘ä»¬æ€æ ·äº¦æ­¥äº¦è¶‹åœ° å®ç°å®ƒã€‚ä½†è¿˜æ˜¯èƒ½æ‰¾åˆ°ä¸€äº›è®©ç¨‹åºå°½é‡éµå®ˆå¼€æ”¾-å°é—­åŸåˆ™çš„è§„å¾‹ï¼Œæ˜æ˜¾çš„å°±æ˜¯æ‰¾å‡ºç¨‹åºä¸­å°†è¦å‘ç”Ÿå˜åŒ–çš„åœ°æ–¹ï¼Œç„¶åæŠŠå˜åŒ–å°è£…èµ·æ¥ã€‚è¿‡å¤šçš„æ¡ä»¶è¯­å¥æ˜¯é€ æˆç¨‹åºè¿åå¼€æ”¾å°é—­åŸåˆ™çš„ä¸€ä¸ªå¸¸è§åŸå› ã€‚</p>
<h3 id="è¿ç”¨-AOP"><a href="#è¿ç”¨-AOP" class="headerlink" title="è¿ç”¨ AOP"></a>è¿ç”¨ AOP</h3><h3 id="åˆ©ç”¨å¤šæ€çš„æ€æƒ³"><a href="#åˆ©ç”¨å¤šæ€çš„æ€æƒ³" class="headerlink" title="åˆ©ç”¨å¤šæ€çš„æ€æƒ³"></a>åˆ©ç”¨å¤šæ€çš„æ€æƒ³</h3><h3 id="æ”¾ç½®-hook"><a href="#æ”¾ç½®-hook" class="headerlink" title="æ”¾ç½® hook"></a>æ”¾ç½® hook</h3><p>æˆ‘ä»¬åœ¨ç¨‹åºæœ‰å¯èƒ½å˜åŒ–çš„åœ°æ–¹æ”¾ç½®ä¸€ä¸ª hookï¼Œhook çš„è¿”å›ç»“æœå†³å®šäº†ç¨‹åºçš„ä¸‹ä¸€æ­¥èµ°å‘ï¼Œè¿™æ ·ä¸€æ¥åŸæœ¬çš„ä»£ç æ‰§è¡Œè·¯å¾„ä¸Šå°±å‡ºç°äº†ä¸€ä¸ªåˆ†å²”è·¯å£ï¼Œç¨‹åºæœªæ¥çš„æ‰§è¡Œæ–¹å‘è¢«é¢„åŸ‹ä¸‹å¤šç§å¯èƒ½æ€§</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Beverage</span> </span>&#123;</span><br><span class="line">  boilWater() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"æŠŠæ°´ç…®æ²¸"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  brew() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"å­ç±»å¿…é¡»é‡å†™brewæ–¹æ³•"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  pourInCup() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"å­ç±»å¿…é¡»é‡å†™pourInCupæ–¹æ³•"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  addCondiments() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"å­ç±»å¿…é¡»é‡å†™addCondimentsæ–¹æ³•"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// hook</span></span><br><span class="line">  customWantsCondiments() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  init() &#123;</span><br><span class="line">    <span class="keyword">this</span>.boilWater();</span><br><span class="line">    <span class="keyword">this</span>.brew();</span><br><span class="line">    <span class="keyword">this</span>.pourInCup();</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span>.customWantsCondiments()) <span class="keyword">this</span>.addCondiments();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CoffeeWithHook</span> <span class="keyword">extends</span> <span class="title">Beverage</span> </span>&#123;</span><br><span class="line">  brew() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"ç”¨æ²¸æ°´å†²æ³¡å’–å•¡"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  pourInCup() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"æŠŠå’–å•¡å€’è¿›æ¯"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  addCondiments() &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"åŠ ç³–å’Œç‰›å¥¶"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// hook</span></span><br><span class="line">  customWantsCondiments() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">window</span>.confirm(<span class="string">"è¯·é—®éœ€è¦é¥®æ–™å—?"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> CoffeeWithHook().init();</span><br></pre></td></tr></table></figure>

<h3 id="ä½¿ç”¨å›è°ƒå‡½æ•°"><a href="#ä½¿ç”¨å›è°ƒå‡½æ•°" class="headerlink" title="ä½¿ç”¨å›è°ƒå‡½æ•°"></a>ä½¿ç”¨å›è°ƒå‡½æ•°</h3><p>å›è°ƒå‡½æ•°æ˜¯ä¸€ç§ç‰¹æ®Šçš„æŒ‚é’©ã€‚æˆ‘ä»¬å¯ä»¥æŠŠä¸€éƒ¨åˆ†æ˜“äºå˜åŒ–çš„é€»è¾‘å°è£…åœ¨å›è°ƒå‡½æ•°é‡Œï¼Œç„¶åæŠŠ å›è°ƒå‡½æ•°å½“ä½œå‚æ•°ä¼ å…¥ä¸€ä¸ªç¨³å®šå’Œå°é—­çš„å‡½æ•°ä¸­ã€‚å½“å›è°ƒå‡½æ•°è¢«æ‰§è¡Œçš„æ—¶å€™ï¼Œç¨‹åºå°±å¯ä»¥å› ä¸ºå› è°ƒå‡½æ•°çš„å†…éƒ¨é€»è¾‘ä¸åŒï¼Œè€Œäº§ç”Ÿä¸åŒçš„ç»“æœã€‚</p>
<h3 id="ç­–ç•¥æ¨¡å¼"><a href="#ç­–ç•¥æ¨¡å¼" class="headerlink" title="ç­–ç•¥æ¨¡å¼"></a>ç­–ç•¥æ¨¡å¼</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> strategies = &#123;</span><br><span class="line">  ADD: <span class="function"><span class="keyword">function</span>(<span class="params">paramA, paramB</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> paramA + paramB;</span><br><span class="line">  &#125;,</span><br><span class="line">  SUB: <span class="function"><span class="keyword">function</span>(<span class="params">paramA, paramB</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> paramA - paramB;</span><br><span class="line">  &#125;,</span><br><span class="line">  MULTI: <span class="function"><span class="keyword">function</span>(<span class="params">paramA, paramB</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> paramA * paramB;</span><br><span class="line">  &#125;,</span><br><span class="line">  DIV: <span class="function"><span class="keyword">function</span>(<span class="params">paramA, paramB</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> paramA / paramB;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">const</span> calc = <span class="function"><span class="keyword">function</span>(<span class="params">paramA, paramB, type</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> strategies[type](paramA, paramB);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(calc(<span class="number">1</span>, <span class="number">2</span>, <span class="string">"ADD"</span>));</span><br><span class="line"><span class="built_in">console</span>.log(calc(<span class="number">1</span>, <span class="number">2</span>, <span class="string">"SUB"</span>));</span><br></pre></td></tr></table></figure>

<h3 id="é«˜é˜¶å‡½æ•°"><a href="#é«˜é˜¶å‡½æ•°" class="headerlink" title="é«˜é˜¶å‡½æ•°"></a>é«˜é˜¶å‡½æ•°</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> calc_ = R.curry(<span class="function"><span class="keyword">function</span>(<span class="params">paramA, paramB, fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> fn(paramA, paramB);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(calc_(<span class="number">2</span>, <span class="number">3</span>)(R.add));</span><br><span class="line"><span class="built_in">console</span>.log(calc_(<span class="number">2</span>, <span class="number">3</span>, R.add));</span><br></pre></td></tr></table></figure>

<h3 id="å‘å¸ƒ-è®¢é˜…æ¨¡å¼"><a href="#å‘å¸ƒ-è®¢é˜…æ¨¡å¼" class="headerlink" title="å‘å¸ƒ-è®¢é˜…æ¨¡å¼"></a>å‘å¸ƒ-è®¢é˜…æ¨¡å¼</h3><h3 id="æ¨¡æ¿æ–¹æ³•æ¨¡å¼"><a href="#æ¨¡æ¿æ–¹æ³•æ¨¡å¼" class="headerlink" title="æ¨¡æ¿æ–¹æ³•æ¨¡å¼"></a>æ¨¡æ¿æ–¹æ³•æ¨¡å¼</h3><h3 id="ä»£ç†æ¨¡å¼"><a href="#ä»£ç†æ¨¡å¼" class="headerlink" title="ä»£ç†æ¨¡å¼"></a>ä»£ç†æ¨¡å¼</h3><h3 id="èŒè´£é“¾æ¨¡å¼"><a href="#èŒè´£é“¾æ¨¡å¼" class="headerlink" title="èŒè´£é“¾æ¨¡å¼"></a>èŒè´£é“¾æ¨¡å¼</h3>
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://mrrs878.github.io/2019/10/16/æŸ¯é‡ŒåŒ–/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr.RS">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/imgs/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mr.RS">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            
            <a href="/2019/10/16/æŸ¯é‡ŒåŒ–/" class="post-title-link" itemprop="url">æŸ¯é‡ŒåŒ–</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2019-10-16 20:48:43" itemprop="dateCreated datePublished" datetime="2019-10-16T20:48:43+08:00">2019-10-16</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2019-10-17 09:11:17" itemprop="dateModified" datetime="2019-10-17T09:11:17+08:00">2019-10-17</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/awesome/" itemprop="url" rel="index">
                    <span itemprop="name">awesome</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="WHAT"><a href="#WHAT" class="headerlink" title="WHAT"></a>WHAT</h1><p>æŸ¯é‡ŒåŒ–æ˜¯ä¸€ç§å°†ä½¿ç”¨å¤šä¸ªå‚æ•°çš„ä¸€ä¸ªå‡½æ•°è½¬æ¢æˆä¸€ç³»åˆ—ä½¿ç”¨ä¸€ä¸ªå‚æ•°çš„å‡½æ•°çš„æŠ€æœ¯</p>
<h1 id="WHY"><a href="#WHY" class="headerlink" title="WHY"></a>WHY</h1><ul>
<li>å‚æ•°å¤ç”¨<br>å¦‚æœæ˜¯ç›¸åŒçš„å‚æ•°ï¼Œåœ¨è®¡ç®—ä¹‹åä¸éœ€è¦å†æ¬¡é‡æ–°ä¼ å‚è®¡ç®—</li>
<li>æå‰è¿”å›<br>å¤šæ¬¡è°ƒç”¨å¤šæ¬¡å†…éƒ¨åˆ¤æ–­ï¼Œå¯ä»¥ç›´æ¥æŠŠç¬¬ä¸€æ¬¡åˆ¤æ–­çš„ç»“æœè¿”å›å¤–éƒ¨æ¥æ”¶</li>
<li>å»¶è¿Ÿæ‰§è¡Œ<br>ç¼“å­˜å‚æ•°ï¼Œé¿å…é‡å¤çš„å»æ‰§è¡Œç¨‹åºï¼Œç­‰çœŸæ­£éœ€è¦ç»“æœçš„æ—¶å€™å†æ‰§è¡Œ</li>
</ul>
<h1 id="HOW"><a href="#HOW" class="headerlink" title="HOW"></a>HOW</h1><h2 id="å‚æ•°å¤ç”¨"><a href="#å‚æ•°å¤ç”¨" class="headerlink" title="å‚æ•°å¤ç”¨"></a>å‚æ•°å¤ç”¨</h2><p>å¸¸è§äºå‡½æ•°å¼ç¼–ç¨‹(functional programing)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">x</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">y</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">z</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> x + y + z;</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(add(<span class="number">1</span>)(<span class="number">2</span>)(<span class="number">3</span>)); <span class="comment">// 6</span></span><br></pre></td></tr></table></figure>

<h2 id="æå‰è¿”å›"><a href="#æå‰è¿”å›" class="headerlink" title="æå‰è¿”å›"></a>æå‰è¿”å›</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">addEvent</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">window</span>.addEventListener) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">el, type, fn, capture</span>) </span>&#123;</span><br><span class="line">      el.addEventListener(type, e =&gt; fn.call(el, e), capture);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params">el, type, fn</span>) </span>&#123;</span><br><span class="line">      el.attachEvent(<span class="string">"on"</span> + type, e =&gt; fn.call(el, e));</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> elBind = addEvent();</span><br><span class="line">elBind(<span class="built_in">document</span>.getElementById(<span class="string">"button"</span>), <span class="string">"click"</span>, e =&gt; <span class="built_in">console</span>.log(e), <span class="literal">true</span>);</span><br></pre></td></tr></table></figure>

<h2 id="å»¶è¿Ÿæ‰§è¡Œ"><a href="#å»¶è¿Ÿæ‰§è¡Œ" class="headerlink" title="å»¶è¿Ÿæ‰§è¡Œ"></a>å»¶è¿Ÿæ‰§è¡Œ</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">curryScore</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> _allScore = [];</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">arguments</span>.length === <span class="number">0</span>) <span class="keyword">return</span> fn.apply(<span class="literal">null</span>, _allScore);</span><br><span class="line">    <span class="keyword">else</span> _allScore = _allScore.concat([].slice.call(<span class="built_in">arguments</span>));</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> allScore = <span class="number">0</span>;</span><br><span class="line"><span class="keyword">const</span> curryAllScore = curryScore(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="built_in">arguments</span>.length; ++i) allScore += <span class="built_in">arguments</span>[i];</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">curryAllScore(<span class="number">2</span>);</span><br><span class="line">curryAllScore(<span class="number">3</span>);</span><br><span class="line">curryAllScore(<span class="number">4</span>);</span><br><span class="line">curryAllScore();</span><br><span class="line"><span class="built_in">console</span>.log(allScore);</span><br></pre></td></tr></table></figure>


        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

    
  </div>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="ä¸‹ä¸€é¡µ"></i></a>
  </nav>



          </div>
          

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image"
      src="/imgs/avatar.png"
      alt="Mr.RS">
  <p class="site-author-name" itemprop="name">Mr.RS</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">29</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-categories">
        
          
            <a href="/categories/">
          
        
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">åˆ†ç±»</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
          
            <a href="/tags/">
          
        
        <span class="site-state-item-count">27</span>
        <span class="site-state-item-name">æ ‡ç­¾</span>
        </a>
      </div>
    
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Mr.RS</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> å¼ºåŠ›é©±åŠ¨ v3.9.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">
      
    ä¸»é¢˜ â€“ <a href="https://pisces.theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.4.1
  </div>

        












        
      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js?v=3.1.0"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
<script src="/js/utils.js?v=7.4.1"></script><script src="/js/motion.js?v=7.4.1"></script>
<script src="/js/schemes/pisces.js?v=7.4.1"></script>
<script src="/js/next-boot.js?v=7.4.1"></script>



  





















  

  

  

</body>
</html>
