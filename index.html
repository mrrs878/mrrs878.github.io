<!DOCTYPE html>





<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.9.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/avatar.png?v=7.4.1">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/avatar.png?v=7.4.1">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/avatar.png?v=7.4.1">
  <link rel="mask-icon" href="/images/avatar.svg?v=7.4.1" color="#222">

<link rel="stylesheet" href="/css/main.css?v=7.4.1">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.4.1',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: 'å¤åˆ¶',
      copy_success: 'å¤åˆ¶æˆåŠŸ',
      copy_failure: 'å¤åˆ¶å¤±è´¥'
    },
    sidebarPadding: 40
  };
</script>

  <meta property="og:type" content="website">
<meta property="og:title" content="Mr.RS">
<meta property="og:url" content="https://mrrs878.github.io/index.html">
<meta property="og:site_name" content="Mr.RS">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Mr.RS">
  <link rel="canonical" href="https://mrrs878.github.io/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: true,
    isPost: false,
    isPage: false,
    isArchive: false
  };
</script>

  <title>Mr.RS</title>
  








  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Mr.RS</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">Read The Fucking Source Code!</p>
      
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
        
        
        <li class="menu-item menu-item-home">
      
    

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>é¦–é¡µ</a>

  </li>
      
    
      
      
        
        
        <li class="menu-item menu-item-about">
      
    

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>å…³äº</a>

  </li>
      
    
      
      
        
        
        <li class="menu-item menu-item-tags">
      
    

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>æ ‡ç­¾</a>

  </li>
      
    
      
      
        
        
        <li class="menu-item menu-item-categories">
      
    

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>åˆ†ç±»</a>

  </li>
      
    
      
      
        
        
        <li class="menu-item menu-item-archives">
      
    

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>å½’æ¡£</a>

  </li>
      
    
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
            

          <div class="content">
            

  <div class="posts-expand">
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://mrrs878.github.io/2020/03/06/Vue.jsç ”è¯»-4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr.RS">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/imgs/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mr.RS">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            
            <a href="/2020/03/06/Vue.jsç ”è¯»-4/" class="post-title-link" itemprop="url">Vue.jsç ”è¯»-4</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-03-06 23:29:53" itemprop="dateCreated datePublished" datetime="2020-03-06T23:29:53+08:00">2020-03-06</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-03-07 00:11:49" itemprop="dateModified" datetime="2020-03-07T00:11:49+08:00">2020-03-07</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Vue-js/" itemprop="url" rel="index">
                    <span itemprop="name">Vue.js</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="ç”Ÿå‘½å‘¨æœŸæ¦‚è§ˆ"><a href="#ç”Ÿå‘½å‘¨æœŸæ¦‚è§ˆ" class="headerlink" title="ç”Ÿå‘½å‘¨æœŸæ¦‚è§ˆ"></a>ç”Ÿå‘½å‘¨æœŸæ¦‚è§ˆ</h2><p><img src="https://mrrsblog.oss-cn-shanghai.aliyuncs.com/lifecycle.png" alt="ç”Ÿå‘½å‘¨æœŸ"></p>

        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://mrrs878.github.io/2020/03/05/Vue.jsç ”è¯»-3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr.RS">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/imgs/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mr.RS">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            
            <a href="/2020/03/05/Vue.jsç ”è¯»-3/" class="post-title-link" itemprop="url">Vue.jsç ”è¯»-3</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-03-05 22:54:17" itemprop="dateCreated datePublished" datetime="2020-03-05T22:54:17+08:00">2020-03-05</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-03-07 00:12:21" itemprop="dateModified" datetime="2020-03-07T00:12:21+08:00">2020-03-07</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Vue-js/" itemprop="url" rel="index">
                    <span itemprop="name">Vue.js</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="æ¨¡æ¿ç¼–è¯‘"><a href="#æ¨¡æ¿ç¼–è¯‘" class="headerlink" title="æ¨¡æ¿ç¼–è¯‘"></a>æ¨¡æ¿ç¼–è¯‘</h2><p>æ¨¡æ¿ç¼–è¯‘çš„ä¸»è¦ç›®æ ‡æ˜¯<strong>ç”Ÿæˆæ¸²æŸ“å‡½æ•°</strong>ã€‚è€Œæ¸²æŸ“å‡½æ•°çš„ä½œç”¨æ˜¯æ¯æ¬¡æ‰§è¡Œå®ƒï¼Œå®ƒå°±ä¼šä½¿ç”¨å½“å‰æœ€æ–°çš„çŠ¶æ€ç”Ÿæˆä¸€ä»½æ–°çš„vnodeï¼Œç„¶åä½¿ç”¨è¿™ä»½vnodeè¿›è¡Œæ¸²æŸ“ã€‚</p>
<h2 id="å°†æ¨¡æ¿ç¼–è¯‘æˆæ¸²æŸ“å‡½æ•°"><a href="#å°†æ¨¡æ¿ç¼–è¯‘æˆæ¸²æŸ“å‡½æ•°" class="headerlink" title="å°†æ¨¡æ¿ç¼–è¯‘æˆæ¸²æŸ“å‡½æ•°"></a>å°†æ¨¡æ¿ç¼–è¯‘æˆæ¸²æŸ“å‡½æ•°</h2><ul>
<li><p>å°†æ¨¡æ¿ç¼–è¯‘æˆASTï¼ˆè§£æå™¨ï¼‰</p>
</li>
<li><p>éå†ASTæ ‡è®°é™æ€èŠ‚ç‚¹ï¼ˆä¼˜åŒ–å™¨ï¼‰</p>
</li>
<li><p>ä½¿ç”¨ASTç”Ÿæˆæ¸²æŸ“å‡½æ•°ï¼ˆä»£ç ç”Ÿæˆå™¨ï¼‰</p>
<p><img src="https://mrrsblog.oss-cn-shanghai.aliyuncs.com/%E6%A8%A1%E6%9D%BF%E7%BC%96%E8%AF%91-0.png" alt="æ¨¡æ¿ç¼–è¯‘æ•´ä½“æµç¨‹"></p>
</li>
</ul>
<h2 id="è§£æå™¨"><a href="#è§£æå™¨" class="headerlink" title="è§£æå™¨"></a>è§£æå™¨</h2><p>å°†æ¨¡æ¿ç¼–è¯‘æˆAST</p>
<p>åœ¨è§£æå™¨å†…éƒ¨ï¼Œåˆ†æˆäº†å¾ˆå¤šå°è§£æå™¨ï¼Œå…¶ä¸­åŒ…æ‹¬è¿‡æ»¤è§£æå™¨ã€æ–‡æœ¬è§£æå™¨å’ŒHTMLè§£æå™¨ã€‚ç„¶åå†é€šè¿‡ä¸€æ¡ä¸»çº¿å°†è¿™äº›è§£æå™¨ç»„è£…åœ¨ä¸€èµ·ã€‚</p>
<p>HTMLè§£æå™¨æ˜¯è§£æå™¨ä¸­æœ€æ ¸å¿ƒçš„æ¨¡å—ï¼Œå®ƒçš„ä½œç”¨æ˜¯è§£æHTMLæ¨¡æ¿ï¼Œæ¯å½“è§£æåˆ°HTMLæ ‡ç­¾çš„å¼€å§‹ä½ç½®ã€ç»“æŸä½ç½®ã€æ–‡æœ¬æˆ–æ³¨é‡Šæ—¶ï¼Œéƒ½ä¼š<strong>è§¦å‘é’©å­å‡½æ•°</strong>ï¼Œç„¶åå°†ç›¸å…³ä¿¡æ¯é€šè¿‡å‚æ•°ä¼ é€’å‡ºæ¥ã€‚åœ¨è§£ææœŸé—´ï¼Œä½¿ç”¨æ ˆæ¥è®°å½•å±‚çº§å…³ç³»ï¼ˆè§¦å‘starté’©å­å‡½æ•°æ—¶å…¥æ ˆï¼Œè§¦å‘endé’©å­å‡½æ•°æ—¶å‡ºæ ˆï¼‰ã€‚</p>
<p>äº‹å®ä¸Šï¼Œè§£æHTMLæ¨¡æ¿çš„è¿‡ç¨‹å°±æ˜¯å¾ªç¯çš„è¿‡ç¨‹ï¼Œç®€å•æ¥è¯´å°±æ˜¯ç”¨HTMLæ¨¡æ¿å­—ç¬¦ä¸²æ¥å¾ªç¯ï¼Œæ¯è½®å¾ªç¯éƒ½ä»HTMLæ¨¡æ¿ä¸­æˆªå–ä¸€å°æ®µå­—ç¬¦ä¸²ï¼Œç„¶åé‡å¤ä¸Šè¿°è¿‡ç¨‹ğŸ‘†ï¼Œç›´åˆ°HTMLæ¨¡æ¿è¢«æˆªæˆä¸€ä¸ªç©ºå­—ç¬¦ä¸²æ—¶ç»“æŸã€‚</p>
<p>æ–‡æœ¬è§£æå™¨çš„ä¸»è¦ä½œç”¨æ˜¯å¯¹HTMLè§£æå™¨è§£æå‡ºæ¥çš„æ–‡æœ¬è¿›è¡ŒäºŒæ¬¡åŠ å·¥ï¼Œå¤„ç†å¸¦å˜é‡çš„æ–‡æœ¬ã€‚HTMLè§£æå™¨åœ¨è§£ææ–‡æœ¬æ—¶å¹¶ä¸ä¼šåŒºåˆ†æ–‡æœ¬æ˜¯å¦æ˜¯å¸¦æœ‰å˜é‡çš„æ–‡æœ¬ï¼Œå¦‚æœæ˜¯çº¯æ–‡æœ¬ï¼Œä¸éœ€è¦è¿›è¡Œä»»ä½•å¤„ç†ï¼›ä½†å¦‚æœæ˜¯å¸¦å˜é‡çš„æ–‡æœ¬é‚£ä¸ªéœ€è¦ä½¿ç”¨æ–‡æœ¬è§£æå™¨è¿›ä¸€æ­¥è§£æã€‚</p>
<h2 id="ä¼˜åŒ–å™¨"><a href="#ä¼˜åŒ–å™¨" class="headerlink" title="ä¼˜åŒ–å™¨"></a>ä¼˜åŒ–å™¨</h2><p>ä¼˜åŒ–å™¨çš„ç›®æ ‡æ˜¯éå†ASTï¼Œæ£€æµ‹å‡ºæ‰€æœ‰é™æ€å­æ ‘ï¼ˆæ°¸è¿œä¸ä¼šå˜åŒ–çš„DOMèŠ‚ç‚¹ï¼‰å¹¶ç»™å…¶æ‰“æ ‡è®°</p>
<p>æ ‡è®°é™æ€å­æ ‘æœ‰ä¸¤ç‚¹å¥½å¤„ï¼š</p>
<ul>
<li>æ¯æ¬¡é‡æ–°æ¸²æŸ“æ—¶ï¼Œä¸éœ€è¦ä¸ºé™æ€å­æ ‘åˆ›å»ºæ–°èŠ‚ç‚¹</li>
<li>åœ¨è™šæ‹ŸDOMä¸­æ‰“è¡¥ä¸çš„è¿‡ç¨‹ä¸­å¯ä»¥è·³è¿‡</li>
</ul>
<p>ä¼˜åŒ–å™¨å†…éƒ¨å®ç°ä¸»è¦æœ‰ä»¥ä¸‹ä¸¤ä¸ªæ­¥éª¤ï¼š</p>
<ol>
<li><p>åœ¨ASTä¸­æ‰¾å‡ºæ‰€æœ‰é™æ€èŠ‚ç‚¹å¹¶æ‰“ä¸Šæ ‡è®°ï¼ˆ<code>static === true</code>ï¼‰</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>æˆ‘æ˜¯ä¸€ä¸ªé™æ€èŠ‚ç‚¹<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>åœ¨ASTä¸­ä¾›æ‰¾å‡ºæ‰€æœ‰é™æ€æ ¹èŠ‚ç‚¹å¹¶æ‰“ä¸Šæ ‡è®°ï¼ˆ<code>staticRoot === true</code>ï¼‰</p>
<p>å¦‚æœä¸€ä¸ªèŠ‚ç‚¹ä¸‹è¾¹çš„æ‰€æœ‰<strong>å­èŠ‚ç‚¹éƒ½æ˜¯é™æ€èŠ‚ç‚¹</strong>ï¼Œå¹¶ä¸”å®ƒçš„<strong>çˆ¶çº§æ˜¯åŠ¨æ€èŠ‚ç‚¹</strong>ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯é™æ€æ ¹èŠ‚ç‚¹</p>
</li>
</ol>
<h2 id="ä»£ç ç”Ÿæˆå™¨"><a href="#ä»£ç ç”Ÿæˆå™¨" class="headerlink" title="ä»£ç ç”Ÿæˆå™¨"></a>ä»£ç ç”Ÿæˆå™¨</h2><p>ä»£ç ç”Ÿæˆå™¨æ˜¯æ¨¡æ¿ç¼–è¯‘çš„æœ€åä¸€æ­¥ï¼Œå®ƒçš„ä½œç”¨æ˜¯å°†ASTè½¬æ¢æˆæ¸²æŸ“å‡½æ•°ä¸­çš„å†…å®¹ï¼Œè¿™ä¸ªå†…å®¹ç§°ä¸º<strong>ä»£ç å­—ç¬¦ä¸²</strong>ã€‚ä¹‹åäº¤ç”±æ¸²æŸ“å‡½æ•°å¯¼å‡ºåˆ°å¤–ç•Œã€‚</p>
<p>ä»£ç ç”Ÿæˆå™¨å…¶å®å°±æ˜¯å­—ç¬¦ä¸²æ‹¼æ¥çš„è¿‡ç¨‹ã€‚é€šè¿‡é€’å½’ASTæ¥ç”Ÿæˆå­—ç¬¦ä¸²ï¼Œæœ€å…ˆç”Ÿæˆæ ¹èŠ‚ç‚¹ï¼Œç„¶ååœ¨å­èŠ‚ç‚¹å­—ç¬¦ä¸²ç”Ÿæˆåï¼Œå°†å…¶æ‹¼æ¥åœ¨æ ¹èŠ‚ç‚¹çš„å‚æ•°ä¸­ï¼Œå­èŠ‚ç‚¹çš„å­èŠ‚ç‚¹æ‹¼æ¥åœ¨å­èŠ‚ç‚¹çš„å‚æ•°ä¸­ï¼Œè¿™æ ·ä¸€å±‚ä¸€å±‚åœ°æ‹¼æ¥ï¼Œç›´åˆ°æœ€åæ‹¼æ¥æˆå®Œæ•´çš„å­—ç¬¦ä¸²ã€‚</p>

        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://mrrs878.github.io/2020/03/04/Vue.jsç ”è¯»-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr.RS">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/imgs/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mr.RS">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            
            <a href="/2020/03/04/Vue.jsç ”è¯»-2/" class="post-title-link" itemprop="url">Vue.jsç ”è¯»-2</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-03-04 23:18:13" itemprop="dateCreated datePublished" datetime="2020-03-04T23:18:13+08:00">2020-03-04</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-03-07 00:13:51" itemprop="dateModified" datetime="2020-03-07T00:13:51+08:00">2020-03-07</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Vue-js/" itemprop="url" rel="index">
                    <span itemprop="name">Vue.js</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Vue-jsä¸ºä»€ä¹ˆè¦å¼•å…¥è™šæ‹ŸDOM"><a href="#Vue-jsä¸ºä»€ä¹ˆè¦å¼•å…¥è™šæ‹ŸDOM" class="headerlink" title="Vue.jsä¸ºä»€ä¹ˆè¦å¼•å…¥è™šæ‹ŸDOM"></a>Vue.jsä¸ºä»€ä¹ˆè¦å¼•å…¥è™šæ‹ŸDOM</h2><p>è™šæ‹ŸDOMæ˜¯é€šè¿‡çŠ¶æ€ç”Ÿæˆä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹æ ‘ï¼Œç„¶åä½¿ç”¨è™šæ‹ŸèŠ‚ç‚¹æ ‘è¿›è¡Œæ¸²æŸ“ã€‚åœ¨æ¸²æŸ“ä¹‹å‰ï¼Œä¼šä½¿ç”¨æ–°ç”Ÿæˆçš„è™šæ‹ŸèŠ‚ç‚¹æ ‘å’Œä¸Šæ¬¡ç”Ÿæˆçš„è™šæ‹ŸèŠ‚ç‚¹æ ‘è¿›è¡Œå¯¹æ¯”ï¼Œåªæ¸²æŸ“ä¸åŒçš„éƒ¨åˆ†</p>
<p>åœ¨Vue.jsä¸­ï¼Œå½“çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®ƒåœ¨ä¸€å®šç¨‹åº¦ä¸ŠçŸ¥é“å“ªäº›èŠ‚ç‚¹ä½¿ç”¨äº†è¿™ä¸ªçŠ¶æ€ï¼Œä»è€Œå¯¹è¿™äº›èŠ‚ç‚¹è¿›è¡Œæ›´æ–°æ“ä½œï¼Œæ ¹æœ¬ä¸éœ€è¦æ¯”å¯¹ï¼ˆVue.js 1.0ï¼‰ã€‚ä½†è¿™æ ·åšç¼ºç‚¹å¾ˆæ˜æ˜¾ï¼šå› ä¸ºç²’åº¦å¤ªç»†ï¼Œæ¯ä¸€ä¸ªç»‘å®šéƒ½ä¼šæœ‰ä¸€ä¸ªå¯¹åº”çš„watcheræ¥è§‚å¯ŸçŠ¶æ€çš„å˜åŒ–ï¼Œè¿™æ ·å°±ä¼šæœ‰ä¸€äº›å†…å­˜å¼€é”€ä»¥åŠä¾èµ–è¿½è¸ªçš„å¼€é”€ã€‚å½“çŠ¶æ€è¢«è¶Šæ¥è¶Šå¤šçš„èŠ‚ç‚¹ä½¿ç”¨æ—¶ï¼Œå¼€é”€å°±è¶Šå¤§ã€‚</p>
<p>å› æ­¤Vue.js 2.0å¼€å§‹é€‰æ‹©äº†ä¸€ä¸ªä¸­ç­‰ç²’åº¦çš„è§£å†³æ–¹æ¡ˆï¼Œé‚£å°±æ˜¯å¼•å…¥è™šæ‹ŸDOMã€‚ç»„ä»¶çº§åˆ«æ˜¯ä¸€ä¸ªwatcherå®ä¾‹ã€‚å°±æ˜¯è¯´å³ä½¿ä¸€ä¸ªç»„ä»¶å†…æœ‰10ä¸ªèŠ‚ç‚¹ä½¿ç”¨äº†æŸä¸ªçŠ¶æ€ï¼Œä½†å…¶å®ä¹Ÿåªæœ‰ä¸€ä¸ªwatcheråœ¨è§‚å¯Ÿè¿™ä¸ªçŠ¶æ€çš„å˜åŒ–ã€‚æ‰€ä»¥å½“è¿™ä¸ªçŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œåªèƒ½é€šçŸ¥åˆ°ç»„ä»¶ï¼Œç„¶åç»„ä»¶å†…éƒ¨é€šè¿‡è™šæ‹ŸDOMå»è¿›è¡Œæ¯”å¯¹æ¸²æŸ“ï¼Œè¿™æ˜¯ä¸€ä¸ªæŠ˜ä¸­æ–¹æ¡ˆ</p>
<p><img src="https://mrrsblog.oss-cn-shanghai.aliyuncs.com/%E8%99%9A%E6%8B%9FDOM-0.png" alt="è™šæ‹ŸDOM"></p>
<h2 id="VNode"><a href="#VNode" class="headerlink" title="VNode"></a>VNode</h2><p>vnodeå¯ä»¥ç†è§£æˆèŠ‚ç‚¹æè¿°å¯¹è±¡ï¼Œå®ƒæè¿°äº†åº”è¯¥æ€æ ·å»åˆ›å»ºçœŸå®çš„DOMèŠ‚ç‚¹ã€‚æ¸²æŸ“è§†å›¾çš„è¿‡ç¨‹æ˜¯å…ˆåˆ›å»ºvnodeï¼Œç„¶åå†ä½¿ç”¨vnodeå»ç”ŸæˆçœŸå®çš„DOMå…ƒç´ ï¼Œæœ€åå†æ’å…¥åˆ°é¡µé¢æ¸²æŸ“è§†å›¾</p>
<p>vnodeçš„ç±»å‹åŒ…æ‹¬ï¼šæ³¨é‡ŠèŠ‚ç‚¹(isComment=true)ã€æ–‡æœ¬èŠ‚ç‚¹ã€å…ƒç´ èŠ‚ç‚¹(å…·æœ‰tagå±æ€§)ã€ç»„ä»¶èŠ‚ç‚¹ã€å‡½æ•°å¼ç»„ä»¶ã€å…‹éš†èŠ‚ç‚¹</p>
<p><img src="https://mrrsblog.oss-cn-shanghai.aliyuncs.com/%E8%99%9A%E6%8B%9FDOM-1.png" alt="è™šæ‹ŸDOM"></p>
<h2 id="patch"><a href="#patch" class="headerlink" title="patch"></a>patch</h2><p>å¯¹æ¯”ä¸¤ä¸ªvnodeä¹‹é—´çš„å·®å¼‚åªæ˜¯patchçš„ä¸€éƒ¨åˆ†ï¼Œè¿™æ˜¯æ‰‹æ®µï¼Œè€Œä¸æ˜¯ç›®çš„ã€‚patchçš„ç›®çš„æ˜¯ä¿®æ”¹DOMèŠ‚ç‚¹ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºæ¸²æŸ“è§†å›¾ã€‚åŒ…æ‹¬ï¼šåˆ›å»ºæ–°å¢çš„èŠ‚ç‚¹ã€åˆ é™¤å·²ç»åºŸå¼ƒçš„èŠ‚ç‚¹ã€ä¿®æ”¹éœ€è¦æ›´æ–°çš„èŠ‚ç‚¹</p>
<p><img src="https://mrrsblog.oss-cn-shanghai.aliyuncs.com/patch-0.png?Expires=1583420572&OSSAccessKeyId=TMP.hjhtL9MdRVoHgdakNGPhFUhvzRBHZ8NZdFctu4eUY87cabdbgdML5JxyUJXKRJ1Dhq46BY9Sog38URsbZk7cwJH11QV1WYvJwFjbgwRLp8WapW6SY7H9dvqx9jyTW2.tmp&Signature=36zN3WRY7qvKoal85QdDXOhAGlg%3D" alt></p>
<ul>
<li><p>åˆ›å»ºæ–°èŠ‚ç‚¹</p>
<p>äº‹å®ä¸Šï¼Œåªæœ‰ä¸‰ç§ç±»å‹çš„èŠ‚ç‚¹ä¼šè¢«åˆ›å»ºå¹¶æ’å…¥åˆ°DOMä¸­ï¼šå…ƒç´ èŠ‚ç‚¹ã€æ³¨é‡ŠèŠ‚ç‚¹ã€æ–‡æœ¬èŠ‚ç‚¹</p>
<ul>
<li>oldVnodeä¸­ä¸å­˜åœ¨è€Œvnodeä¸­å­˜åœ¨</li>
<li>oldVnodeå’Œvnodeå®Œå…¨ä¸æ˜¯åŒä¸€ä¸ªèŠ‚ç‚¹</li>
</ul>
<p><img src="https://mrrsblog.oss-cn-shanghai.aliyuncs.com/%E8%99%9A%E6%8B%9FDOM-2.png" alt="åˆ›å»ºèŠ‚ç‚¹"></p>
</li>
<li><p>åˆ é™¤èŠ‚ç‚¹</p>
<p>æŸä¸ªèŠ‚ç‚¹åªåœ¨oldVnodeä¸­å­˜åœ¨</p>
</li>
<li><p>æ›´æ–°èŠ‚ç‚¹</p>
<p>oldVnodeå’Œvnodeç›¸åŒ</p>
<p><img src="https://mrrsblog.oss-cn-shanghai.aliyuncs.com/%E8%99%9A%E6%8B%9FDOM-3.png" alt="æ›´æ–°èŠ‚ç‚¹"></p>
</li>
</ul>

        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://mrrs878.github.io/2020/03/03/Vue.jsç ”è¯»-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr.RS">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/imgs/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mr.RS">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            
            <a href="/2020/03/03/Vue.jsç ”è¯»-1/" class="post-title-link" itemprop="url">Vue.jsç ”è¯»-1</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-03-03 23:15:13 / ä¿®æ”¹æ—¶é—´ï¼š23:18:31" itemprop="dateCreated datePublished" datetime="2020-03-03T23:15:13+08:00">2020-03-03</time>
            </span>
          
            

            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Vue-js/" itemprop="url" rel="index">
                    <span itemprop="name">Vue.js</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>ç®€æ˜“ç‰ˆå“åº”å¼ï¼ˆProxy + Observer/Watcher/Depï¼‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> uid = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">parsePath</span>(<span class="params">obj, path</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (path === <span class="string">""</span>) <span class="keyword">return</span> obj</span><br><span class="line">    <span class="keyword">return</span> path.split(<span class="string">"."</span>).reduce(<span class="function">(<span class="params">data, current</span>) =&gt;</span> data[current], obj)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">defineReactive</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> data !== <span class="string">"object"</span>) <span class="keyword">return</span> data</span><br><span class="line">    <span class="keyword">let</span> dep = <span class="keyword">new</span> Dep()</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Proxy</span>(data, &#123;</span><br><span class="line">        <span class="keyword">set</span>: (target, prop, value, receiver) =&gt; &#123;</span><br><span class="line">            <span class="keyword">const</span> oldVal = target[prop]</span><br><span class="line">            <span class="keyword">const</span> res = <span class="built_in">Reflect</span>.set(target, prop, defineReactive(value), receiver)</span><br><span class="line">            <span class="keyword">if</span> (oldVal !== value) dep.notify()</span><br><span class="line">            <span class="keyword">return</span> res</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="keyword">get</span>: (target, prop, receiver) =&gt; &#123;</span><br><span class="line">            dep.depend()</span><br><span class="line">            <span class="keyword">return</span> <span class="built_in">Reflect</span>.get(target, prop, receiver)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Observer</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span> (vm) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">typeof</span> vm !== <span class="string">"object"</span>) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">"vm must be an object"</span>)</span><br><span class="line">        <span class="keyword">this</span>.walk(vm)</span><br><span class="line">        <span class="keyword">return</span> defineReactive(vm)</span><br><span class="line">    &#125;</span><br><span class="line">    walk (vm) &#123;</span><br><span class="line">        <span class="built_in">Object</span>.keys(vm).forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">typeof</span> vm[item] === <span class="string">"object"</span>) <span class="keyword">this</span>.walk(vm[item])</span><br><span class="line">            vm[item] = defineReactive(vm[item])</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dep</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span> () &#123;</span><br><span class="line">        <span class="keyword">this</span>.id = uid++</span><br><span class="line">        <span class="keyword">this</span>.subs = []</span><br><span class="line">    &#125;</span><br><span class="line">    addSub (sub) &#123;</span><br><span class="line">        <span class="keyword">this</span>.subs.push(sub)</span><br><span class="line">    &#125;</span><br><span class="line">    depend () &#123;</span><br><span class="line">        Dep.target &amp;&amp; Dep.target.addDep(<span class="keyword">this</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    notify () &#123;</span><br><span class="line">        <span class="keyword">this</span>.subs.slice().forEach(<span class="function"><span class="params">item</span> =&gt;</span> item.update())</span><br><span class="line">    &#125;</span><br><span class="line">    removeSub (sub) &#123;</span><br><span class="line">        <span class="keyword">const</span> index = <span class="keyword">this</span>.subs.indexOf(sub)</span><br><span class="line">        index &gt; <span class="number">-1</span> &amp;&amp; <span class="keyword">this</span>.subs.splice(index, <span class="number">1</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Watcher</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span> (vm, exp, cb) &#123;</span><br><span class="line">        <span class="keyword">this</span>.vm = vm</span><br><span class="line">        <span class="keyword">this</span>.exp = exp</span><br><span class="line">        <span class="keyword">this</span>.cb = cb</span><br><span class="line">        <span class="keyword">this</span>.deps = []</span><br><span class="line">        <span class="keyword">this</span>.depIds = <span class="keyword">new</span> <span class="built_in">Set</span>()</span><br><span class="line">        <span class="keyword">this</span>.value = <span class="keyword">this</span>.get() </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">get</span> () &#123;</span><br><span class="line">        Dep.target = <span class="keyword">this</span></span><br><span class="line">        <span class="keyword">let</span> value = parsePath(<span class="keyword">this</span>.vm, <span class="keyword">this</span>.exp)</span><br><span class="line">        Dep.target = <span class="literal">undefined</span></span><br><span class="line">        <span class="keyword">return</span> value</span><br><span class="line">    &#125;</span><br><span class="line">    update () &#123;</span><br><span class="line">        <span class="keyword">const</span> oldValue = <span class="keyword">this</span>.value</span><br><span class="line">        <span class="keyword">this</span>.value = <span class="keyword">this</span>.get()</span><br><span class="line">        <span class="keyword">this</span>.cb.call(<span class="keyword">this</span>.vm, <span class="keyword">this</span>.value, oldValue)</span><br><span class="line">    &#125;</span><br><span class="line">    addDep (dep) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.depIds.has(dep.id)) <span class="keyword">return</span></span><br><span class="line">        <span class="keyword">this</span>.depIds.add(dep.id)</span><br><span class="line">        <span class="keyword">this</span>.deps.push(dep)</span><br><span class="line">        dep.addSub(<span class="keyword">this</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    teardown () &#123;</span><br><span class="line">        <span class="keyword">this</span>.deps.forEach(<span class="function"><span class="params">item</span> =&gt;</span> item.removeSub(<span class="keyword">this</span>))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">watch</span>(<span class="params">vm, exp, cb, options = &#123;&#125;</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> watcher = <span class="keyword">new</span> Watcher(vm, exp, cb)</span><br><span class="line">    <span class="keyword">if</span> (options.immediate) cb.call(vm, watcher.value)</span><br><span class="line">    <span class="keyword">return</span> watcher.teardown.bind(watcher)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; Observer, watch &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"./mvvm.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> data = <span class="keyword">new</span> Observer(&#123;</span></span><br><span class="line">        student: &#123;</span><br><span class="line"><span class="javascript">            name: <span class="string">"tom"</span>,</span></span><br><span class="line">            age: 23</span><br><span class="line">        &#125;,</span><br><span class="line">        address: &#123;</span><br><span class="line">            province: &#123;</span><br><span class="line">                id: 41,</span><br><span class="line"><span class="javascript">                view: <span class="string">"æ²³å—"</span></span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line"><span class="javascript">        friends: [ <span class="string">"zhangsan"</span>, <span class="string">"lisi"</span>, <span class="string">"wangwu"</span> ],</span></span><br><span class="line">    &#125;)</span><br><span class="line"><span class="javascript">    <span class="keyword">new</span> Watcher(data, <span class="string">"student"</span>, val =&gt; &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">'update student'</span>, val)</span></span><br><span class="line">    &#125;)</span><br><span class="line"><span class="javascript">    <span class="keyword">new</span> Watcher(data, <span class="string">"student.name"</span>, val =&gt; &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">'update student.name'</span>, val)</span></span><br><span class="line">    &#125;)</span><br><span class="line"><span class="javascript">    <span class="keyword">new</span> Watcher(data, <span class="string">"student.age"</span>, val =&gt; &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">'update student.age'</span>, val)</span></span><br><span class="line">    &#125;)</span><br><span class="line"><span class="javascript">    <span class="keyword">new</span> Watcher(data, <span class="string">"address.province.id"</span>, val =&gt; &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">"update address.province.id"</span>, val);</span></span><br><span class="line">    &#125;)</span><br><span class="line"><span class="javascript">    <span class="keyword">new</span> Watcher(data, <span class="string">"friends.length"</span>, val =&gt; &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">'update student.friends'</span>, data.friends[val - <span class="number">1</span>]);</span></span><br><span class="line">    &#125;)</span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> unwatch = watch(data, <span class="string">"address.province.view"</span>, val =&gt; &#123;</span></span><br><span class="line"><span class="javascript">        <span class="built_in">console</span>.log(<span class="string">'address.province.view'</span>, val);</span></span><br><span class="line">    &#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>


        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://mrrs878.github.io/2020/03/02/Vue.jsç ”è¯»-0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr.RS">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/imgs/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mr.RS">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            
            <a href="/2020/03/02/Vue.jsç ”è¯»-0/" class="post-title-link" itemprop="url">Vue.jsç ”è¯»-0</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-03-02 23:21:38" itemprop="dateCreated datePublished" datetime="2020-03-02T23:21:38+08:00">2020-03-02</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-03-07 00:14:34" itemprop="dateModified" datetime="2020-03-07T00:14:34+08:00">2020-03-07</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Vue-js/" itemprop="url" rel="index">
                    <span itemprop="name">Vue.js</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Document-createDocumentFragment"><a href="#Document-createDocumentFragment" class="headerlink" title="Document.createDocumentFragment()"></a>Document.createDocumentFragment()</h2><p><code>DocumentFragments</code> æ˜¯DOMèŠ‚ç‚¹ã€‚å®ƒä»¬ä¸æ˜¯ä¸»DOMæ ‘çš„ä¸€éƒ¨åˆ†ã€‚é€šå¸¸çš„ç”¨ä¾‹æ˜¯åˆ›å»ºæ–‡æ¡£ç‰‡æ®µï¼Œå°†å…ƒç´ é™„åŠ åˆ°æ–‡æ¡£ç‰‡æ®µï¼Œç„¶åå°†æ–‡æ¡£ç‰‡æ®µé™„åŠ åˆ°DOMæ ‘ã€‚åœ¨DOMæ ‘ä¸­ï¼Œæ–‡æ¡£ç‰‡æ®µè¢«å…¶æ‰€æœ‰çš„å­å…ƒç´ æ‰€ä»£æ›¿ã€‚</p>
<p>å› ä¸ºæ–‡æ¡£ç‰‡æ®µå­˜åœ¨äº<strong>å†…å­˜ä¸­</strong>ï¼Œå¹¶ä¸åœ¨DOMæ ‘ä¸­ï¼Œæ‰€ä»¥å°†å­å…ƒç´ æ’å…¥åˆ°æ–‡æ¡£ç‰‡æ®µæ—¶ä¸ä¼šå¼•èµ·é¡µé¢<a href="https://developer.mozilla.org/zh-CN/docs/Glossary/Reflow" target="_blank" rel="noopener">å›æµ</a>ï¼ˆå¯¹å…ƒç´ ä½ç½®å’Œå‡ ä½•ä¸Šçš„è®¡ç®—ï¼‰ã€‚å› æ­¤ï¼Œä½¿ç”¨æ–‡æ¡£ç‰‡æ®µé€šå¸¸ä¼šå¸¦æ¥æ›´å¥½çš„æ€§èƒ½ã€‚</p>
<h2 id="node-nodeType"><a href="#node-nodeType" class="headerlink" title="node.nodeType"></a>node.nodeType</h2><p>1 å…ƒç´ </p>
<p>2 å±æ€§</p>
<p>3 æ–‡æœ¬</p>
<p>8 æ³¨é‡Š</p>
<p>9 document</p>
<h2 id="node-textContextã€node-innerText"><a href="#node-textContextã€node-innerText" class="headerlink" title="node.textContextã€node.innerText"></a>node.textContextã€node.innerText</h2><p><code>textContent</code>ä¼šè·å–æ‰€æœ‰å…ƒç´ çš„å†…å®¹ï¼ŒåŒ…æ‹¬<code>script</code>å’Œ<code>style</code>å…ƒç´ ã€‚ç„¶è€Œ<code>innerText</code>åªå±•ç¤ºç»™äººçœ‹çš„å…ƒç´ </p>
<p><code>textContext</code>ä¼šè¿”å›èŠ‚ç‚¹ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ ï¼Œç›¸åï¼Œ<code>innerText</code>å—<code>CSS</code>æ ·å¼çš„å½±å“ï¼Œä¸ä¼šè¿”å›éšè—å…ƒç´ çš„æ–‡æœ¬ï¼Œå¹¶ä¸”ä¼šè§¦å‘<a href="https://developer.mozilla.org/zh-CN/docs/Glossary/Reflow" target="_blank" rel="noopener">å›æµ</a>å»ç¡®ä¿æ˜¯æœ€æ–°çš„è®¡ç®—æ ·å¼</p>
<p>ä¸<code>textContext</code>ä¸åŒçš„æ˜¯ï¼Œåœ¨IE11ä»¥åŠä¸‹ç‰ˆæœ¬ä¸­ï¼Œå¯¹<code>innerText</code>è¿›è¡Œä¿®æ”¹ï¼Œä¸ä»…ä¼šç§»é™¤å½“å‰å…ƒç´ çš„å­èŠ‚ç‚¹ï¼Œè€Œä¸”ä¼šæ°¸ä¹…æ€§çš„ç ´åæ‰€æœ‰åä»£æ–‡æœ¬èŠ‚ç‚¹ï¼Œåœ¨ä¹‹åä¸å¯èƒ½å†æ¬¡å°†èŠ‚ç‚¹åˆ°ä»»ä½•å…¶ä»–å…ƒç´ æˆ–åŒåŒä¸€å…ƒç´ </p>
<h2 id="é€šè¿‡å­—ç¬¦ä¸²è·¯å¾„è·å–å¯¹è±¡å±æ€§çš„ç®€å•æ–¹æ³•ï¼ˆæš‚ä¸æ”¯æŒ-ï¼‰"><a href="#é€šè¿‡å­—ç¬¦ä¸²è·¯å¾„è·å–å¯¹è±¡å±æ€§çš„ç®€å•æ–¹æ³•ï¼ˆæš‚ä¸æ”¯æŒ-ï¼‰" class="headerlink" title="é€šè¿‡å­—ç¬¦ä¸²è·¯å¾„è·å–å¯¹è±¡å±æ€§çš„ç®€å•æ–¹æ³•ï¼ˆæš‚ä¸æ”¯æŒ[]ï¼‰"></a>é€šè¿‡å­—ç¬¦ä¸²è·¯å¾„è·å–å¯¹è±¡å±æ€§çš„ç®€å•æ–¹æ³•ï¼ˆæš‚ä¸æ”¯æŒ[]ï¼‰</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">parsePath</span> (<span class="params">obj, path</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> path.split(<span class="string">"."</span>).reduce(<span class="function">(<span class="params">data, current</span>) =&gt;</span> data[current], obj)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> obj1 = &#123;</span><br><span class="line">    tom: &#123;</span><br><span class="line">        name: <span class="string">"tom"</span>,</span><br><span class="line">        age: <span class="number">23</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> res = parsePath(obj1, <span class="string">"tom.name"</span>)</span><br><span class="line"><span class="built_in">console</span>.log(res);</span><br><span class="line"><span class="comment">// tom</span></span><br></pre></td></tr></table></figure>

<h2 id="e-targetå’Œe-currentTarget"><a href="#e-targetå’Œe-currentTarget" class="headerlink" title="e.targetå’Œe.currentTarget"></a>e.targetå’Œe.currentTarget</h2><p>e.targetæŒ‡å‘è§¦å‘äº‹ä»¶çš„å¯¹è±¡</p>
<p>e.currentTargetæŒ‡å‘æ·»åŠ ç›‘å¬äº‹ä»¶çš„å¯¹è±¡</p>
<h2 id="Vue-jsåŒå‘æ•°æ®ç»‘å®šåŸç†"><a href="#Vue-jsåŒå‘æ•°æ®ç»‘å®šåŸç†" class="headerlink" title="Vue.jsåŒå‘æ•°æ®ç»‘å®šåŸç†"></a>Vue.jsåŒå‘æ•°æ®ç»‘å®šåŸç†</h2><p><img src="https://mrrsblog.oss-cn-shanghai.aliyuncs.com/vue-1.png" alt></p>
<p>Dataé€šè¿‡Observerè½¬æ¢æˆäº†getter/setterçš„å½¢å¼ç±»è¿½è¸ªå˜åŒ–</p>
<p>å½“å¤–ç•Œé€šè¿‡Watcherè¯»å–æ•°æ®ï¼ˆCompileæ—¶ä¼šæ ¹æ®<strong>{}</strong>ã€<strong>v-*</strong>æ¥åˆ›å»ºWatcherï¼‰æ—¶ä¼šè§¦å‘getterä»è€Œå°†Watcheræ·»åŠ åˆ°ä¾èµ–ä¸­</p>
<p>å½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œä¼šè§¦å‘setterï¼Œä»è€Œå‘Depä¸­çš„ä¾èµ–ï¼ˆWatcherï¼‰å‘é€é€šçŸ¥</p>
<p>Wacheræ¥æ”¶åˆ°é€šçŸ¥åï¼Œä¼šå‘å¤–ç•Œå‘é€é€šçŸ¥ï¼Œå˜åŒ–é€šçŸ¥åˆ°å¤–ç•Œåå¯èƒ½ä¼šè§¦å‘è§†å›¾æ›´æ–°ï¼Œä¹Ÿæœ‰å¯èƒ½è§¦å‘ç”¨æˆ·çš„æŸä¸ªå›è°ƒå‡½æ•°</p>

        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://mrrs878.github.io/2020/02/19/ES6é‡ç‚¹-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr.RS">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/imgs/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mr.RS">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            
            <a href="/2020/02/19/ES6é‡ç‚¹-1/" class="post-title-link" itemprop="url">ES6é‡ç‚¹-1</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-02-19 23:01:48" itemprop="dateCreated datePublished" datetime="2020-02-19T23:01:48+08:00">2020-02-19</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-02-29 23:01:30" itemprop="dateModified" datetime="2020-02-29T23:01:30+08:00">2020-02-29</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaScript/" itemprop="url" rel="index">
                    <span itemprop="name">JavaScript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="å­—ç¬¦ä¸²æ–°å¢æ–¹æ³•"><a href="#å­—ç¬¦ä¸²æ–°å¢æ–¹æ³•" class="headerlink" title="å­—ç¬¦ä¸²æ–°å¢æ–¹æ³•"></a>å­—ç¬¦ä¸²æ–°å¢æ–¹æ³•</h2><ul>
<li><p><code>padStart</code></p>
<p>ç”¨äºå­—ç¬¦ä¸²é•¿åº¦è¡¥å…¨ï¼Œå¦‚æœæŸä¸ªå­—ç¬¦ä¸²é•¿åº¦ä¸å¤ŸæŒ‡å®šé•¿åº¦ä¼šåœ¨å¤´éƒ¨æˆ–å°¾éƒ¨è¡¥å…¨</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">'xxx'</span>.padStart(<span class="number">4</span>, <span class="string">'ab'</span>));</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'x'</span>.padStart(<span class="number">4</span>, <span class="string">'ab'</span>)); <span class="comment">//è¡¥å…¨ä½æ•°ï¼Œæœ‰éœ€è¦ä¼šé‡å¤æˆ–æˆªå–</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'x'</span>.padStart(<span class="number">4</span>)); <span class="comment">// ä¸ä¼ ç¬¬äºŒä¸ªå‚æ•°é»˜è®¤ä½¿ç”¨ç©ºæ ¼è¡¥å…¨</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'xxx'</span>.padStart(<span class="number">2</span>)); <span class="comment">// è¡¥å…¨åçš„é•¿åº¦å°äºæºå­—ç¬¦ä¸²é•¿åº¦åˆ™ä¸åšä»»ä½•æ”¹å˜</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// abax</span></span><br><span class="line"><span class="comment">// axxx</span></span><br><span class="line"><span class="comment">//    x</span></span><br><span class="line"><span class="comment">// xxx</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>padEnd</code></p>
<p>å’Œ<code>padStart</code>æ•ˆæœç›¸åï¼Œä»å°¾éƒ¨å¼€å§‹è¡¥å…¨</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="string">'x'</span>.padEnd(<span class="number">5</span>, <span class="string">'abc'</span>));</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'x'</span>.padEnd(<span class="number">4</span>));</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'xxx'</span>.padEnd(<span class="number">2</span>));</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'xxx'</span>.padEnd(<span class="number">4</span>, <span class="string">'ab'</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">// xabca</span></span><br><span class="line"><span class="comment">// x   </span></span><br><span class="line"><span class="comment">// xxx</span></span><br><span class="line"><span class="comment">// xxxa</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="å¯¹è±¡æ–°å¢æ‰©å±•"><a href="#å¯¹è±¡æ–°å¢æ‰©å±•" class="headerlink" title="å¯¹è±¡æ–°å¢æ‰©å±•"></a>å¯¹è±¡æ–°å¢æ‰©å±•</h2><ul>
<li><p>é“¾åˆ¤æ–­è¿ç®—ç¬¦</p>
<p>åœ¨ES5ä¸­ï¼Œå–å¯¹è±¡å±æ€§æ—¶ï¼Œå¾€å¾€éœ€è¦åˆ¤æ–­ä»¥ä¸‹è¯¥å¯¹è±¡æ˜¯å¦å­˜åœ¨ã€‚å¦‚ä¸‹</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> name = (store </span><br><span class="line">    &amp;&amp; store.state </span><br><span class="line">    &amp;&amp; store.state.user </span><br><span class="line">    &amp;&amp; store.state.user.name) || <span class="string">"tom"</span></span><br></pre></td></tr></table></figure>

<p>è¿™ç§å±‚å±‚åˆ¤æ–­è¿‡äºéº»çƒ¦ï¼Œå› æ­¤ES2020å¼•å…¥é“¾åˆ¤æ–­è¿ç®—ç¬¦<code>?.</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> name = store?.state?.user?.name</span><br></pre></td></tr></table></figure>

<p>å¦‚æœå·¦ä¾§çš„å¯¹è±¡ä¸º<code>null</code>æˆ–<code>undefined</code>åˆ™ç›´æ¥è¿”å›<code>undefined</code>ï¼Œä¸å†å¾€ä¸‹è¿ç®—</p>
</li>
<li><p><code>null</code>åˆ¤æ–­è¿ç®—ç¬¦</p>
<p>ç‹¬å»å¯¹è±¡å±æ€§æ—¶ï¼Œå¦‚æœæŸä¸ªå±æ€§çš„å€¼æ—¶<code>null</code>æˆ–<code>undefined</code>ï¼Œæœ‰æ—¶éœ€è¦ä¸ºå®ƒä»¬æŒ‡å®šé»˜è®¤å€¼ã€‚å¸¸è§åšæ³•æ˜¯é€šè¿‡<code>||</code>è¿ç®—ç¬¦æŒ‡å®šé»˜è®¤å€¼</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> name = user.name || <span class="string">"tom"</span></span><br><span class="line"><span class="keyword">const</span> age = user.age || <span class="number">20</span></span><br></pre></td></tr></table></figure>

<p>åŸæ„æ˜¯å±æ€§å€¼ä¸º<code>null</code>æˆ–<code>undefined</code>æ—¶é»˜è®¤å€¼å°±ç”Ÿæ•ˆï¼Œä½†å½“<code>user.name</code>ä¸ºç©ºä¸²æˆ–<code>user.age</code>ä¸º0æ—¶é»˜è®¤å€¼ä¹Ÿä¼šç”Ÿæ•ˆ</p>
<p>ä¸ºæ­¤ES2020å¼•å…¥æ–°çš„<code>null</code>åˆ¤æ–­è¿ç®—ç¬¦<code>??</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> name = user.name ?? <span class="string">"tom"</span></span><br><span class="line"><span class="keyword">const</span> age = user.age ?? <span class="number">20</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="å¯¹è±¡æ–°å¢æ–¹æ³•"><a href="#å¯¹è±¡æ–°å¢æ–¹æ³•" class="headerlink" title="å¯¹è±¡æ–°å¢æ–¹æ³•"></a>å¯¹è±¡æ–°å¢æ–¹æ³•</h2><ul>
<li><p><code>Object.is</code></p>
<p>ç”¨æ¥æ›¿ä»£ <code>==</code>å’Œ<code>===</code></p>
<p><code>==</code> ä¼šè¿›è¡Œè‡ªåŠ¨ç±»å‹è½¬æ¢ï¼Œ<code>===</code> åœ¨æ¯”è¾ƒ+0å’Œ-0æ—¶è¿”å›<code>true</code>ï¼Œ<code>NaN</code>ä¸ç­‰äºè‡ªèº«</p>
</li>
<li><p><code>Object.assign</code></p>
<p>ç”¨äºå¯¹è±¡åˆå¹¶</p>
<ul>
<li>åªæ‹·è´æºå¯¹è±¡çš„<strong>è‡ªèº«ã€å¯æšä¸¾å±æ€§ï¼ˆå«Symbolï¼‰</strong></li>
<li>æµ…æ‹·è´</li>
<li>åŒåå±æ€§ä¼šè¢«è¦†ç›–</li>
<li>é™¤é¦–å‚æ•°å¤–ï¼ˆ<code>null</code>ã€<code>undefined</code>ä¼šæŠ¥é”™ï¼‰ï¼Œéå¯¹è±¡ä¼šè¢«è½¬æ¢ä¸ºå¯¹è±¡</li>
</ul>
</li>
<li><p><code>Object.keys</code></p>
<p>è¿”å›å¯¹è±¡<strong>è‡ªèº«çš„</strong>ã€<strong>å¯éå†çš„</strong>å±æ€§çš„é”®å<strong>æ•°ç»„</strong></p>
</li>
<li><p><code>Object.fromEntries/Object.entries</code></p>
<p><code>Object.fromEntries</code>å°†ä¸€ä¸ªé”®å€¼å¯¹æ•°ç»„è½¬æ¢ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œé€‚åˆå°†<code>Map</code>è½¬æ¢ä¸º<code>Object</code></p>
<p><code>Object.entries</code>é€†æ“ä½œï¼Œç”¨äºå°†<code>Object</code>è½¬æ¢ä¸ºé”®å€¼å¯¹æ•°ç»„</p>
</li>
</ul>
<h2 id="Arrayæ‰©å±•"><a href="#Arrayæ‰©å±•" class="headerlink" title="Arrayæ‰©å±•"></a>Arrayæ‰©å±•</h2><ul>
<li><p><code>Array.of</code></p>
<p>å¼¥è¡¥æ•°ç»„æ„é€ å‡½æ•°<code>Array()</code>çš„ä¸è¶³ã€‚å› ä¸ºå‚æ•°ä¸ªæ•°çš„ä¸åŒï¼Œä¼šå¯¼è‡´<code>Array()</code>çš„è¡Œä¸ºæœ‰å·®å¼‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>() <span class="comment">//[]</span></span><br><span class="line"><span class="built_in">Array</span>(<span class="number">3</span>) <span class="comment">//[ , , ]</span></span><br><span class="line"><span class="built_in">Array</span>(<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>) <span class="comment">//[3, 4, 5]</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Array</span>.of() <span class="comment">// []</span></span><br><span class="line"><span class="built_in">Array</span>.of(<span class="number">3</span>) <span class="comment">//[3]</span></span><br><span class="line"><span class="built_in">Array</span>.of(<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>) <span class="comment">//[3, 4, 5]</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>Array.prototype.copyWithin()</code></p>
<p>åœ¨å½“å‰æ•°ç»„å†…éƒ¨ï¼Œå°†æŒ‡å®šä½ç½®çš„æˆå‘˜å¤åˆ¶åˆ°å…¶ä»–ä½ç½®ï¼ˆä¼šè¦†ç›–åŸæœ‰æˆå‘˜ï¼‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Array</span>.prototype.copyWithin(target, start = <span class="number">0</span>, end = <span class="keyword">this</span>.length)</span><br><span class="line"></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>].copyWithin(<span class="number">0</span>, <span class="number">3</span>)</span><br><span class="line"><span class="comment">// [4, 5, 3, 4, 5]</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>].copyWithin(<span class="number">0</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line"><span class="comment">// [4, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>Array.prototype.flat() &amp;&amp; Array.prototype.flatMap()</code></p>
<p><code>flat()</code>ç”¨äºå°†æ•°æ®é™ç»´ï¼Œå‚æ•°ä¸ºé™ä½çš„ç»´æ•°ï¼ˆé»˜è®¤ä¸º1ï¼‰,å¦‚æœä¸ç®¡æœ‰å¤šå°‘å±‚ç»´ï¼Œéƒ½è¦è½¬ä¸ºä¸€ç»´æ•°ç»„ï¼Œå¯ä½¿ç”¨<code>Infinity</code>å…³é”®å­—ä½œä¸ºå‚æ•°</p>
<p>å¦‚æœåŸæ•°ç»„æœ‰ç©ºä½<code>flat()</code>ä¼šè·³è¿‡</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, [<span class="number">1</span>, <span class="number">2</span>]].flat()</span><br><span class="line"><span class="comment">// [1, 2, 1, 2]</span></span><br><span class="line"></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, [<span class="number">1</span>, <span class="number">2</span>], [<span class="number">1</span>, [<span class="number">2</span>]]].flat()</span><br><span class="line"><span class="comment">// [1, 2, 1, 2, 1, [2]]</span></span><br><span class="line"></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, [<span class="number">1</span>, <span class="number">2</span>], [<span class="number">1</span>, [<span class="number">2</span>]]].flat(<span class="number">2</span>)</span><br><span class="line"><span class="comment">// [1, 2, 1, 2, 1, 2]</span></span><br><span class="line"></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, [<span class="number">1</span>, <span class="number">2</span>], [<span class="number">1</span>, [<span class="number">2</span>]]].flat(<span class="literal">Infinity</span>)</span><br><span class="line"><span class="comment">// [1, 2, 1, 2, 1, 2]</span></span><br></pre></td></tr></table></figure>

<p><code>flatMap()</code>ç›¸å½“äº<code>Array.prorotype.Map</code> + <code>Array.prorotype.flat</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].flatMap(<span class="function"><span class="params">x</span> =&gt;</span> [x, x * <span class="number">2</span>])</span><br><span class="line"><span class="comment">// [1, 2, 2, 4, 3, 6]</span></span><br><span class="line">[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>].flatMap(<span class="function"><span class="params">x</span> =&gt;</span> x * <span class="number">2</span>)</span><br><span class="line"><span class="comment">// [2, 4, 6]</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="iterator"><a href="#iterator" class="headerlink" title="iterator"></a>iterator</h2><p><strong>WHAT</strong></p>
<p>éå†å™¨ï¼ˆ<code>iterator</code>ï¼‰å°±æ˜¯è¿™æ ·ä¸€ç§æœºåˆ¶ã€‚å®ƒæ˜¯ä¸€ç§æ¥å£ï¼Œä¸ºå„ç§ä¸åŒçš„æ•°æ®ç»“æ„æä¾›ç»Ÿä¸€çš„è®¿é—®æœºåˆ¶ã€‚ä»»ä½•æ•°æ®ç»“æ„åªè¦éƒ¨ç½²äº†<code>iterator</code>æ¥å£ï¼Œå°±å¯ä»¥å®Œæˆ<strong>éå†</strong>æ“ä½œ</p>
<p><strong>WHY</strong></p>
<p>JavaScriptåŸæœ‰çš„è¡¨ç¤ºé›†åˆçš„æ•°æ®ç»“æ„ä¸»è¦æ˜¯æ•°ç»„ï¼ˆArrayï¼‰å’Œå¯¹è±¡ï¼ˆObjectï¼‰ï¼ŒES6åˆæ·»åŠ äº†<code>Map</code>ã€<code>Set</code>ã€‚è¿™æ ·å°±æœ‰äº†å››ç§æ•°æ®é›†åˆï¼Œç”¨æˆ·å¯ä»¥ç»„åˆä½¿ç”¨å®ƒä»¬ï¼Œå®šä¹‰è‡ªå·±çš„æ•°æ®ç»“æ„ï¼Œæ¯”å¦‚æ•°ç»„çš„æˆå‘˜æ˜¯<code>Map</code>ï¼Œ<code>Map</code>çš„æˆå‘˜æ˜¯å¯¹è±¡ã€‚è¿™æ ·éœ€è¦ä¸€ç§ç»Ÿä¸€çš„æ¥å£æœºåˆ¶æ¥å¤„ç†ä¸åŒçš„æ•°æ®ç»“æ„</p>
<p>ä¸»è¦ä½œç”¨</p>
<ul>
<li><p>ä¸ºå„ç§æ•°æ®ç»“æ„æä¾›ä¸€ä¸ªç»Ÿä¸€çš„ã€ç®€ä¾¿çš„è®¿é—®æ¥å£</p>
</li>
<li><p>ä½¿å¾—æ•°æ®ç»“æ„çš„æˆå‘˜èƒ½å¤ŸæŒ‰æŸç§æ¬¡åºæ’åˆ—</p>
</li>
<li><p>ä¸º<code>for...of</code>æ‰€ä½¿ç”¨</p>
<p>é€‚åˆéå†Arrayï¼Œæ—¢æœ‰<code>forEach</code>çš„ç®€æ´åˆæœ‰<code>for</code>çš„<code>break</code>ã€<code>return</code>ã€<code>continue</code></p>
</li>
</ul>
<p><strong>HOW</strong></p>
<p><code>iterator</code>çš„éå†è¿‡ç¨‹</p>
<ol>
<li>åˆ›å»ºä¸€ä¸ªæŒ‡é’ˆå¯¹è±¡ï¼ŒæŒ‡å‘å½“å‰çš„æ•°æ®ç»“æ„çš„èµ·å§‹ä½ç½®ã€‚ä¹Ÿå°±æ˜¯è¯´éå†å™¨å¯¹è±¡æœ¬è´¨ä¸Šå°±æ˜¯ä¸€ä¸ªæŒ‡é’ˆå¯¹è±¡</li>
<li>ç¬¬ä¸€æ¬¡è°ƒç”¨æŒ‡é’ˆå¯¹è±¡çš„<code>next</code>æ–¹æ³•ï¼Œå¯ä»¥å°†æŒ‡é’ˆæŒ‡å‘æ•°æ®ç»“æ„çš„ç¬¬ä¸€ä¸ªæˆå‘˜</li>
<li>ç¬¬äºŒæ¬¡è°ƒç”¨æŒ‡é’ˆå¯¹è±¡çš„<code>next</code>æ–¹æ³•ï¼ŒæŒ‡é’ˆå°±æŒ‡å‘æ•°æ®ç»“æ„çš„ç¬¬äºŒä¸ªæˆå‘˜</li>
<li>ä¸æ–­è°ƒç”¨æŒ‡é’ˆå¯¹è±¡çš„<code>next</code>æ–¹æ³•ï¼Œç›´åˆ°å®ƒæŒ‡å‘æ•°æ®ç»“æ„çš„ç»“æŸä½ç½®</li>
</ol>
<p>æ¯ä¸€æ¬¡è°ƒç”¨<code>next</code>æ–¹æ³•ï¼Œéƒ½ä¼šè¿”å›æ•°æ®ç»“æ„çš„å½“å‰æˆå‘˜çš„ä¿¡æ¯ã€‚å…·ä½“æ¥è¯´ï¼Œå°±æ˜¯è¿”å›ä¸€ä¸ªåŒ…å«<code>value</code>å’Œ<code>done</code>ä¸¤ä¸ªå±æ€§çš„å¯¹è±¡ï¼Œå…¶ä¸­<code>value</code>å±æ€§æ˜¯å½“å‰æˆå‘˜çš„å€¼ï¼Œ<code>done</code>å±æ€§æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæ˜¯å¦éå†ç»“æŸ</p>
<p>ES6è§„å®šï¼Œé»˜è®¤çš„<code>iterator</code>æ¥å£éƒ¨ç½²åœ¨æ•°æ®ç»“æ„çš„<code>Symbol.iterator</code>å±æ€§ï¼Œæˆ–è€…è¯´ï¼Œä¸€ä¸ªæ•°æ®ç»“æ„åªè¦å…·æœ‰<code>Symbol.iterator</code>å±æ€§ï¼Œå°±å¯ä»¥è®¤ä¸ºæ˜¯å¯éå†çš„ï¼ˆ<code>iterable</code>ï¼‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">    data: [<span class="string">'hello'</span>, <span class="string">'world'</span>],</span><br><span class="line">    [<span class="built_in">Symbol</span>.iterator](): &#123;</span><br><span class="line">    	<span class="keyword">const</span> self = <span class="keyword">this</span></span><br><span class="line">    	<span class="keyword">let</span> index = <span class="number">0</span></span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            next() &#123;</span><br><span class="line">                <span class="keyword">if</span> (index &lt; self.data.length) &#123;</span><br><span class="line">                    <span class="keyword">return</span> &#123;</span><br><span class="line">                        value: self.data[index++]</span><br><span class="line">                    	done: <span class="literal">false</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> &#123;</span><br><span class="line">                    value: <span class="literal">undefined</span>,</span><br><span class="line">                    done: <span class="literal">true</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åŸç”Ÿå…·å¤‡iteratoræ¥å£çš„æ•°æ®ç»“æ„ï¼š<code>Mapã€Arrayã€Setã€Stringã€TypedArrayã€argumentsã€NodeListå¯¹è±¡</code></p>
<h2 id="let-VS-const"><a href="#let-VS-const" class="headerlink" title="let VS const"></a>let VS const</h2><p>åœ¨letå’Œconstä¹‹é—´ï¼Œå»ºè®®ä¼˜å…ˆä½¿ç”¨constï¼Œå°¤å…¶æ˜¯åœ¨å…¨å±€ç¯å¢ƒã€‚constä¼˜äºletçš„å‡ ä¸ªåŸå› ï¼š</p>
<ul>
<li>constå¯ä»¥æé†’é˜…è¯»ç¨‹åºçš„äººï¼Œè¿™ä¸ªå˜é‡ä¸åº”è¯¥æ”¹å˜</li>
<li>constæ¯”è¾ƒç¬¦åˆå‡½æ•°å¼ç¼–ç¨‹æ€æƒ³ï¼Œè¿ç®—ä¸æ”¹å˜å€¼ï¼Œåªæ˜¯æ–°å»ºå€¼ï¼Œè€Œä¸”è¿™æ ·ä¹Ÿæœ‰åˆ©äºå°†æ¥çš„åˆ†å¸ƒå¼è®¡ç®—</li>
<li>JavaScriptç¼–è¯‘å™¨ä¼šå¯¹constè¿›è¡Œä¼˜åŒ–</li>
<li>é•¿è¿œæ¥çœ‹ï¼ŒJavaScriptå¯èƒ½ä¼šæœ‰å¤šçº¿ç¨‹çš„å®ç°ï¼Œè¿™æ—¶letè¡¨ç¤ºçš„å˜é‡åªåº”å‡ºç°åœ¨å•çº¿ç¨‹è¿è¡Œçš„ä»£ç ä¸­ï¼Œä¸æ˜¯å¤šçº¿ç¨‹å…±äº«çš„ï¼Œè¿™æ ·æœ‰åˆ©äºçº¿ç¨‹å®‰å…¨</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// bad</span></span><br><span class="line"><span class="keyword">var</span> a = <span class="number">1</span>, b = <span class="number">2</span>, c = <span class="number">3</span></span><br><span class="line"><span class="comment">// good</span></span><br><span class="line"><span class="keyword">const</span> a = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">const</span> b = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">const</span> c = <span class="number">3</span>;</span><br><span class="line"><span class="comment">// best</span></span><br><span class="line"><span class="keyword">const</span> [a, b, c] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br></pre></td></tr></table></figure>

<h2 id="generator"><a href="#generator" class="headerlink" title="generator"></a>generator</h2><p>ES6æä¾›çš„ä¸€ç§å¼‚æ­¥ç¼–ç¨‹è§£å†³æ–¹æ¡ˆ</p>
<p>å½¢å¼ä¸Šï¼Œ<code>generator</code>å‡½æ•°æ˜¯ä¸€ä¸ªçŠ¶æ€æœºï¼Œå°è£…äº†å¤šä¸ªå†…éƒ¨çŠ¶æ€ã€‚æ‰§è¡Œ<code>generator</code>å‡½æ•°ä¼šè¿”å›ä¸€ä¸ª<strong>éå†å™¨å¯¹è±¡</strong>ã€‚</p>
<p>è¯­æ³•ä¸Šï¼Œ<code>generator</code>å‡½æ•°æ˜¯ä¸€ä¸ªæ™®é€šå‡½æ•°ã€‚<code>function</code>å…³é”®å­—ä¸å‡½æ•°åä¹‹é—´æœ‰ä¸€ä¸ª<code>*</code>ï¼›å‡½æ•°ä½“å†…éƒ¨ä½¿ç”¨<code>yield</code>è¡¨è¾¾å¼å®šä¹‰ä¸åŒçš„å†…éƒ¨çŠ¶æ€</p>
<p>ä¸æ™®é€šå‡½æ•°ä¸åŒï¼Œgeneratorå‡½æ•°è¢«è°ƒç”¨åå¹¶ä¸æ‰§è¡Œï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªæŒ‡å‘å†…éƒ¨çŠ¶æ€çš„æŒ‡é’ˆå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯<strong>éå†å™¨å¯¹è±¡</strong>ã€‚ä¸‹ä¸€æ­¥ï¼Œå¿…é¡»è°ƒç”¨éå†å™¨å¯¹è±¡çš„<code>next</code>æ–¹æ³•ä½¿å¾—æŒ‡é’ˆç§»å‘ä¸‹ä¸€ä¸ªçŠ¶æ€ã€‚ä¹Ÿå°±æ˜¯è¯´æ¯æ¬¡è°ƒç”¨<code>next</code>æ–¹æ³•ï¼Œå†…éƒ¨æŒ‡é’ˆå°±ä»å‡½æ•°å¤´éƒ¨æˆ–ä¸Šä¸€æ¬¡åœä¸‹æ¥çš„åœ°æ–¹å¼€å§‹æ‰§è¡Œï¼Œç›´åˆ°é‡åˆ°ä¸‹ä¸€ä¸ª<code>yield</code>è¡¨è¾¾å¼ï¼ˆæˆ–<code>return</code>è¯­å¥ï¼‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">gen</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> str1 = <span class="keyword">yield</span> <span class="string">"hello"</span></span><br><span class="line">  <span class="comment">// str1 = 222</span></span><br><span class="line">  <span class="keyword">const</span> str2 = <span class="keyword">yield</span> <span class="string">"world"</span></span><br><span class="line">  <span class="comment">// str2 = 333</span></span><br><span class="line">  <span class="keyword">return</span> str2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> iter = gen()</span><br><span class="line"><span class="built_in">console</span>.log(iter.next())</span><br><span class="line"><span class="built_in">console</span>.log(iter.next(<span class="number">222</span>))</span><br><span class="line"><span class="built_in">console</span>.log(iter.next(<span class="number">333</span>))</span><br></pre></td></tr></table></figure>

<p>ç¬¬ä¸€æ¬¡è°ƒç”¨ï¼Œ<code>generator</code>å‡½æ•°å¼€å§‹æ‰§è¡Œï¼Œç›´åˆ°é‡åˆ°ç¬¬ä¸€ä¸ª<code>yield</code>è¡¨è¾¾å¼ä¸ºæ­¢ã€‚<code>next</code>æ–¹æ³•è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒçš„<code>value</code>å€¼å°±æ˜¯å½“å‰<code>yield</code>è¡¨è¾¾å¼çš„å€¼ï¼Œdoneçš„å€¼ä¸º<code>false</code></p>
<p>ç¬¬äºŒæ¬¡è°ƒç”¨ï¼Œ<code>generator</code>ä»ä¸Šæ¬¡yieldè¡¨è¾¾å¼åœä¸‹æ¥çš„åœ°æ–¹ä¸€ç›´æ‰§è¡Œåˆ°ä¸‹ä¸€ä¸ª<code>yield</code>è¡¨è¾¾å¼ ğŸ‘† â€¦â€¦</p>
<p>ç¬¬ä¸‰æ¬¡è°ƒç”¨ï¼Œ<code>generator</code>å‡½æ•°ä»ä¸Šæ¬¡<code>yield</code>è¡¨è¾¾å¼åœä¸‹æ¥çš„åœ°æ–¹ä¸€ç›´æ‰§è¡Œåˆ°<code>return</code>è¯­å¥ï¼Œnextè¿”å›çš„<code>value</code>å€¼å°±æ˜¯<code>return</code>åé¢è¡¨è¾¾å¼çš„å€¼ï¼Œ<code>done</code>ä¸ºtrueï¼ˆå¦‚æœæ˜¯<code>yield</code>åˆ™ä¸º<code>false</code>ï¼‰</p>
<p><code>yield</code>è¡¨è¾¾å¼æœ¬èº«æ²¡æœ‰è¿”å›å€¼ï¼ˆæˆ–è€…è¯´æ€»æ˜¯è¿”å›undefinedï¼‰ã€‚<code>next</code>æ–¹æ³•å¯ä»¥å¸¦ä¸€ä¸ªå‚æ•°ï¼Œè¯¥å‚æ•°ä¼šè¢«å½“ä½œ<strong>ä¸Šä¸€ä¸ª</strong><code>yield</code>è¡¨è¾¾å¼çš„è¿”å›å€¼</p>

        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://mrrs878.github.io/2020/02/18/ES6é‡ç‚¹-0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr.RS">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/imgs/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mr.RS">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            
            <a href="/2020/02/18/ES6é‡ç‚¹-0/" class="post-title-link" itemprop="url">ES6é‡ç‚¹-0</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-02-18 23:43:05" itemprop="dateCreated datePublished" datetime="2020-02-18T23:43:05+08:00">2020-02-18</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-02-29 23:07:33" itemprop="dateModified" datetime="2020-02-29T23:07:33+08:00">2020-02-29</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaScript/" itemprop="url" rel="index">
                    <span itemprop="name">JavaScript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Proxy"><a href="#Proxy" class="headerlink" title="Proxy"></a><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Proxy" target="_blank" rel="noopener">Proxy</a></h2><p><code>Proxy</code>ç”¨äº<strong>ä¿®æ”¹æŸäº›æ“ä½œçš„é»˜è®¤è¡Œä¸º</strong>ï¼Œç­‰åŒäºåœ¨è¯­è¨€å±‚é¢åšå‡ºä¿®æ”¹ï¼Œæ‰€ä»¥å±äºä¸€ç§â€œå…ƒç¼–ç¨‹â€ï¼ˆmeta programï¼‰ï¼Œå³å¯¹ç¼–ç¨‹è¯­è¨€è¿›è¡Œç¼–ç¨‹ã€‚<code>Proxy</code>å¯ä»¥ç†è§£æˆåœ¨ç›®æ ‡å¯¹è±¡ä¹‹å‰æ¶è®¾ä¸€å±‚â€œæ‹¦æˆªâ€ï¼Œå¤–ç•Œå¯¹è¯¥å¯¹è±¡çš„è®¿é—®ï¼Œéƒ½å¿…é¡»å…ˆé€šè¿‡è¿™å±‚æ‹¦æˆªï¼Œå› æ­¤æä¾›äº†ä¸€ç§æœºåˆ¶ï¼Œå¯ä»¥å¯¹å¤–ç•Œçš„è®¿é—®è¿›è¡Œè¿‡æ»¤å’Œæ”¹å†™ã€‚</p>
<h2 id="Reflect"><a href="#Reflect" class="headerlink" title="Reflect"></a><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Reflect" target="_blank" rel="noopener">Reflect</a></h2><p>*<em>WHAT *</em>ğŸ˜³</p>
<p>ES6ä¸ºäº†<strong>æ“ä½œå¯¹è±¡</strong>è€Œæä¾›çš„æ–°çš„API</p>
<p><strong>WHY</strong>   ğŸ¤”</p>
<ol>
<li>å°†<code>Object</code>å¯¹è±¡çš„ä¸€äº›æ˜æ˜¾æ˜¯è¯­è¯­è¨€å†…éƒ¨çš„æ–¹æ³•ï¼ˆæ¯”å¦‚<code>Object.defineProperty</code>ï¼‰æ”¾åˆ°<code>Reflect</code>å¯¹è±¡ä¸Šï¼Œç°é˜¶æ®µï¼ŒæŸäº›æ–¹æ³•åŒæ—¶åœ¨<code>Object</code>å’Œ<code>Reflect</code>å¯¹è±¡ä¸Šéƒ¨ç½²ï¼Œæœªæ¥çš„æ–°æ–¹æ³•åªéƒ¨ç½²åœ¨<code>Reflect</code>å¯¹è±¡ä¸Šã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä»<code>Reflect</code>å¯¹è±¡ä¸Šå¯ä»¥æ‹¿åˆ°è¯­è¨€å†…éƒ¨çš„æ–¹æ³•</li>
<li>ä¿®æ”¹æŸäº›<code>Object</code>æ–¹æ³•çš„è¿”å›ç»“æœï¼Œè®©å…¶å˜å¾—æ›´åˆç†ã€‚æ¯”å¦‚<code>Object.defineProperty(obj, name, desc)</code>åœ¨æ— æ³•å®šä¹‰å±æ€§æ—¶ï¼Œä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ï¼Œè€Œ<code>Reflect.defineProperty(obj, name, desc)</code>åˆ™ä¼šè¿”å›<code>false</code></li>
<li>è®©<code>Object</code>æ“ä½œéƒ½å˜æˆå‡½æ•°è¡Œä¸ºã€‚æŸäº›<code>Object</code>æ“ä½œæ˜¯å‘½ä»¤å¼ï¼Œæ¯”å¦‚<code>name in obj</code>å’Œ<code>delete obj[name]</code>ï¼Œè€Œ<code>Reflect.has(obj, name)</code>å’Œ<code>Reflect.deleteProperty(obj, name)</code>è®©å®ƒä»¬å˜æˆäº†å‡½æ•°è¡Œä¸º</li>
<li><code>Reflect</code>å¯¹è±¡çš„æ–¹æ³•ä¸<code>Proxy</code>å¯¹è±¡çš„æ–¹æ³•ä¸€ä¸€å¯¹åº”ï¼Œè¿™å°±è®©<code>Proxy</code>å¯¹è±¡å¯ä»¥æ–¹ä¾¿åœ°è°ƒç”¨å¯¹åº”çš„<code>Reflect</code>æ–¹æ³•ï¼Œå®Œæˆé»˜è®¤è¡Œä¸º</li>
</ol>
<p><strong>HOW</strong>  ğŸ˜®</p>
<p><code>Reflect</code>å¯¹è±¡ä¸€å…±æœ‰13ä¸ªé™æ€æ–¹æ³•</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€‚ç”¨äºå‡½æ•°å®šä¹‰äº†è‡ªå·±çš„ apply æ–¹æ³•</span></span><br><span class="line"><span class="built_in">Reflect</span>.apply(target, thisArg, args)</span><br><span class="line"><span class="comment">// ç­‰åŒäºnew target(...args) è¿™æä¾›äº†ä¸€ç§ä¸ä½¿ç”¨ new æ¥è°ƒç”¨æ„é€ å‡½æ•°çš„æ–¹æ³•</span></span><br><span class="line"><span class="built_in">Reflect</span>.construct(target, args)</span><br><span class="line"></span><br><span class="line"><span class="built_in">Reflect</span>.get(target, name, receiver)</span><br><span class="line"></span><br><span class="line"><span class="built_in">Reflect</span>.set(target, name, value, receiver)</span><br><span class="line"></span><br><span class="line"><span class="built_in">Reflect</span>.defineProperty(target, name, desc)</span><br><span class="line"></span><br><span class="line"><span class="built_in">Reflect</span>.deleteProperty(target, name)</span><br><span class="line"></span><br><span class="line"><span class="built_in">Reflect</span>.has(target, name)</span><br><span class="line"><span class="comment">// åŸºæœ¬ç­‰åŒäºObject.getOwnPropertyNames ä¸ Object.getOwnPropertySymbols ä¹‹å’Œ</span></span><br><span class="line"><span class="built_in">Reflect</span>.ownKeys(target)</span><br><span class="line"></span><br><span class="line"><span class="built_in">Reflect</span>.isExtensible(target)</span><br><span class="line"></span><br><span class="line"><span class="built_in">Reflect</span>.prevenExtensions(target)</span><br><span class="line"></span><br><span class="line"><span class="built_in">Reflect</span>.getOwnPropertyDescriptor(target, name)</span><br><span class="line"></span><br><span class="line"><span class="built_in">Reflect</span>.getPrototypeOf(target)</span><br><span class="line"></span><br><span class="line"><span class="built_in">Reflect</span>.setPrototypeOf(target, prototype)</span><br></pre></td></tr></table></figure>

<p><code>Reflect</code> + <code>Proxy</code>å®ç°è§‚å¯Ÿè€…æ¨¡å¼</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> observers = <span class="keyword">new</span> <span class="built_in">Set</span>()</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">observe</span>(<span class="params">fn</span>) </span>&#123;</span><br><span class="line">  observers.add(fn)</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">observable</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Proxy</span>(obj, &#123;</span><br><span class="line">    <span class="keyword">set</span>(target, key, value, receiver) &#123;</span><br><span class="line">      <span class="keyword">const</span> result = <span class="built_in">Reflect</span>.set(target, key, value, receiver)</span><br><span class="line">      observers.forEach(<span class="function"><span class="params">observer</span> =&gt;</span> observer())</span><br><span class="line">      <span class="keyword">return</span> result</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> person = observable(&#123;</span><br><span class="line">  name: <span class="string">"tom"</span>,</span><br><span class="line">  age: <span class="number">23</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">print</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123; person.name &#125;</span>, <span class="subst">$&#123; person.age &#125;</span>`</span>)</span><br><span class="line">&#125;</span><br><span class="line">observe(print)</span><br><span class="line">person.name = <span class="string">"tom1"</span></span><br></pre></td></tr></table></figure>

<p>ğŸ“£ åœ¨è§‚å¯Ÿè€…æ¨¡å¼ä¸­ï¼Œè§‚å¯Ÿè€…æ˜¯çŸ¥é“è¢«è§‚å¯Ÿè€…çš„ï¼Œè¢«è§‚å¯Ÿè€…ä¸€ä¸€ç›´ä¿æŒå¯¹è§‚å¯Ÿè€…è¿›è¡Œè®°å½•ã€‚ç„¶è€Œï¼Œåœ¨å‘å¸ƒè®¢é˜…æ¨¡å¼ä¸­ï¼Œå‘å¸ƒè€…å’Œè®¢é˜…è€…ä¸çŸ¥é“å¯¹æ–¹çš„å­˜åœ¨ï¼Œå®ƒä»¬åªæœ‰é€šè¿‡æ¶ˆæ¯ä»£ç†è¿›è¡Œé€šä¿¡ã€‚åœ¨å‘å¸ƒè®¢é˜…æ¨¡å¼ä¸­ï¼Œç»„ä»¶æ—¶æ¾æ•£è€¦åˆçš„ï¼Œæ­£å’Œè§‚å¯Ÿè€…æ¨¡å¼ç›¸åã€‚è§‚å¯Ÿè€…æ¨¡å¼å¤§å¤šæ—¶å€™æ˜¯åŒæ­¥çš„ï¼Œæ¯”å¦‚å½“äº‹ä»¶è§¦å‘ï¼Œè¢«è§‚å¯Ÿè€…å°±ä¼šè°ƒç”¨è§‚å¯Ÿè€…çš„æ–¹æ³•ï¼›è€Œå‘å¸ƒè®¢é˜…æ¨¡å¼å¤§å¤šæ—¶å€™æ˜¯å¼‚æ­¥çš„ï¼ˆä½¿ç”¨æ¶ˆæ¯é˜Ÿåˆ—ï¼‰</p>
<h2 id="Symbol"><a href="#Symbol" class="headerlink" title="Symbol"></a><a href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Symbol" target="_blank" rel="noopener">Symbol</a></h2><p><strong>WHAT</strong> ğŸ˜³</p>
<p><code>ES6</code>å¼•å…¥çš„ä¸€ç§æ–°çš„åŸå§‹æ•°æ®ç±»å‹ï¼Œè¡¨ç¤º<strong>ç‹¬ä¸€æ— äºŒ</strong>çš„å€¼ã€‚å®ƒæ˜¯<code>JavaScript</code>è¯­è¨€çš„ç¬¬ä¸ƒç§æ•°æ®ç±»å‹ï¼Œå‰å…­ç§æ˜¯ï¼š<code>undefined</code>ã€<code>null</code>ã€<code>Boolean</code>ã€<code>String</code>ã€<code>Object</code>ã€<code>Number</code></p>
<p>ğŸ“£ ä¸æ”¯æŒ <code>new Symbol()</code></p>
<p><strong>WHY</strong>   ğŸ¤”</p>
<p>ES5çš„å¯¹è±¡å±æ€§åéƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œè¿™å®¹æ˜“é€ æˆå±æ€§åçš„å†²çªã€‚Symbolå€¼å¯ä½œä¸ºå¯¹è±¡å±æ€§å</p>
<p><strong>HOW</strong>   ğŸ˜®</p>
<p>Symbolå€¼é€šè¿‡<code>Symbol</code>å‡½æ•°ç”Ÿæˆ</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> nameProperty = <span class="built_in">Symbol</span>(<span class="string">"name"</span>)</span><br><span class="line"><span class="keyword">let</span> a = &#123;</span><br><span class="line">  [nameProperty]: <span class="string">"a"</span>,</span><br><span class="line">  age: <span class="number">21</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.getOwnPropertyNames(a))</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">const</span> key <span class="keyword">in</span> a) &#123;</span><br><span class="line">  <span class="keyword">if</span> (a.hasOwnProperty(key)) &#123;</span><br><span class="line">    <span class="keyword">const</span> element = a[key];</span><br><span class="line">    <span class="built_in">console</span>.log(key);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Reflect</span>.ownKeys(a));</span><br></pre></td></tr></table></figure>

<p>API:</p>
<ul>
<li><p><code>Symbol.description</code></p>
<p>åˆ›å»º<code>Symbol</code>çš„æ—¶å€™ï¼Œå¯ä»¥æ·»åŠ ä¸€ä¸ªæè¿°ï¼Œä½†è¯»å–è¿™ä¸ªæè¿°éœ€è¦å°†<code>Symbol</code>æ˜¾å¼è½¬ä¸ºå­—ç¬¦ä¸²ã€‚<code>Symbol.description</code>å¯ä»¥æ–¹ä¾¿çš„è¯»å–<code>Symbol</code>å¯¹åº”çš„æè¿°</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> nameProp = <span class="built_in">Symbol</span>(<span class="string">"name"</span>)</span><br><span class="line">nameProp.toString()</span><br><span class="line"><span class="built_in">console</span>.log(nameProp.description)</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>Symbol.for</code></p>
<p>é‡æ–°ä½¿ç”¨åŒä¸€ä¸ª<code>Symbol</code>å€¼ã€‚<code>Symbol.for</code>æ¥å—ä¸€ä¸ªå­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ï¼Œç„¶å<strong>å…¨å±€æœç´¢</strong>æœ‰æ²¡æœ‰ä»¥è¯¥å‚æ•°ä½œä¸ºåç§°çš„Symbolå€¼ï¼Œè‹¥æœ‰ï¼Œè¿”å›ä¹‹ï¼›è‹¥æ²¡æœ‰ï¼Œåˆ›å»ºä¹‹</p>
<p><code>Symbol.for(&quot;name&quot;)</code>å’Œ<code>Symbol(&quot;name&quot;)</code>çš„åŒºåˆ«ï¼šä¸¤è€…éƒ½ä¼šç”Ÿæˆ<code>Symbol</code>å€¼ï¼›å‰è€…ä¼šè¢«ç™»è®°åœ¨<strong>å…¨å±€</strong>ç¯å¢ƒä¸­ä¾›æœç´¢ï¼Œåè€…ä¸ä¼š</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Symbol</span>(<span class="string">"name"</span>) === <span class="built_in">Symbol</span>(<span class="string">"name"</span>)</span><br><span class="line"><span class="comment">// false</span></span><br><span class="line"><span class="built_in">Symbol</span>.for(<span class="string">"name"</span>) === <span class="built_in">Symbol</span>.for(<span class="string">"name"</span>)</span><br><span class="line"><span class="comment">// true</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>Symbol.keyFor</code></p>
<p>è¿”å›ä¸€ä¸ªå·²<strong>ç™»è®°</strong>çš„<code>Symbol</code>çš„<code>key</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Symbol</span>.keyFor(<span class="built_in">Symbol</span>(<span class="string">"name"</span>)));</span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Symbol</span>.keyFor(<span class="built_in">Symbol</span>.for(<span class="string">"name"</span>)));</span><br><span class="line"><span class="comment">// undefined</span></span><br><span class="line"><span class="comment">// name</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h2><p><strong>WHAT</strong> ğŸ˜³</p>
<p>ES6æä¾›çš„ä¸€ç§æ•°æ®ç»“æ„ï¼Œç±»ä¼¼äºæ•°ç»„ï¼Œä½†æˆå‘˜çš„å€¼éƒ½æ˜¯å”¯ä¸€çš„ï¼Œæ²¡æœ‰é‡å¤çš„å€¼</p>
<p>Setä½¿ç”¨ä¸€ç§ç±»ä¼¼äº<code>===</code>çš„ç®—æ³•â€œSame-value-zero equalityâ€æ¥åˆ¤æ–­å€¼æ˜¯å¦ç›¸ç­‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// "5" å’Œ 5 ä¸ç›¸ç­‰</span></span><br><span class="line"><span class="comment">// NaN å’Œ NaN ç›¸ç­‰</span></span><br><span class="line"><span class="comment">// ä¸¤ä¸ªç©ºå¯¹è±¡ä¸ç›¸ç­‰</span></span><br><span class="line"><span class="keyword">let</span> <span class="keyword">set</span> = new Set()</span><br><span class="line"><span class="keyword">set</span>.add("5")</span><br><span class="line"><span class="keyword">set</span>.add(5)</span><br><span class="line"><span class="keyword">set</span>.add(NaN)</span><br><span class="line"><span class="keyword">set</span>.add(NaN)</span><br><span class="line"><span class="keyword">set</span>.add(&#123;&#125;)</span><br><span class="line"><span class="keyword">set</span>.add(&#123;&#125;)</span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">set</span>);</span><br><span class="line">// Set &#123; <span class="string">'5'</span>, <span class="number">5</span>, <span class="literal">NaN</span>, &#123;&#125;, &#123;&#125; &#125;</span><br></pre></td></tr></table></figure>

<p><strong>WHY</strong>   ğŸ¤”</p>
<ul>
<li>å¯ä»¥ç”¨ä½œæ•°ç»„å»é‡<code>[...new Set([1, 1, 2, 2, 3])]</code></li>
<li>å»é™¤å­—ç¬¦ä¸²é‡Œé¢çš„é‡å¤å­—ç¬¦<code>[...new Set(&#39;aaabbbc&#39;)].join(&quot;&quot;)</code></li>
</ul>
<p><strong>HOW</strong>   ğŸ˜®</p>
<p><code>Set</code>å‡½æ•°å¯ä»¥æ¥å—ä¸€ä¸ªæ•°ç»„ï¼ˆæˆ–<strong>å…·æœ‰interableæ¥å£</strong>çš„å…¶ä»–æ•°æ®ç»“æ„ï¼‰ä½œä¸ºå‚æ•°ï¼Œç”¨æ¥åˆå§‹åŒ–</p>
<h2 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h2><p><strong>WHAT</strong> ğŸ˜³</p>
<p>ES6æä¾›çš„ä¸€ç§æ•°æ®ç»“æ„ï¼Œç±»ä¼¼äºå¯¹è±¡ï¼Œä¹Ÿæ˜¯é”®-å€¼å¯¹çš„é›†åˆï¼Œä½†é”®çš„èŒƒå›´ä¸é™äºå­—ç¬¦ä¸²ï¼Œå„ç« ç±»å‹çš„å€¼ï¼ˆåŒ…æ‹¬å¯¹è±¡ï¼‰éƒ½å¯ä»¥ä½œä¸ºé”®</p>
<p><strong>WHY</strong>   ğŸ¤”</p>
<p>ä¼ ç»Ÿä¸Šçš„Objectåªèƒ½ç”¨å­—ç¬¦ä¸²ï¼ˆ[Symbol](## Symbol)ï¼‰ä½œä¸ºé”®ï¼Œè¿™ç»™å®ƒçš„ä½¿ç”¨å¸¦æ¥äº†å¾ˆå¤§çš„é™åˆ¶</p>
<p>Mapçš„é”®å®é™…ä¸Šæ˜¯è·Ÿå†…å­˜åœ°å€ç»‘å®šçš„ï¼Œåªè¦å†…å­˜åœ°å€ä¸ä¸€æ ·ï¼Œå°±è§†ä¸ºä¸¤ä¸ªé”®ã€‚è¿™å°±è§£å†³äº†åŒåå±æ€§ç¢°æ’ï¼ˆclashï¼‰çš„é—®é¢˜ï¼Œæˆ‘ä»¬æ‰©å±•åˆ«äººçš„åº“çš„æ—¶å€™ï¼Œå¦‚æœä½¿ç”¨å¯¹è±¡ä½œä¸ºé”®åï¼Œå°±ä¸ç”¨æ‹…å¿ƒè‡ªå·±çš„å±æ€§å’ŒåŸä½œè€…çš„å±æ€§åŒå</p>
<p><strong>HOW</strong>   ğŸ˜®</p>
<p>ä½¿ç”¨ <code>new Map</code> æ¥åˆ›å»ºMap</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>([[<span class="number">2</span>, <span class="string">"2"</span>]])</span><br><span class="line">map.set(<span class="number">1</span>, <span class="string">"1"</span>)</span><br><span class="line"><span class="built_in">console</span>.log(map.get(<span class="number">2</span>));</span><br></pre></td></tr></table></figure>

<p>äº‹å®ä¸Šï¼Œä¸ä»…ä»…æ˜¯æ•°ç»„ï¼Œä»»ä½•å…·æœ‰<code>iterator</code>æ¥å£ã€ä¸”æ¯ä¸ªæˆå‘˜éƒ½æ˜¯ä¸€ä¸ªåŒå…ƒç´ çš„æ•°ç»„çš„æ•°æ®ç»“æ„éƒ½å¯ä»¥ä½œä¸º<code>Map</code>æ„é€ å‡½æ•°çš„å‚æ•°</p>

        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://mrrs878.github.io/2020/02/17/JavaScriptç›¸å…³-4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr.RS">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/imgs/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mr.RS">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            
            <a href="/2020/02/17/JavaScriptç›¸å…³-4/" class="post-title-link" itemprop="url">JavaScriptç›¸å…³-4</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-02-17 22:25:05 / ä¿®æ”¹æ—¶é—´ï¼š22:25:45" itemprop="dateCreated datePublished" datetime="2020-02-17T22:25:05+08:00">2020-02-17</time>
            </span>
          
            

            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaScript/" itemprop="url" rel="index">
                    <span itemprop="name">JavaScript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="æ¨¡æ‹Ÿå®ç°callã€apply"><a href="#æ¨¡æ‹Ÿå®ç°callã€apply" class="headerlink" title="æ¨¡æ‹Ÿå®ç°callã€apply"></a>æ¨¡æ‹Ÿå®ç°callã€apply</h2><p>å®ç°æ€è·¯ï¼š</p>
<ul>
<li>ä¸ä¼ å…¥ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œé‚£ä¹ˆé»˜è®¤ä¸º<code>window</code></li>
<li>æ”¹å˜äº†<code>this</code>æŒ‡å‘ï¼Œè®©æ–°å¯¹è±¡å¯ä»¥æ‰§è¡Œè¯¥å‡½æ•°ï¼Œé‚£ä¸ªæ€è·¯å¯ä»¥å˜æˆç»™æ–°å¯¹è±¡æ·»åŠ ä¸€ä¸ªå‡½æ•°ï¼Œç„¶ååœ¨æ‰§è¡Œå®Œæˆä¹‹ååˆ é™¤</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.myCall = <span class="function"><span class="keyword">function</span> (<span class="params">context</span>) </span>&#123;</span><br><span class="line">  context = context || <span class="built_in">window</span></span><br><span class="line">  context.fn = <span class="keyword">this</span></span><br><span class="line">  <span class="keyword">const</span> args = [...arguments].slice(<span class="number">1</span>)</span><br><span class="line">  <span class="keyword">const</span> result = context.fn(...args)</span><br><span class="line">  <span class="keyword">delete</span> context.fn</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Function</span>.prototype.myApply = <span class="function"><span class="keyword">function</span>(<span class="params">context</span>) </span>&#123;</span><br><span class="line">  context = context || <span class="built_in">window</span></span><br><span class="line">  context.fn = <span class="keyword">this</span></span><br><span class="line">  <span class="keyword">const</span> result = <span class="built_in">arguments</span>[<span class="number">1</span>] ? context.fn(...arguments[<span class="number">1</span>]) : context.fn()</span><br><span class="line">  <span class="keyword">delete</span> context.fn</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Function</span>.prototype.myBind = <span class="function"><span class="keyword">function</span>(<span class="params">context</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="keyword">this</span> !== <span class="string">'function'</span>)</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="built_in">TypeError</span>(<span class="string">"error"</span>)</span><br><span class="line">  <span class="keyword">const</span> that = <span class="keyword">this</span></span><br><span class="line">  <span class="keyword">const</span> args = [...arguments].slice(<span class="number">1</span>)</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">F</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">this</span> <span class="keyword">instanceof</span> F) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">new</span> that(...args, ...arguments)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> that.apply(context, args.concat(...arguments))</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> tom = &#123;</span><br><span class="line">  name: <span class="string">"tom"</span>,</span><br><span class="line">  say (tmp1, tmp2) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>.name, tmp1, tmp2);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> jack = &#123;</span><br><span class="line">  name: <span class="string">"jack"</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tom.say.myCall(jack, <span class="string">"111"</span>, <span class="string">"222"</span>)</span><br><span class="line">tom.say.call(jack, <span class="string">"111"</span>, <span class="string">"222"</span>)</span><br><span class="line"></span><br><span class="line">tom.say.myApply(jack, [<span class="string">"111"</span>, <span class="string">"222"</span>])</span><br><span class="line">tom.say.apply(jack, [<span class="string">"111"</span>, <span class="string">"222"</span>])</span><br><span class="line"></span><br><span class="line">tom.say.myBind(jack)(<span class="string">"111"</span>, <span class="string">"222"</span>)</span><br><span class="line">tom.say.bind(jack)(<span class="string">"111"</span>, <span class="string">"222"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// jack 111 222</span></span><br><span class="line"><span class="comment">// jack 111 222</span></span><br><span class="line"><span class="comment">// jack 111 222</span></span><br><span class="line"><span class="comment">// jack 111 222</span></span><br><span class="line"><span class="comment">// jack 111 222</span></span><br><span class="line"><span class="comment">// jack 111 222</span></span><br></pre></td></tr></table></figure>

<h2 id="Promise-å®ç°"><a href="#Promise-å®ç°" class="headerlink" title="Promise å®ç°"></a>Promise å®ç°</h2><p><code>Promise</code>æ˜¯ES6æ–°å¢çš„è¯­æ³•ï¼Œè§£å†³äº†å›è°ƒåœ°ç‹±çš„é—®é¢˜ã€‚å¯ä»¥æŠŠ<code>Promise</code>çœ‹ä½œæ˜¯ä¸€ä¸ªçŠ¶æ€æœºï¼Œå¯ä»¥é€šè¿‡å‡½æ•°<code>resolve</code>å’Œ<code>reject</code>å°†çŠ¶æ€è½¬å˜ä¸º<code>resolved</code>æˆ–<code>rejected</code>ï¼ŒçŠ¶æ€ä¸€æ—¦è½¬å˜å°±ä¸èƒ½å†æ¬¡å˜åŒ–</p>
<p><code>then</code>å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªæ–°çš„<code>Promise</code>å®ä¾‹ã€‚å› ä¸º<code>Promise</code>è§„èŒƒè§„å®šé™¤äº†<code>pending</code>çŠ¶æ€ï¼Œå…¶ä»–çŠ¶æ€æ˜¯ä¸å¯ä»¥æ”¹å˜çš„ï¼Œå¦‚æœè¿”å›çš„æ˜¯ä¸€ä¸ªç›¸åŒå®ä¾‹çš„è¯ï¼Œå¤šä¸ª<code>then</code>è°ƒç”¨å°±å¤±å»æ„ä¹‰äº†</p>
<p>å¯¹äº<code>then</code>ï¼Œæœ¬è´¨ä¸Šå¯ä»¥æŠŠå®ƒçœ‹æˆæ˜¯<code>flatMap</code></p>
<h2 id="Proxy"><a href="#Proxy" class="headerlink" title="Proxy"></a>Proxy</h2><p>proxyæ˜¯ES6ä¸­æ–°å¢çš„åŠŸèƒ½ï¼Œç”¨æ¥å®šä¹‰å¯¹è±¡ä¸­çš„æ“ä½œ</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onwatch</span>(<span class="params">obj, setBind, getLogger</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> handler = &#123;</span><br><span class="line">    <span class="keyword">get</span>(target, property, receiver) &#123;</span><br><span class="line">      getLogger(target, property)</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">Reflect</span>.get(target, property, receiver)</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="keyword">set</span>(target, property, value) &#123;</span><br><span class="line">      setBind(target, property, value)</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">Reflect</span>.set(target, property, value)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Proxy</span>(obj, handler)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> obj = &#123; <span class="attr">a</span>: <span class="number">1</span> &#125;</span><br><span class="line"><span class="keyword">let</span> p = onwatch(obj, (target, property, value) =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`set <span class="subst">$&#123; property &#125;</span> = <span class="subst">$&#123; value &#125;</span>`</span>);</span><br><span class="line">&#125;, (target, property) =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`get <span class="subst">$&#123; property &#125;</span> = <span class="subst">$&#123; target[property] &#125;</span>`</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">p.a = <span class="number">2</span></span><br><span class="line"><span class="built_in">console</span>.log(p.a);</span><br><span class="line"></span><br><span class="line"><span class="comment">// set a = 2</span></span><br><span class="line"><span class="comment">// get a = 2</span></span><br></pre></td></tr></table></figure>

<h2 id="æ­£åˆ™è¡¨è¾¾å¼"><a href="#æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="æ­£åˆ™è¡¨è¾¾å¼"></a>æ­£åˆ™è¡¨è¾¾å¼</h2><p><strong>å…ƒå­—ç¬¦</strong></p>
<table>
<thead>
<tr>
<th align="center">å…ƒå­—ç¬¦</th>
<th align="center">ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td align="center">.</td>
<td align="center">åŒ¹é…ä»»æ„å­—ç¬¦é™¤äº†æ¢è¡Œã€å›è½¦ç¬¦</td>
</tr>
<tr>
<td align="center">?</td>
<td align="center">ï¼Ÿä¹‹å‰å­—ç¬¦å¯é€‰</td>
</tr>
<tr>
<td align="center">[ ]</td>
<td align="center">åŒ¹é…æ–¹æ‹¬å·å†…ä»»æ„å­—ç¬¦</td>
</tr>
<tr>
<td align="center">^</td>
<td align="center">^9è¡¨ç¤ºåŒ¹é…ä»¥9å¼€å¤´</td>
</tr>
<tr>
<td align="center">{1, 2}</td>
<td align="center">åŒ¹é…1åˆ°2ä½å­—ç¬¦</td>
</tr>
<tr>
<td align="center">(abc)</td>
<td align="center">åªåŒ¹é…abc</td>
</tr>
<tr>
<td align="center">|</td>
<td align="center">åŒ¹é…|å‰åä»»æ„å­—ç¬¦</td>
</tr>
<tr>
<td align="center">\</td>
<td align="center">è½¬ä¹‰</td>
</tr>
<tr>
<td align="center">*</td>
<td align="center">åªåŒ¹é…0æ¬¡åŠä»¥ä¸Š*å‰çš„å­—ç¬¦</td>
</tr>
<tr>
<td align="center">+</td>
<td align="center">åªåŒ¹é…1æ¬¡åŠä»¥ä¸Š*å‰çš„å­—ç¬¦</td>
</tr>
</tbody></table>
<p><strong>ä¿®é¥°è¯­</strong></p>
<table>
<thead>
<tr>
<th align="center">ä¿®é¥°è¯­</th>
<th align="center">ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td align="center">i</td>
<td align="center">å¿½ç•¥å¤§å°å†™</td>
</tr>
<tr>
<td align="center">g</td>
<td align="center">å…¨å±€æœç´¢</td>
</tr>
<tr>
<td align="center">m</td>
<td align="center">å¤šè¡Œ</td>
</tr>
</tbody></table>
<p><strong>å­—ç¬¦ç®€å†™</strong></p>
<table>
<thead>
<tr>
<th align="center">ç®€å†™</th>
<th align="center">ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td align="center">\w</td>
<td align="center">åŒ¹é…å­—æ¯æ•°å­—æˆ–ä¸‹åˆ’çº¿</td>
</tr>
<tr>
<td align="center">\W</td>
<td align="center">å’ŒğŸ‘†ç›¸å</td>
</tr>
<tr>
<td align="center">\s</td>
<td align="center">åŒ¹é…ä»»æ„çš„å­—ç¬¦</td>
</tr>
<tr>
<td align="center">\d</td>
<td align="center">åŒ¹é…æ•°å­—</td>
</tr>
<tr>
<td align="center">\b</td>
<td align="center">åŒ¹é…å•è¯çš„å¼€å§‹æˆ–ç»“æŸ</td>
</tr>
</tbody></table>
<h2 id="åƒåœ¾å›æ”¶æœºåˆ¶"><a href="#åƒåœ¾å›æ”¶æœºåˆ¶" class="headerlink" title="åƒåœ¾å›æ”¶æœºåˆ¶"></a>åƒåœ¾å›æ”¶æœºåˆ¶</h2><p><strong>WHAT</strong></p>
<p>ä¸å†ç”¨åˆ°çš„å†…å­˜æ²¡æœ‰åŠæ—¶é‡Šæ”¾ï¼Œå°±å«åšå†…å­˜æ³„æ¼ã€‚å¦‚æœè¿™ç§æƒ…å†µè¶Šæ¥è¶Šå¤šï¼Œä¼šå¯¼è‡´å†…å­˜ä¸å¤Ÿç”¨è€Œç³»ç»Ÿå´©æºƒã€‚å¾ˆå¤šç¼–ç¨‹è¯­è¨€éœ€è¦æ‰‹åŠ¨é‡Šæ”¾å†…å­˜ï¼Œä½†ä¹Ÿæœ‰ä¸€éƒ¨åˆ†ç¼–ç¨‹è¯­è¨€æä¾›è‡ªåŠ¨å†…å­˜ç®¡ç†ï¼Œè¿™è¢«ç§°ä¸ºåƒåœ¾å›æ”¶æœºåˆ¶ã€‚</p>
<p><strong>WHY</strong></p>
<p>é¿å…å‡ºç°å†…å­˜æ³„æ¼</p>
<p><strong>HOW</strong></p>
<p>V8ä¸‹çš„åƒåœ¾å›æ”¶æœºåˆ¶ï¼š</p>
<p>V8å®ç°äº†å‡†ç¡®å¼GCï¼ŒGCç®—æ³•é‡‡ç”¨äº†åˆ†ä»£å¼åƒåœ¾å›æ”¶æœºåˆ¶ï¼Œå› æ­¤V8å°†å†…å­˜ï¼ˆå †ï¼‰åˆ†ä¸º<strong>æ–°ç”Ÿä»£</strong>å’Œ<strong>è€ç”Ÿä»£</strong>ä¸¤éƒ¨åˆ†</p>
<ul>
<li><p>æ–°ç”Ÿä»£ç®—æ³•</p>
<p>æ–°ç”Ÿä»£ä¸­çš„å¯¹è±¡ä¸€èˆ¬å­˜æ´»æ—¶é—´è¾ƒçŸ­ï¼Œä½¿ç”¨ scavenge GC ç®—æ³•</p>
<p>åœ¨æ–°ç”Ÿä»£ç©ºé—´ä¸­ï¼Œå†…å­˜ç©ºé—´åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œåˆ†åˆ«ä¸º<strong>fromç©ºé—´</strong>å’Œ<strong>toç©ºé—´</strong>ã€‚åœ¨è¿™ä¸¤ä¸ªç©ºé—´ä¸­ï¼Œå¿…å®šæœ‰ä¸€ä¸ªç©ºé—´æ—¶ä½¿ç”¨çš„ï¼Œå¦ä¸€ä¸ªç©ºé—´æ˜¯ç©ºé—²çš„ã€‚æ–°åˆ†é…çš„å¯¹è±¡ä¼šè¢«æ”¾å…¥fromç©ºé—´ä¸­ã€‚å½“fromç©ºé—´è¢«å æ»¡æ—¶ï¼Œæ–°ç”Ÿä»£GCå°±ä¼šå¯åŠ¨äº†ã€‚ç®—æ³•ä¼šæ£€æŸ¥fromç©ºé—´ä¸­å­˜æ´»çš„å¯¹è±¡å¹¶å¤åˆ¶åˆ°toç©ºé—´ä¸­ï¼Œå¦‚æœæœ‰å¤±æ´»çš„å¯¹è±¡å°±ä¼šé”€æ¯ã€‚å½“å¤åˆ¶å®Œæˆåå°†fromç©ºé—´å’Œtoç©ºé—´äº’æ¢ï¼Œè¿™æ ·GCå°±ç»“æŸäº†</p>
</li>
<li><p>è€ç”Ÿä»£ç®—æ³•</p>
<p>è€ç”Ÿä»£ä¸­çš„å¯¹è±¡ä¸€èˆ¬å­˜æ´»äº‹ä»¶è¾ƒå¸¸åˆ‡æ•°é‡ä¹Ÿå¤šï¼Œä½¿ç”¨äº†ä¸¤ä¸ªç®—æ³•ï¼Œåˆ†åˆ«æ˜¯æ ‡è®°æ¸…é™¤ç®—æ³•å’Œæ ‡è®°å‹ç¼©ç®—æ³•</p>
<p>ä»¥ä¸‹æƒ…å†µå¯¹è±¡ä¼šå‡ºç°åœ¨è€ç”Ÿä»£ç©ºé—´ä¸­</p>
<ul>
<li>æ–°ç”Ÿä»£ä¸­çš„å¯¹è±¡å·²ç»å†è¿‡ä¸€æ¬¡scavengeç®—æ³•</li>
<li>toç©ºé—´ä¸­çš„å¯¹è±¡å æ¯”å¤§å°è¶…è¿‡25%ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä¸ºäº†ä¸å½±å“åˆ°å†…å­˜åˆ†é…ï¼Œä¼šå°†å¯¹è±¡ä»æ–°ç”Ÿä»£ç©ºé—´ç§»åˆ°è€ç”Ÿä»£ç©ºé—´ä¸­</li>
</ul>
<p>åœ¨è€ç”Ÿä»£ä¸­ï¼Œä»¥ä¸‹æƒ…å†µä¼šå¯åŠ¨æ ‡è®°æ¸…æ¥šç®—æ³•</p>
<ul>
<li>æŸä¸€ç©ºé—´æ²¡æœ‰åˆ†å—çš„æ—¶å€™</li>
<li>ç©ºé—´ä¸èƒ½ä¿è¯æ–°ç”Ÿä»£ä¸­çš„å¯¹è±¡ç§»åŠ¨åˆ°è€ç”Ÿä»£ä¸­</li>
</ul>
<p>åœ¨è¿™ä¸ªé˜¶æ®µä¸­ï¼Œä¼šéå†å †ä¸­æ‰€æœ‰çš„å¯¹è±¡ï¼Œç„¶åæ ‡è®°æ´»çš„å¯¹è±¡ï¼Œåœ¨æ ‡è®°å®Œæˆåï¼Œé”€æ¯æ‰€æœ‰æ²¡æœ‰è¢«æ ‡è®°çš„å¯¹è±¡ã€‚åœ¨æ ‡è®°å¤§å‹å †å†…å­˜æ—¶ï¼Œå¯èƒ½éœ€è¦å‡ ç™¾æ¯«ç§’æ‰èƒ½å®Œæˆä¸€æ¬¡æ ‡è®°ï¼Œè¿™å°±ä¼šå¯¼è‡´ä¸€äº›æ€§èƒ½ä¸Šçš„é—®é¢˜ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œ2011å¹´V8ä»stop-the-worldæ ‡è®°åˆ‡æ¢åˆ°å¢é‡æ ‡è®°</p>
<p>æ¸…æ¥šå¯¹è±¡åä¼šé€ æˆå †å†…å­˜å‡ºç°ç¢ç‰‡çš„æƒ…å†µï¼Œå½“ç¢ç‰‡è¶…è¿‡ä¸€å®šå…ˆä¹‹åä¼šå¯åŠ¨å‹ç¼©ç®—æ³•ï¼Œåœ¨å‹ç¼©è¿‡ç¨‹ä¸­å°†è´è¶å¯¹è±¡å‘ä¸€ç«¯ç§»åŠ¨ï¼Œç›´åˆ°æ‰€æœ‰å¯¹è±¡éƒ½ç§»åŠ¨å®Œæˆåæ¸…ç†æ‰ä¸éœ€è¦çš„å†…å­˜</p>
</li>
</ul>
<h2 id="ç»§æ‰¿"><a href="#ç»§æ‰¿" class="headerlink" title="ç»§æ‰¿"></a>ç»§æ‰¿</h2><ol>
<li><p>ç»å…¸ç»§æ‰¿ï¼ˆæ„é€ å‡½æ•°ï¼‰</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Father</span>(<span class="params">colors</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.colors = colors</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Son</span>(<span class="params">colors</span>) </span>&#123;</span><br><span class="line">  Father.call(<span class="keyword">this</span>, colors)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> s = <span class="keyword">new</span> Son([<span class="string">"red"</span>, <span class="string">"green"</span>, <span class="string">"blue"</span>])</span><br><span class="line"><span class="built_in">console</span>.log(s.colors);</span><br></pre></td></tr></table></figure>

<p>ä¼˜ç‚¹ï¼š</p>
<p>â€‹    å¯ä»¥ä¼ é€’æ„é€ å‚æ•°</p>
<p>ç¼ºç‚¹ï¼š</p>
<ul>
<li>ç»§æ‰¿çš„æ–¹æ³•éƒ½åœ¨æ„é€ å‡½æ•°ä¸­å®šä¹‰ï¼Œæ„é€ å‡½æ•°ä¸èƒ½å¤Ÿå¤ç”¨äº†</li>
<li>çˆ¶ç±»ä¸­å®šä¹‰çš„æ–¹æ³•å¯¹äºå­ç±»è€Œè¨€æ˜¯ä¸å¯è§çš„</li>
</ul>
</li>
<li><p>åŸå‹ç»§æ‰¿</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">object</span>(<span class="params">o</span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">F</span>(<span class="params"></span>) </span>&#123;&#125;</span><br><span class="line">  F.prototype = o</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> F()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> person = &#123;</span><br><span class="line">  name: <span class="string">"tom"</span>,</span><br><span class="line">  friends: [<span class="string">"jack"</span>, <span class="string">"linda"</span>]</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> p1 = object(person)</span><br><span class="line">p1.name = <span class="string">"p1"</span></span><br><span class="line">p1.friends.push(<span class="string">"bob"</span>)</span><br><span class="line"><span class="keyword">let</span> p2 = <span class="built_in">Object</span>.create(person)</span><br><span class="line">p2.name = <span class="string">"p2"</span></span><br><span class="line">p2.friends.push(<span class="string">"lili"</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(person.friends);</span><br></pre></td></tr></table></figure>

<p>åœ¨<code>object</code>å‡½æ•°å†…éƒ¨ï¼Œå…ˆåˆ›å»ºäº†ä¸€ä¸ªä¸´æ—¶æ€§çš„æ„é€ å‡½æ•°ï¼Œç„¶åå°†ä¼ å…¥çš„å¯¹è±¡ä½œä¸ºè¿™ä¸ªæ„é€ å‡½æ•°çš„åŸå‹ï¼Œæœ€åè¿”å›äº†è¿™ä¸ªä¸´æ—¶ç±»å‹çš„ä¸€ä¸ªå®ä¾‹ã€‚ä»æœ¬è´¨ä¸Šè®²ï¼Œ<code>object()</code>å°†ä¼ å…¥å…¶ä¸­çš„å¯¹è±¡æ‰§è¡Œäº†ä¸€æ¬¡<strong>æµ…å¤åˆ¶</strong></p>
<p>åŸå‹ç»§æ‰¿é€‚ç”¨äºåªæƒ³è®©ä¸€ä¸ªå¯¹è±¡ä¸å¦ä¸€ä¸ªå¯¹è±¡ä¿æŒç±»ä¼¼çš„æƒ…å†µ</p>
</li>
<li><p>ç»„åˆç»§æ‰¿ ğŸ‘</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Father</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name</span><br><span class="line">  <span class="keyword">this</span>.colors = [<span class="string">"red"</span>, <span class="string">"green"</span>, <span class="string">"blue"</span>]</span><br><span class="line">&#125;</span><br><span class="line">Father.prototype.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Son</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ç»§æ‰¿çˆ¶ç±»å±æ€§ï¼Œç¬¬ä¸€æ¬¡è°ƒç”¨Father() </span></span><br><span class="line">  Father.call(<span class="keyword">this</span>, name)</span><br><span class="line">  <span class="keyword">this</span>.age = age</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ç»§æ‰¿çˆ¶ç±»æ–¹æ³•ï¼Œç¬¬äºŒæ¬¡è°ƒç”¨Father()</span></span><br><span class="line">Son.prototype = <span class="keyword">new</span> Father()</span><br><span class="line">Son.prototype.sayAge = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.age)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> s1 = <span class="keyword">new</span> Son(<span class="string">"tom"</span>, <span class="number">21</span>)</span><br><span class="line">s1.colors.push(<span class="string">"black"</span>)</span><br><span class="line"><span class="built_in">console</span>.log(s1.colors)</span><br><span class="line">s1.sayAge()</span><br><span class="line">s1.sayName()</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> s2 = <span class="keyword">new</span> Son(<span class="string">"jack"</span>, <span class="number">22</span>)</span><br><span class="line"><span class="built_in">console</span>.log(s2.colors)</span><br></pre></td></tr></table></figure>
</li>
<li><p>å¯„ç”Ÿå¼ç»§æ‰¿</p>
<p>å¯„ç”Ÿå¼ç»§æ‰¿æ˜¯ä¸åŸå‹é“¾ç»§æ‰¿ç´§å¯†ç›¸å…³çš„ä¸€ç§æ€è·¯ã€‚å¯„ç”Ÿå¼ç»§æ‰¿çš„æ€è·¯ä¸å¯„ç”Ÿæ„é€ å‡½æ•°å’Œå·¥å‚æ¨¡å¼ç±»ä¼¼ï¼Œå³åˆ›å»ºä¸€ä¸ªä»…ç”¨äºå°è£…ç»§æ‰¿è¿‡ç¨‹çš„å‡½æ•°ï¼Œè¯¥å‡½æ•°åœ¨å†…éƒ¨ä»¥æŸç§æ–¹å¼æ¥å¢å¼ºå¯¹è±¡ï¼Œæœ€åå†åƒçœŸçš„æ˜¯å®ƒåšäº†æ‰€æœ‰å·¥ä½œä¸€æ ·è¿”å›å¯¹è±¡ã€‚</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">createAnother</span>(<span class="params">original</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// object(): ä»»ä½•èƒ½è¿”å›æ–°å¯¹è±¡çš„å‡½æ•°</span></span><br><span class="line">    <span class="keyword">const</span> clone = object(original)</span><br><span class="line">    clone.sayHi = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        conosle.log(<span class="string">"hi"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> clone                </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿ ğŸ‘ğŸ‘</p>
<p>ç»„åˆç»§æ‰¿çš„æœ€å¤§é—®é¢˜åœ¨äºæ— è®ºä»€ä¹ˆæƒ…å†µä¸‹éƒ½ä¼šè°ƒç”¨ä¸¤æ¬¡çˆ¶ç±»å‹æ„é€ å‡½æ•°</p>
<p>å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿å³<strong>é€šè¿‡å€Ÿç”¨æ„é€ å‡½æ•°æ¥ç»§æ‰¿å±æ€§ï¼Œé€šè¿‡åŸå‹é“¾çš„æ··æˆå½¢å¼æ¥ç»§æ‰¿æ–¹æ³•</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">inheritPrototype</span>(<span class="params">subType, superType</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> prototype = <span class="built_in">Object</span>.create(superType.prototype)</span><br><span class="line">  prototype.constructor = subType</span><br><span class="line">  subType.prototype = prototype</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SuperType</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = name</span><br><span class="line">  <span class="keyword">this</span>.colors = [<span class="string">"red"</span>, <span class="string">"green"</span>, <span class="string">"blue"</span>]</span><br><span class="line">&#125;</span><br><span class="line">SuperType.prototype.sayName = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.name)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">SubType</span>(<span class="params">name, age</span>) </span>&#123;</span><br><span class="line">  SuperType.call(<span class="keyword">this</span>, name)</span><br><span class="line">  <span class="keyword">this</span>.age = age</span><br><span class="line">&#125;</span><br><span class="line">inheritPrototype(SubType, SuperType)</span><br><span class="line">SubType.prototype.sayAge = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="keyword">this</span>.age)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> sub1 = <span class="keyword">new</span> SubType(<span class="string">"sub1"</span>, <span class="number">21</span>)</span><br><span class="line">sub1.sayAge()</span><br><span class="line">sub1.sayName()</span><br></pre></td></tr></table></figure>

</li>
</ol>

        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://mrrs878.github.io/2020/02/14/JavaScriptç›¸å…³-3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr.RS">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/imgs/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mr.RS">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            
            <a href="/2020/02/14/JavaScriptç›¸å…³-3/" class="post-title-link" itemprop="url">JavaScriptç›¸å…³-3</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-02-14 23:22:46 / ä¿®æ”¹æ—¶é—´ï¼š23:23:32" itemprop="dateCreated datePublished" datetime="2020-02-14T23:22:46+08:00">2020-02-14</time>
            </span>
          
            

            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaScript/" itemprop="url" rel="index">
                    <span itemprop="name">JavaScript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="æ‰§è¡Œä¸Šä¸‹æ–‡"><a href="#æ‰§è¡Œä¸Šä¸‹æ–‡" class="headerlink" title="æ‰§è¡Œä¸Šä¸‹æ–‡"></a>æ‰§è¡Œä¸Šä¸‹æ–‡</h2><p>å½“æ‰§è¡ŒJavaScriptä»£ç æ—¶ï¼Œä¼šäº§ç”Ÿä¸‰ç§æ‰§è¡Œä¸Šä¸‹æ–‡ï¼š</p>
<ul>
<li>å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡</li>
<li>å‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡</li>
<li><code>eval</code>æ‰§è¡Œä¸Šä¸‹æ–‡</li>
</ul>
<p>æ¯ä¸ªæ‰§è¡Œä¸Šä¸‹æ–‡ä¸­éƒ½æœ‰ä¸‰ç§é‡è¦çš„å±æ€§ï¼š</p>
<ul>
<li>å˜é‡å¯¹è±¡ï¼ˆVOï¼‰ï¼ŒåŒ…å«å˜é‡ã€å‡½æ•°å£°æ˜å’Œå‡½æ•°çš„å½¢å‚ï¼Œè¯¥å±æ€§åªèƒ½åœ¨å…¨å±€æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­è®¿é—®ï¼ˆå‡½æ•°æ‰§è¡Œä¸Šä¸‹æ–‡ä¸­å°‰AOï¼‰</li>
<li>ä½œç”¨åŸŸé“¾ï¼ˆScopeï¼‰ï¼ŒJavaScripté‡‡ç”¨è¯æ³•ä½œç”¨åŸŸï¼Œä¹Ÿå°±æ˜¯è¯´å˜é‡çš„ä½œç”¨åŸŸå®åœ¨å®šä¹‰çš„æ—¶å€™å°±å†³å®šäº†ï¼ŒåŒ…å«è‡ªèº«å˜é‡å¯¹è±¡å’Œä¸Šçº§å˜é‡å¯¹è±¡çš„åˆ—è¡¨ï¼Œé€šè¿‡<code>[[Scope]]</code>å±æ€§æŸ¥æ‰¾ä¸Šçº§å˜é‡</li>
<li><code>this</code></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a = <span class="number">10</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params">i</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> b = <span class="number">20</span></span><br><span class="line">&#125;</span><br><span class="line">foo()</span><br><span class="line"></span><br><span class="line">stack = [</span><br><span class="line">    globalContext,</span><br><span class="line">    fooContext</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">globalContext.VO === global</span><br><span class="line">globalContext.VO = &#123;</span><br><span class="line">    a: <span class="literal">undefined</span>,</span><br><span class="line">    foo: &lt;Function&gt;</span><br><span class="line">&#125;</span><br><span class="line">fooContext.AO === foo.AO</span><br><span class="line">fooContext.AO = &#123;</span><br><span class="line">    i: undefined,</span><br><span class="line">    b: undefined,</span><br><span class="line">    arguments: &lt;&gt;</span><br><span class="line">&#125;</span><br><span class="line">// arguments æ˜¯å‡½æ•°ç‹¬æœ‰çš„å¯¹è±¡ï¼ˆç®­å¤´å‡½æ•°æ²¡æœ‰ï¼‰</span><br><span class="line">// è¯¥å¯¹è±¡æ—¶ä¸€ä¸ªä¼ªæ•°ç»„</span><br><span class="line"></span><br><span class="line">fooContext.[[Scope]] = &#123;</span><br><span class="line">    globalContext.VO</span><br><span class="line">&#125;</span><br><span class="line">fooContext.Scope = fooContext.[[Scope]] + fooContext.VO</span><br><span class="line">fooContext.Scope = [</span><br><span class="line">    fooContext.VO,</span><br><span class="line">    globalContext.VO</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<h2 id="å˜é‡æå‡"><a href="#å˜é‡æå‡" class="headerlink" title="å˜é‡æå‡"></a>å˜é‡æå‡</h2><p>é€šä¿—è§£é‡Šï¼š</p>
<p>å°†å£°æ˜çš„ä»£ç ç§»åŠ¨åˆ°äº†é¡¶éƒ¨</p>
<p>å‡†ç¡®è§£é‡Šï¼šğŸ‘</p>
<p>åœ¨ç”Ÿæˆæ‰§è¡Œä¸Šä¸‹æ–‡æ—¶ï¼Œä¼šæœ‰ä¸¤ä¸ªé˜¶æ®µ</p>
<ol>
<li>åˆ›å»ºçš„é˜¶æ®µï¼ˆå…·ä½“æ­¥éª¤æ˜¯åˆ›å»ºVOï¼‰ï¼ŒJavaScriptè§£é‡Šå™¨ä¼šæ‰¾å‡ºéœ€è¦æå‡çš„å˜é‡å’Œå‡½æ•°ï¼Œå¹¶ä¸”ç»™å®ƒä»¬æå‰åœ¨å†…å­˜ä¸­å¼€è¾Ÿå¥½ç©ºé—´ï¼Œå‡½æ•°çš„è¯ä¼šå°†æ•´ä¸ªå‡½æ•°å­˜å…¥å†…å­˜ï¼Œå˜é‡ä¹‹ç”Ÿå‘½å¹¶ä¸”èµ‹å€¼ä¸º<code>undefined</code></li>
<li>ä»£ç æ‰§è¡Œé˜¶æ®µï¼ˆå¯ä»¥ç›´æ¥ä½¿ç”¨å˜é‡/å‡½æ•°ï¼‰</li>
</ol>
<h2 id="é˜²æŠ–"><a href="#é˜²æŠ–" class="headerlink" title="é˜²æŠ–"></a>é˜²æŠ–</h2><p>åœ¨ä¸€å®šæ—¶é—´å¤šæ¬¡è§¦å‘ä½†å†…åªè°ƒç”¨ä¸€æ¬¡</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">debounce</span> (<span class="params">func, wait = <span class="number">50</span>, immediate = true</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> timer, context, args;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> later = <span class="function"><span class="params">()</span> =&gt;</span> setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    timer = <span class="literal">null</span></span><br><span class="line">    <span class="keyword">if</span> (!immediate) &#123;</span><br><span class="line">      func.apply(context, args)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, wait)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">...params</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (timer) &#123;</span><br><span class="line">      clearTimeout(timer)</span><br><span class="line">      timer = later()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      timer = later()</span><br><span class="line">      <span class="keyword">if</span> (immediate) &#123;</span><br><span class="line">        func.apply(<span class="keyword">this</span>, params)</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        context = <span class="keyword">this</span></span><br><span class="line">        args = params</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

    
        
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block home" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://mrrs878.github.io/2020/02/12/JavaScriptç›¸å…³-2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr.RS">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/imgs/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mr.RS">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            
            <a href="/2020/02/12/JavaScriptç›¸å…³-2/" class="post-title-link" itemprop="url">JavaScriptç›¸å…³-2</a>
          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-02-12 22:53:13" itemprop="dateCreated datePublished" datetime="2020-02-12T22:53:13+08:00">2020-02-12</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-02-18 10:44:40" itemprop="dateModified" datetime="2020-02-18T10:44:40+08:00">2020-02-18</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaScript/" itemprop="url" rel="index">
                    <span itemprop="name">JavaScript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h2><p><strong>WHAT</strong></p>
<p><strong>Promise</strong> å¯¹è±¡ç”¨äºè¡¨ç¤ºä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„æœ€ç»ˆå®Œæˆ (æˆ–å¤±è´¥), åŠå…¶ç»“æœå€¼.</p>
<p>å¼‚æ­¥ç¼–ç¨‹çš„ä¸€ç§è§£å†³æ–¹æ¡ˆ</p>
<p><code>Promise</code>å¯èƒ½å¤„äºä»¥ä¸‹ä¸‰ä¸ªçŠ¶æ€ä¹‹ä¸€ï¼š<code>fulfilled</code>ã€<code>rejected</code>ã€<code>pending</code>ã€‚ç”¨æˆ·å¯ä»¥å¯¹<code>Promise</code>æ·»åŠ å›è°ƒå‡½æ•°æ¥å¤„ç†æ“ä½œæˆåŠŸçš„ç»“æœæˆ–å¤±è´¥çš„åŸå› </p>
<p><strong>WHY</strong></p>
<p>ä¼ ç»Ÿçš„å¼‚æ­¥ç¼–ç¨‹ç¼ºç‚¹éš¾ä»¥å¿å—:</p>
<ul>
<li>ä»£ç è‡ƒè‚¿</li>
<li>å¯è¯»æ€§å·®</li>
<li>è€¦åˆåº¦è¿‡é«˜ï¼Œå¯ç»´æŠ¤æ€§å·®</li>
<li>ä»£ç å¤ç”¨æ€§å·®</li>
<li>åªèƒ½åœ¨å›è°ƒé‡Œå¤„ç†å¼‚å¸¸</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">è¯·æ±‚<span class="number">1</span>(<span class="function"><span class="keyword">function</span>(<span class="params">è¯·æ±‚ç»“æœ<span class="number">1</span></span>)</span>&#123;</span><br><span class="line">    è¯·æ±‚<span class="number">2</span>(<span class="function"><span class="keyword">function</span>(<span class="params">è¯·æ±‚ç»“æœ<span class="number">2</span></span>)</span>&#123;</span><br><span class="line">        è¯·æ±‚<span class="number">3</span>(<span class="function"><span class="keyword">function</span>(<span class="params">è¯·æ±‚ç»“æœ<span class="number">3</span></span>)</span>&#123;</span><br><span class="line">            è¯·æ±‚<span class="number">4</span>(<span class="function"><span class="keyword">function</span>(<span class="params">è¯·æ±‚ç»“æœ<span class="number">4</span></span>)</span>&#123;</span><br><span class="line">                è¯·æ±‚<span class="number">5</span>(<span class="function"><span class="keyword">function</span>(<span class="params">è¯·æ±‚ç»“æœ<span class="number">5</span></span>)</span>&#123;</span><br><span class="line">                    è¯·æ±‚<span class="number">6</span>(<span class="function"><span class="keyword">function</span>(<span class="params">è¯·æ±‚ç»“æœ<span class="number">6</span></span>)</span>&#123;</span><br><span class="line">                        ...</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(è¯·æ±‚<span class="number">1</span>)</span><br><span class="line">    .then(è¯·æ±‚<span class="number">2</span>(è¯·æ±‚ç»“æœ<span class="number">1</span>))</span><br><span class="line">    .then(è¯·æ±‚<span class="number">3</span>(è¯·æ±‚ç»“æœ<span class="number">2</span>))</span><br><span class="line">    .then(è¯·æ±‚<span class="number">4</span>(è¯·æ±‚ç»“æœ<span class="number">3</span>))</span><br><span class="line">    .then(è¯·æ±‚<span class="number">5</span>(è¯·æ±‚ç»“æœ<span class="number">4</span>))</span><br><span class="line">    .catch(å¤„ç†å¼‚å¸¸(å¼‚å¸¸ä¿¡æ¯))</span><br></pre></td></tr></table></figure>

<p><strong>HOW</strong></p>
<p>å¸¸ç”¨APIï¼š</p>
<ul>
<li><p><code>Promise.resolve(value)</code></p>
<p>è¿”å›ä¸€ä¸ªçŠ¶æ€ç”±ç»™å®šçš„<code>value</code>å†³å®šçš„<code>Promise</code>å¯¹è±¡ã€‚å¦‚æœè¯¥å€¼æ—¶<code>theable</code>ï¼ˆå³å¸¦æœ‰thenæ–¹æ³•çš„å¯¹è±¡ï¼‰ï¼Œè¿”å›çš„<code>Promise</code>å¯¹è±¡çš„æœ€ç»ˆçŠ¶æ€æ˜¯ç”±<code>then</code>æ–¹æ³•å†³å®šï¼›å¦åˆ™ï¼ˆè¯¥<code>value</code>ä¸ºç©ºã€åŸºæœ¬ç±»å‹æˆ–ä¸å¸¦<code>then</code>æ–¹æ³•çš„å¯¹è±¡ï¼‰è¿”å›çš„<code>Promise</code>å¯¹è±¡çŠ¶æ€ä¸º<code>fulfilled</code>ï¼Œå¹¶ä¸”å°†è¯¥<code>value</code>ä¼ é€’ç»™å¯¹åº”çš„<code>then</code>æ–¹æ³•ã€‚é€šå¸¸ï¼Œå¦‚æœä¸çŸ¥é“ä¸€ä¸ªå€¼æ˜¯å¦æ˜¯<code>Promise</code>å¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨<code>Promsie.resolve(value)</code>æ¥è¿”å›ä¸€ä¸ª<code>Promise</code>å¯¹è±¡ï¼Œè¿™æ ·å°±èƒ½å°†è¯¥<code>value</code>ä»¥<code>Promise</code>å¯¹è±¡å½¢å¼ä½¿ç”¨</p>
</li>
<li><p><code>Promise.reject(value)</code></p>
<p>è¿”å›ä¸€ä¸ªçŠ¶æ€ä¸ºå¤±è´¥çš„<code>Promise</code>å¯¹è±¡ï¼Œå¹¶å°†ç»™å®šçš„å¤±è´¥ä¿¡æ¯ä¼ é€’ç»™å¯¹åº”çš„å‡ºå¤„ç†æ–¹æ³•</p>
</li>
<li><p><code>Promise.race(interable)</code></p>
<p>å½“<code>interable</code>å‚æ•°é‡Œçš„ä»»æ„ä¸€ä¸ªå­<code>promise</code>è¢«æ‰§è¡Œå¤±è´¥æˆ–æˆåŠŸåï¼Œçˆ¶<code>promise</code>é©¬ä¸Šä¹Ÿä¼šç”¨å­<code>promise</code>çš„æˆåŠŸè¿”å›å€¼æˆ–å¤±è´¥è¯¦æƒ…ä½œä¸ºå‚æ•°è°ƒç”¨çˆ¶<code>promsie</code>ç»‘å®šçš„ç›¸åº”å¥æŸ„å¹¶è¿”å›è¯¥<code>promsie</code>å¯¹è±¡</p>
</li>
<li><p><code>Promise.all(interable)</code></p>
<p>è¿™ä¸ªæ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªæ–°çš„<code>promise</code>å¯¹è±¡ï¼Œè¯¥<code>promise</code>å¯¹è±¡åœ¨<code>interable</code>å‚æ•°å¯¹è±¡é‡Œæ‰€æœ‰çš„<code>promise</code>å¯¹è±¡éƒ½æˆåŠŸçš„æ—¶å€™æ‰ä¼šè§¦å‘æˆåŠŸï¼Œä¸€æ—¦æœ‰ä»»ä½•ä¸€ä¸ª<code>interable</code>é‡Œçš„<code>promise</code>å¯¹è±¡å¤±è´¥åˆ™ç«‹å³è§¦å‘è¯¥<code>promise</code>å¯¹è±¡çš„å¤±è´¥ã€‚è¿™ä¸ªæ–°çš„<code>promise</code>å¯¹è±¡åœ¨è§¦å‘æˆåŠŸçŠ¶æ€ä»¥åï¼Œä¼šæŠŠä¸€ä¸ªåŒ…å«<code>interable</code>é‡Œæ‰€æœ‰<code>promise</code>è¿”å›å€¼çš„æ•°ç»„ä½œä¸ºæˆåŠŸå›è°ƒçš„è¿”å›å€¼ï¼Œé¡ºåºè·Ÿ<code>interable</code>çš„é¡ºåºä¿æŒä¸€è‡´ï¼›å¦‚æœè¿™ä¸ªæ–°çš„<code>promise</code>å¯¹è±¡å‡ºå‘äº†å¤±è´¥çŠ¶æ€ï¼Œå®ƒä¼šæŠŠ<code>interable</code>é‡Œç¬¬ä¸€ä¸ªè§¦å‘å¤±è´¥çš„<code>promise</code>å¯¹è±¡çš„é”™è¯¯ä¿¡æ¯ä½œä¸ºå®ƒçš„å¤±è´¥é”™è¯¯ä¿¡æ¯ã€‚<code>Promise.all</code>æ–¹æ³•å¸¸ç”¨äºå¤„ç†å¤šä¸ª<code>promise</code>å¯¹è±¡çš„çŠ¶æ€é›†åˆ</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">"fs"</span>)</span><br><span class="line"></span><br><span class="line">fs.readFile(<span class="string">"./index.html"</span>, &#123; <span class="attr">encoding</span>: <span class="string">"utf8"</span> &#125;, (err, data) =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(err, data);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">_readFile</span>(<span class="params">path, options</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    fs.readFile(<span class="string">"./index.html"</span>, options, (err, data) =&gt; &#123;</span><br><span class="line">      <span class="keyword">if</span>(err)</span><br><span class="line">        reject(err)</span><br><span class="line">      <span class="keyword">else</span></span><br><span class="line">        resolve(data)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">(<span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> data = <span class="keyword">await</span> _readFile(<span class="string">"./index.html"</span>, <span class="string">"utf8"</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(data);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(error);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)()</span><br></pre></td></tr></table></figure>

<h2 id="éå†å¯¹è±¡çš„å±æ€§å’Œæ•°ç»„å…ƒç´ çš„æ–¹æ³•"><a href="#éå†å¯¹è±¡çš„å±æ€§å’Œæ•°ç»„å…ƒç´ çš„æ–¹æ³•" class="headerlink" title="éå†å¯¹è±¡çš„å±æ€§å’Œæ•°ç»„å…ƒç´ çš„æ–¹æ³•"></a>éå†å¯¹è±¡çš„å±æ€§å’Œæ•°ç»„å…ƒç´ çš„æ–¹æ³•</h2><p>å¯¹è±¡ï¼š</p>
<ul>
<li><p><code>for</code>å¾ªç¯ ğŸ‘</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> property <span class="keyword">in</span> obj)</span><br><span class="line">    <span class="built_in">console</span>.log(property)</span><br></pre></td></tr></table></figure>

<p>ç¼ºç‚¹ï¼šä¼šéå†åˆ°å®ƒçš„ç»§æ‰¿å±æ€§ï¼Œåœ¨ä½¿ç”¨ä¹‹å‰éœ€è¦åŠ å…¥<code>obj.hasOwnProperty(property)</code></p>
</li>
<li><p><code>Object.keys(obj).forEach()</code> ğŸ‘</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.keys(obj).forEach(<span class="function"><span class="params">property</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(property)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><code>Object.keys</code>è¿”å›ä¸€ä¸ªæœ‰ç»™å®šå¯¹è±¡çš„è‡ªèº«å¯æšä¸¾å±æ€§ç»„æˆçš„æ•°ç»„</p>
</li>
<li><p><code>Object.getOwnPropertyNames(obj).forEach</code> ğŸ‘</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.getOwnPropertyNames(obj).forEach(<span class="function"><span class="params">property</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(property)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p><code>Object.getOwnPropertyNames</code>è¿”å›ä¸€ä¸ªç”±æŒ‡å®šå¯¹è±¡çš„æ‰€æœ‰è‡ªèº«å±æ€§çš„å±æ€§åï¼ˆåŒ…æ‹¬ä¸å¯æšä¸¾å±æ€§ä½†ä¸åŒ…æ‹¬<code>Symbol</code>å€¼ä½œä¸ºåç§°çš„å±æ€§ï¼‰ç»„æˆçš„æ•°ç»„</p>
</li>
<li><p><code>Reflect.ownKeys(target)</code> ğŸ‘</p>
<p>åŸºæœ¬ç­‰åŒäº<code>Object.getOwnPeopertyNames</code> + <code>Object.getOwnPropertySymbols</code></p>
</li>
</ul>
<p>æ•°ç»„ï¼š<strong>å„å–æ‰€éœ€</strong></p>
<ul>
<li><p><code>for</code>å¾ªç¯</p>
<p>æ™®é€šéå†æ–¹æ³•ï¼Œè¾ƒå¸¸ç”¨</p>
</li>
<li><p><code>arr.forEach</code></p>
<p>ç›¸è¾ƒäº<code>for</code>ï¼Œ<code>forEach</code>ä¸å¯æå‰ç»“æŸå¾ªç¯</p>
</li>
<li><p><code>arr.map/reduce</code></p>
</li>
</ul>
<h2 id="å¯å˜å¯¹è±¡å’Œä¸å¯å˜å¯¹è±¡"><a href="#å¯å˜å¯¹è±¡å’Œä¸å¯å˜å¯¹è±¡" class="headerlink" title="å¯å˜å¯¹è±¡å’Œä¸å¯å˜å¯¹è±¡"></a>å¯å˜å¯¹è±¡å’Œä¸å¯å˜å¯¹è±¡</h2><p><strong>å¯å˜å¯¹è±¡</strong>åœ¨åˆ›å»ºä¹‹åæ˜¯å¯ä»¥è¢«æ”¹å˜çš„</p>
<p><strong>ä¸å¯å˜å¯¹è±¡</strong>åœ¨åˆ›å»ºä¹‹åæ˜¯ä¸å¯ä»¥è¢«æ”¹å˜çš„</p>
<ol>
<li>åœ¨<code>JavaScript</code>ä¸­ï¼Œ<code>string</code>å’Œ<code>number</code>ä»è®¾è®¡ä¹‹åˆå°±æ˜¯ä¸å¯å˜çš„ï¼ˆimmediateï¼‰</li>
<li>ä¸å¯å˜å¯¹è±¡æ˜¯ä¿æŒä¸€ä¸ªå¯¹è±¡çŠ¶æ€ä¸å˜ï¼Œè¿™æ ·çš„å¥½å¤„æ˜¯æ˜¯çš„å¼€å‘æ›´åŠ ç®€å•ã€å¯å›æº¯ã€æµ‹è¯•å‹å¥½ï¼Œå‡å°‘äº†ä»»ä½•å¯èƒ½çš„å‰¯ä½œç”¨ã€‚ä½†æ˜¯ï¼Œæ¯å½“æƒ³æ·»åŠ ç‚¹ä¸œè¥¿åˆ°ä¸€ä¸ªä¸å¯å˜å¯¹è±¡é‡Œæ—¶ï¼Œå®ƒä¸€å®šæ˜¯å…ˆæ‹·è´å·²å­˜åœ¨çš„å€¼åˆ°æ–°å®ä¾‹é‡Œï¼Œç„¶åå†ç»™æ–°å®ä¾‹æ·»åŠ å†…å®¹ï¼Œæœ€åè¿”å›æ–°å®ä¾‹ã€‚ç›¸æ¯”å¯å˜å¯¹è±¡ï¼Œè¿™åŠ¿å¿…ä¼šæœ‰æ›´å¤šå†…å­˜ã€è®¡ç®—é‡æ¶ˆè€—</li>
</ol>
<p>åˆ›å»ºä¸€ä¸ªçº¯å‡½æ•°ï¼ˆpure functionï¼‰</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> student = &#123;</span><br><span class="line">    school: <span class="string">"baidu"</span>,</span><br><span class="line">    name: <span class="string">"tom"</span>,</span><br><span class="line">    age: <span class="number">21</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">updateStudent</span>(<span class="params">student, name, age</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        ...student,</span><br><span class="line">        name,</span><br><span class="line">        age</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="åŒæ­¥å‡½æ•°å’Œå¼‚æ­¥å‡½æ•°"><a href="#åŒæ­¥å‡½æ•°å’Œå¼‚æ­¥å‡½æ•°" class="headerlink" title="åŒæ­¥å‡½æ•°å’Œå¼‚æ­¥å‡½æ•°"></a>åŒæ­¥å‡½æ•°å’Œå¼‚æ­¥å‡½æ•°</h2><p>åŒæ­¥å‡½æ•°é˜»å¡ï¼Œå¼‚æ­¥å‡½æ•°ä¸é˜»å¡ã€‚åœ¨åŒæ­¥å‡½æ•°ä¸­ï¼Œè¯­å¥å®Œæˆåä¸‹ä¸€å¥æ‰æ‰§è¡Œï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç¨‹åºå¯ä»¥æŒ‰ç…§è¯­å¥çš„é¡ºåºè¿›è¡Œç²¾ç¡®è¯„ä¼°ï¼Œå¦‚æœå…¶ä¸­ä¸€ä¸ªè¯­å¥éœ€è¦å¾ˆé•¿æ—¶é—´ï¼Œé‚£ä¹ˆç¨‹åºçš„æ‰§è¡Œä¼šåœæ»å¾ˆé•¿æ—¶é—´</p>
<p>å¼‚æ­¥å‡½æ•°é€šå¸¸æ¥å—å›è°ƒä½œä¸ºå‚æ•°ï¼Œåœ¨è°ƒç”¨å¼‚æ­¥å‡½æ•°åç«‹å³ç»§ç»­æ‰§è¡Œä¸‹ä¸€è¡Œã€‚å›è°ƒå‡½æ•°ä»…åœ¨å¼‚æ­¥æ“ä½œå®Œæˆä¸”è°ƒç”¨å †æ ˆä¸ºç©ºæ—¶è°ƒç”¨ï¼Œè¯¸å¦‚ä»webæœåŠ¡å™¨åŠ è½½æ•°æ®æˆ–æŸ¥è¯¢æ•°æ®åº“ç­‰é‡è´Ÿè½½æ“ä½œåº”è¯¥å¼‚æ­¥å®Œæˆï¼Œä»¥ä¾¿ä¸»çº¿ç¨‹å¯ä»¥ç»§ç»­æ‰§è¡Œå…¶ä»–æ“ä½œè€Œä¸ä¼šå‡ºç°ä¸€ç›´é˜»å¡</p>
<p>åœ¨JavaScriptä¸­å¼‚æ­¥å‡½æ•°çš„è§£å†³æ–¹æ¡ˆé€šå¸¸æœ‰callbackã€Promiseã€async/await</p>
<h2 id="JavaScriptæ‰§è¡Œæœºåˆ¶"><a href="#JavaScriptæ‰§è¡Œæœºåˆ¶" class="headerlink" title="JavaScriptæ‰§è¡Œæœºåˆ¶"></a>JavaScriptæ‰§è¡Œæœºåˆ¶</h2><ul>
<li><p><strong>JavaScriptçš„æ‰§è¡Œä¸è¿è¡Œ</strong></p>
<p>æ‰§è¡Œå’Œä¸è¿è¡Œä¸å¤ªç›¸åŒï¼Œåœ¨ä¸åŒç¯å¢ƒä¸‹ï¼Œæ¯”å¦‚Nodeã€æµè§ˆå™¨ä¸‹ï¼ŒJavaScriptçš„æ‰§è¡Œç»“æœæ˜¯ä¸ä¸€æ ·çš„ï¼›è€Œè¿è¡Œå¤§å¤šæ˜¯æŒ‡åŸºäºJavaScriptå¼•æ“ï¼Œå¦‚V8ï¼Œç»“æœæ˜¯ä¸€è‡´çš„ </p>
</li>
<li><p><strong>å…³äºJavaScript</strong></p>
<p>ä¼—æ‰€å‘¨çŸ¥ï¼ŒJavaScriptæ˜¯ä¸€é—¨<strong>å•çº¿ç¨‹</strong>ã€<strong>å¼‚æ­¥æ‰§è¡Œ</strong>çš„è¯­è¨€ï¼Œè™½ç„¶åœ¨HTML5ä¸­æå‡ºäº†<strong>web workers</strong>ï¼ˆå¯ä»¥ç†è§£ä¸º<strong>æµè§ˆå™¨</strong>ä¸ºJavaScriptå¼€çš„â€œå¤–æŒ‚â€ï¼‰ï¼Œä½†JavaScriptæ˜¯å•çº¿ç¨‹è¿è¡Œçš„è¿™ä¸€æ ¸å¿ƒä»æœªæ”¹å˜ï¼Œæ‰€æœ‰å¤šçº¿ç¨‹éƒ½æ˜¯é€šè¿‡å•çº¿ç¨‹<strong>æ¨¡æ‹Ÿ</strong>å‡ºæ¥çš„</p>
</li>
<li><p><strong>JavaScriptä¸­çš„å¼‚æ­¥</strong> <strong>event-loop</strong></p>
<p>JavaScriptä¸­çš„å¼‚æ­¥ä¸»è¦é€šè¿‡<strong>event loop</strong>è¿›è¡Œæ¨¡æ‹Ÿå½“æˆ‘ä»¬æ‰§è¡ŒJavaScriptä»£ç çš„æ—¶å€™å…¶å®å°±æ˜¯å¾€æ‰§è¡Œæ ˆä¸­æ”¾å…¥å‡½æ•°ï¼Œé‚£ä¹ˆé‡åˆ°å¼‚æ­¥ä»£ç æ€ä¹ˆåŠï¼Ÿå…¶å®å½“é‡åˆ°å¼‚æ­¥ä»£ç æ—¶ï¼Œä¼šè¢«æŒ‚èµ·å¹¶åœ¨éœ€è¦æ‰§è¡Œçš„æ—¶å€™åŠ å…¥åˆ°<strong>Task</strong>ï¼ˆæœ‰å¤šç§Taskï¼‰é˜Ÿåˆ—ä¸­ã€‚ä¸€æ—¦æ‰§è¡Œæ ˆä¸ºç©ºï¼Œ<strong>event loop</strong>å°±ä¼šä»<strong>Task</strong>ä¸­æ‹¿å‡ºéœ€è¦æ‰§è¡Œçš„ä»£ç å¹¶æ”¾å…¥æ‰§è¡Œæ ˆä¸­æ‰§è¡Œï¼Œæ‰€ä»¥æœ¬è´¨ä¸Šè¯´JavaScriptä¸­çš„å¼‚æ­¥è¿˜æ˜¯åŒæ­¥è¡Œä¸º</p>
</li>
<li><p><strong>æµè§ˆå™¨ä¸­çš„event loop</strong></p>
<p>æ¥è‡ªä¸åŒçš„<strong>ä»»åŠ¡æº</strong>çš„ä»»åŠ¡ä¼šè¢«åˆ†é…åˆ°ä¸åŒçš„Taské˜Ÿåˆ—ä¸­ï¼Œä»»åŠ¡æºå¯ä»¥åˆ†ä¸º<strong>å¾®ä»»åŠ¡ï¼ˆmicro taskï¼‰</strong>å’Œ<strong>å®ä»»åŠ¡ï¼ˆmacro taskï¼‰</strong>ã€‚åœ¨ES6è§„èŒƒä¸­ï¼Œå¾®ä»»åŠ¡è¢«ç§°ä¸ºjobsï¼Œå®ä»»åŠ¡è¢«ç§°ä¸ºtask</p>
<p>å¾®ä»»åŠ¡åŒ…æ‹¬ï¼š<code>precess.nextTick</code>ã€<code>promise</code>ã€<code>Mutation Observer</code></p>
<p>å®ä»»åŠ¡åŒ…æ‹¬ï¼š<code>script</code>ã€<code>setTimeout</code>ã€<code>setInterval</code>ã€<code>setImmediate</code>ã€<code>I/O</code>ã€UI Rendering</p>
<p><strong>å®ä»»åŠ¡ä¸­åŒ…å«äº†<code>script</code>ï¼Œå› æ­¤æµè§ˆå™¨ä¼šå…ˆæ‰§è¡Œä¸€ä¸ªå®ä»»åŠ¡ï¼Œæ¥ä¸‹æ¥ç”±å¼‚æ­¥ä»£ç çš„è¯æ‰ä¼šå…ˆæ‰§è¡Œå¾®ä»»åŠ¡</strong></p>
<p><strong>event loopæ‰§è¡Œé¡ºåº</strong>ï¼š</p>
<ol>
<li>å…ˆæ‰§è¡ŒåŒæ­¥ä»£ç ï¼Œè¿™å±äºå®ä»»åŠ¡</li>
<li>å½“<strong>æ‰§è¡Œå®Œæ‰€æœ‰åŒæ­¥ä»£ç </strong>åæ‰§è¡Œæ ˆä¸ºç©ºï¼ŒæŸ¥è¯¢æ˜¯å¦æœ‰å¼‚æ­¥ä»£ç éœ€è¦æ‰§è¡Œ</li>
<li><strong>æ‰§è¡Œæ‰€æœ‰å¾®ä»»åŠ¡</strong></li>
<li>å½“æ‰§è¡Œå®Œæ‰€æœ‰å¾®ä»»åŠ¡ï¼Œå¦‚æœ‰å¿…è¦ä¼šæ¸²æŸ“é¡µé¢</li>
<li>ç„¶åå¼€å§‹ä¸‹ä¸€è½®<code>event loop</code>ï¼Œæ‰§è¡Œå®ä»»åŠ¡ä¸­çš„å¼‚æ­¥ä»£ç ä¹Ÿå°±æ˜¯<code>setTimeout</code>ï¼ˆå®ä»»åŠ¡ï¼‰ä¸­çš„å›è°ƒå‡½æ•°</li>
</ol>
<p><img src="./imgs/browser_event_loop.png" alt="æµè§ˆå™¨ä¸­çš„event loop"></p>
<p><img src="./imgs/browser_event_loop2.png" alt="æµè§ˆå™¨ä¸­çš„event loop"></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">  <span class="built_in">Promise</span>.resolve().then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">3</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">4</span>);</span><br><span class="line">  resolve(<span class="number">5</span>);</span><br><span class="line">&#125;).then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(data);</span><br><span class="line">&#125;);</span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">6</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">7</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1 4 7 5 2 3 6</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Node.jsä¸­çš„event loop</strong></p>
<p>Node.jsä¸­çš„<code>event loop</code>åˆ†ä¸º6ä¸ªé˜¶æ®µï¼Œä»–ä»¬ä¼šæŒ‰ç…§é¡ºåºåå¤è¿è¡Œã€‚æ¯å½“è¿›å…¥æŸä¸€ä¸ªé˜¶æ®µçš„æ—¶å€™éƒ½ä¼šä»å¯¹åº”çš„å›è°ƒé˜Ÿåˆ—ä¸­å–å‡ºå‡½æ•°å»æ‰§è¡Œã€‚å½“<strong>é˜Ÿåˆ—ä¸ºç©º</strong>æˆ–è€…<strong>æ‰§è¡Œçš„å›è°ƒå‡½æ•°æ•°é‡åˆ°è¾¾ç³»ç»Ÿè®¾å®šçš„é˜ˆå€¼</strong>ï¼Œå°±ä¼šè¿›å…¥ä¸‹ä¸€é˜¶æ®µ</p>
<p><img src="./imgs/node_event_loop.png" alt="Node.jsä¸­çš„event loop"></p>
<ol>
<li><p><strong>timers</strong></p>
<p><strong>timers</strong>é˜¶æ®µä¼šæ‰§è¡Œ<code>setTimeout</code>å’Œ<code>setinterval</code>å›è°ƒï¼Œå¹¶ä¸”æ˜¯ç”±<strong>poll</strong>é˜¶æ®µæ§åˆ¶çš„ã€‚åŒæ ·åœ¨<code>Node.js</code>ä¸­å®šæ—¶å™¨æŒ‡å®šçš„äº‹ä»¶ä¹Ÿä¸æ˜¯å‡†ç¡®æ—¶é—´ï¼Œåªæ˜¯å°½å¿«æ‰§è¡Œ</p>
</li>
<li><p><strong>I/O</strong></p>
<p><strong>I/O</strong>é˜¶æ®µä¼šå¤„ç†ä¸€äº›ä¸Šä¸€è½®å¾ªç¯ä¸­å°‘è®¸æœªæ‰§è¡Œçš„<strong>I/O</strong>å›è°ƒ</p>
</li>
<li><p><strong>idle,prepare</strong></p>
</li>
<li><p><strong>poll</strong></p>
<p><strong>poll</strong>æ˜¯ä¸€ä¸ªè‡³å…³é‡è¦çš„é˜¶æ®µï¼Œåœ¨è¿™ä¸€é˜¶æ®µä¸­ï¼Œç³»ç»Ÿä¼šåšä¸¤ä»¶äº‹æƒ…</p>
<ol>
<li><p>å›åˆ°<strong>timer</strong>é˜¶æ®µæ‰§è¡Œå›è°ƒ</p>
</li>
<li><p>æ‰§è¡Œ<strong>I/O</strong>å›è°ƒï¼Œå¹¶ä¸”åœ¨è¿›å…¥è¯¥é˜¶æ®µæ—¶å¦‚æœæ²¡æœ‰è®¾å®šäº†<strong>timer</strong>çš„è¯ï¼Œä¼šå‘ç”Ÿä»¥ä¸‹ä¸¤ä»¶äº‹æƒ…</p>
</li>
</ol>
<ul>
<li>å¦‚æœ<strong>poll</strong>é˜Ÿåˆ—ä¸ä¸ºç©ºï¼Œä¼šéå†å›è°ƒé˜Ÿåˆ—å¹¶åŒæ­¥æ‰§è¡Œï¼Œç›´åˆ°é˜Ÿåˆ—ä¸ºç©ºæˆ–è€…è¾¾åˆ°ç³»ç»Ÿé™åˆ¶</li>
<li>å¦‚æœ<strong>poll</strong>é˜Ÿåˆ—ä¸ºç©º<ul>
<li>å¦‚æœæœ‰<code>setImmediate</code>å›è°ƒéœ€è¦æ‰§è¡Œï¼Œ<strong>poll</strong>é˜¶æ®µä¼šåœæ­¢å¹¶ä¸”<strong>è¿›å…¥åˆ°checké˜¶æ®µ</strong>æ‰§è¡Œå›è°ƒ</li>
<li>å¦‚æœæ²¡æœ‰ï¼Œä¼šç­‰å¾…å›è°ƒè¢«åŠ å…¥åˆ°é˜Ÿåˆ—ä¸­å¹¶ç«‹å³æ‰§è¡Œå›è°ƒï¼Œè¿™é‡ŒåŒæ ·ä¼šæœ‰ä¸ªè¶…æ—¶æ—¶é—´é˜²æ­¢ä¸€ç›´ç­‰å¾…ä¸‹å»</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>check</strong></p>
<p>æ‰§è¡Œ<code>setImmediate</code></p>
</li>
<li><p><strong>close callbacks</strong></p>
<p>æ‰§è¡Œcloseäº‹ä»¶</p>
</li>
</ol>
<p><img src="./imgs/node_event_loop2.png" alt="Node.jsä¸­çš„event loop"></p>
</li>
</ul>
<h2 id="ES6çš„ç±»å’ŒES6çš„æ„é€ å‡½æ•°çš„åŒºåˆ«"><a href="#ES6çš„ç±»å’ŒES6çš„æ„é€ å‡½æ•°çš„åŒºåˆ«" class="headerlink" title="ES6çš„ç±»å’ŒES6çš„æ„é€ å‡½æ•°çš„åŒºåˆ«"></a>ES6çš„ç±»å’ŒES6çš„æ„é€ å‡½æ•°çš„åŒºåˆ«</h2><p>åœ¨æ™®é€šä½¿ç”¨ä¸­æ²¡æœ‰åŒºåˆ«ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Person</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(name) &#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸»è¦åŒºåˆ«åœ¨äºç±»ç»§æ‰¿ä¸Šï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Student</span>(<span class="params">name, id</span>) </span>&#123;</span><br><span class="line">    Person.call(<span class="keyword">this</span>, name)</span><br><span class="line">    <span class="keyword">this</span>.id = id</span><br><span class="line">&#125;</span><br><span class="line">Student.prototype = <span class="built_in">Object</span>.create(Person.prototype)</span><br><span class="line">Student.prototype.constructor = Student</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    consreuctor(name, id) &#123;</span><br><span class="line">        <span class="keyword">super</span>(name)</span><br><span class="line">        <span class="keyword">this</span>.id = id</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="æ‰©å±•è¿ç®—ç¬¦å’Œå‰©ä½™å‚æ•°è¯­å¥çš„åŒºåˆ«"><a href="#æ‰©å±•è¿ç®—ç¬¦å’Œå‰©ä½™å‚æ•°è¯­å¥çš„åŒºåˆ«" class="headerlink" title="æ‰©å±•è¿ç®—ç¬¦å’Œå‰©ä½™å‚æ•°è¯­å¥çš„åŒºåˆ«"></a>æ‰©å±•è¿ç®—ç¬¦å’Œå‰©ä½™å‚æ•°è¯­å¥çš„åŒºåˆ«</h2><p>åœ¨å‡½æ•°æ³›å‹ç¼–ç æ—¶ï¼ŒES6çš„æ‰©å±•è¿ç®—ç¬¦éå¸¸æœ‰ç”¨å—ï¼Œå› ä¸ºæˆ‘ä»¬å¯ä»¥è½»æ¾åˆ›å»ºæ•°ç»„å’Œå¯¹è±¡çš„æ‹·è´ï¼Œè€Œæ— éœ€ä½¿ç”¨<code>Object.create</code>ã€<code>slice</code>æˆ–å…¶ä»–å‡½æ•°åº“ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> [ ...arr, <span class="string">"test"</span> ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> result = test([<span class="string">"hello"</span>, <span class="string">"world"</span>])</span><br><span class="line"><span class="comment">// ["hello", "world", "test"]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> person = &#123;</span><br><span class="line">    name: <span class="string">"tom"</span>,</span><br><span class="line">    age: <span class="number">21</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> copyPerson = &#123; ...person &#125;</span><br></pre></td></tr></table></figure>

<p>ES6çš„å‰©ä½™å‚æ•°è¯­å¥æä¾›äº†ä¸€ä¸ªç®€å†™ï¼Œå…è®¸æˆ‘ä»¬å°†ä¸å®šæ•°é‡çš„å‚æ•°è¡¨ç¤ºä¸ºä¸€ä¸ª<strong>æ•°ç»„</strong>ï¼Œå®ƒå°±åƒæ‰©å±•è¿ç®—ç¬¦è¯­æ³•çš„åé¢ï¼Œå°†æ•°æ®æ”¶é›†åˆ°æ•°ç»„ä¸­è€Œä¸æ˜¯è§£æ„æ•°ç»„ã€‚å‰©ä½™å‚æ•°è¯­å¥åœ¨å‡½æ•°å‚æ•°ã€æ•°ç»„å’Œå¯¹è±¡çš„è§£æ„èµ‹å€¼ä¸­æœ‰å¾ˆå¤§ä½œç”¨</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params">...numbers</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> numbers.map(<span class="function"><span class="params">x</span> =&gt;</span> x + <span class="number">5</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> result1 = test(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line"><span class="comment">// [6, 7, 8, 9]</span></span><br><span class="line"><span class="keyword">const</span> result2 = test(<span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>)</span><br><span class="line"><span class="comment">// [10, 11, 12, 13, 14]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> [ a, b, ...rest ] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>]</span><br><span class="line"><span class="comment">// 1 2 [ 3, 4 ]</span></span><br></pre></td></tr></table></figure>

<h2 id="å†…ç½®ç±»å‹"><a href="#å†…ç½®ç±»å‹" class="headerlink" title="å†…ç½®ç±»å‹"></a>å†…ç½®ç±»å‹</h2><p>JavaScriptä¸­åˆ†ä¸º<strong>ä¸ƒç§</strong>å†…ç½®ç±»å‹ï¼Œå…¶ä¸­å†…ç½®ç±»å‹åˆåˆ†ä¸ºä¸¤å¤§ç±»å‹ï¼š<strong>åŸºæœ¬ç±»å‹</strong>å’Œ<strong>å¼•ç”¨ç±»å‹</strong>ï¼ˆå¯¹è±¡ Objectï¼‰</p>
<p>åŸºæœ¬ç±»å‹ï¼š<code>null</code>ã€<code>undefined</code>ã€<code>boolean</code>ã€<code>number</code>ã€<code>string</code>ã€<code>symbol</code></p>
<p>å…¶ä¸­JavaScriptçš„æ•°å­—ç±»å‹æ˜¯æµ®ç‚¹ç±»å‹çš„ï¼Œæ²¡æœ‰æ•´å½¢ã€‚å¹¶ä¸”æµ®ç‚¹ç±»å‹åŸºäº IEEE 754 æ ‡å‡†å®ç°ï¼Œåœ¨ä½¿ç”¨ä¸­ä¼šé‡åˆ°æŸäº› <a href="#2">Bug </a><code>NaN</code>ä¹Ÿå±äº<code>number</code>ç±»å‹å¹¶ä¸”<code>NaN</code>å¹¶ä¸ç­‰äºè‡ªèº«</p>
<p>å¯¹äºåŸºæœ¬ç±»å‹æ¥è¯´ï¼Œå¦‚æœä½¿ç”¨å­—é¢é‡çš„æ–¹å¼ï¼Œé‚£ä¸ªè¿™ä¸ªå˜é‡åªæ˜¯ä¸ªå­—é¢é‡ï¼Œåªæœ‰åœ¨å¿…è¦çš„æ—¶å€™æ‰ä¼šè½¬æ¢æˆå¯¹åº”çš„ç±»å‹</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = <span class="number">111</span> <span class="comment">// è¿™åªæ˜¯å­—é¢é‡ï¼Œä¸æ˜¯numberç±»å‹</span></span><br><span class="line">a.toString() <span class="comment">// ä½¿ç”¨çš„æ—¶å€™æ‰ä¼šè½¬æ¢ä¸ºå¯¹è±¡ç±»å‹</span></span><br></pre></td></tr></table></figure>

<p>å¼•ç”¨ç±»å‹åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ä¼šé‡åˆ°æ·±æ‹·è´å’Œæµ…æ‹·è´é—®é¢˜</p>
<h2 id="Typeof"><a href="#Typeof" class="headerlink" title="Typeof"></a>Typeof</h2><p><code>typeof</code>å¯¹äºåŸºæœ¬ç±»å‹ï¼Œé™¤äº†<code>null</code>éƒ½å¯ä»¥æ˜¾ç¤ºæ­£ç¡®çš„ç±»å‹</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> <span class="number">1</span> <span class="comment">// number</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="string">'1'</span> <span class="comment">// string</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">undefined</span> <span class="comment">// undefined</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">true</span> <span class="comment">// boolean</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="built_in">Symbol</span>() <span class="comment">// symbol</span></span><br></pre></td></tr></table></figure>

<p><code>typeof</code>å¯¹äºå¯¹è±¡ï¼Œé™¤äº†å‡½æ•°éƒ½ä¼šæ˜¾ç¤º<code>object</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> [] <span class="comment">// object</span></span><br><span class="line"><span class="keyword">typeof</span> &#123;&#125; <span class="comment">// object</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="built_in">console</span>.log <span class="comment">// function</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">null</span> <span class="comment">// object</span></span><br></pre></td></tr></table></figure>

<p>å…³äºä¸ºä»€ä¹ˆ<code>typeof null == object</code>ï¼šåœ¨JavaScriptçš„æœ€åˆç‰ˆæœ¬ä¸­ï¼Œä½¿ç”¨çš„æ˜¯32ä¸ºç³»ç»Ÿï¼Œä¸ºäº†æ€§èƒ½è€ƒè™‘ä½¿ç”¨ä½ä½å­˜å‚¨äº†å˜é‡çš„ç±»å‹ä¿¡æ¯ã€‚<code>000</code>å¼€å¤´çš„ä»£è¡¨æ˜¯å¯¹è±¡ï¼Œç„¶è€Œ<code>null</code>è¡¨ç¤ºä¸ºå…¨é›¶ï¼Œæ‰€ä»¥å°†å®ƒé”™è¯¯çš„åˆ¤æ–­ä¸º<code>object</code></p>
<p>å¦‚æœæƒ³å¾—åˆ°ä¸€ä¸ªæ­£ç¡®çš„æ•°æ®ç±»å‹ï¼Œä½¿ç”¨<code>Object.prototype.toString.call(xxx)</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.prototype.toString.call([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br></pre></td></tr></table></figure>

<h2 id="instanceof"><a href="#instanceof" class="headerlink" title="instanceof"></a>instanceof</h2><p><code>instance</code>å¯ä»¥æ­£ç¡®çš„åˆ¤æ–­å¯¹è±¡çš„ç±»å‹ï¼Œå› ä¸ºå†…éƒ¨æœºåˆ¶æ˜¯é€šè¿‡åˆ¤æ–­å¯¹è±¡çš„åŸå‹é“¾ä¸­æ˜¯ä¸æ˜¯èƒ½æ­£ç¡®çš„æ‰¾åˆ°ç±»å‹çš„<code>prototype</code></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">instanceof</span>(<span class="params">left, right</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> prototype = right.prototype</span><br><span class="line">    left = left.__proto__</span><br><span class="line">    <span class="keyword">while</span>(<span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (left === <span class="literal">null</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        <span class="keyword">if</span> (prototypr === left)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">        left = left.__proto__</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="new"><a href="#new" class="headerlink" title="new"></a>new</h2><p>åœ¨è°ƒç”¨<code>new</code>çš„è¿‡ç¨‹ä¸­ä¼šå‘ç”Ÿä»¥ä¸‹å››ä»¶äº‹æƒ…</p>
<ol>
<li>æ–°ç”Ÿæˆäº†ä¸€ä¸ªå¯¹è±¡</li>
<li>ç»‘å®šåˆ°åŸå‹</li>
<li>ç»‘å®š<code>this</code></li>
<li>è¿”å›æ–°å¯¹è±¡</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">create</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> obj = <span class="keyword">new</span> <span class="built_in">Object</span>()</span><br><span class="line">    <span class="keyword">let</span> Con = [].shift.call(<span class="built_in">arguments</span>)</span><br><span class="line">    obj.__proto__ = Con.prototype</span><br><span class="line">    <span class="keyword">let</span> result = Con.apply(obj, <span class="built_in">arguments</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">typeof</span> result === <span class="string">'object'</span> ? result : obj</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
        
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

    
  </div>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="ä¸‹ä¸€é¡µ"></i></a>
  </nav>



          </div>
          

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image"
      src="/imgs/avatar.png"
      alt="Mr.RS">
  <p class="site-author-name" itemprop="name">Mr.RS</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">39</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-categories">
        
          
            <a href="/categories/">
          
        
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">åˆ†ç±»</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
          
            <a href="/tags/">
          
        
        <span class="site-state-item-count">35</span>
        <span class="site-state-item-name">æ ‡ç­¾</span>
        </a>
      </div>
    
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Mr.RS</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> å¼ºåŠ›é©±åŠ¨ v3.9.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">
      
    ä¸»é¢˜ â€“ <a href="https://pisces.theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.4.1
  </div>

        












        
      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js?v=3.1.0"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
<script src="/js/utils.js?v=7.4.1"></script><script src="/js/motion.js?v=7.4.1"></script>
<script src="/js/schemes/pisces.js?v=7.4.1"></script>
<script src="/js/next-boot.js?v=7.4.1"></script>



  





















  

  

  

</body>
</html>
