<!DOCTYPE html>





<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 3.9.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/avatar.png?v=7.4.1">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/avatar.png?v=7.4.1">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/avatar.png?v=7.4.1">
  <link rel="mask-icon" href="/images/avatar.svg?v=7.4.1" color="#222">

<link rel="stylesheet" href="/css/main.css?v=7.4.1">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.4.1',
    exturl: false,
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    translation: {
      copy_button: 'å¤åˆ¶',
      copy_success: 'å¤åˆ¶æˆåŠŸ',
      copy_failure: 'å¤åˆ¶å¤±è´¥'
    },
    sidebarPadding: 40
  };
</script>

  <meta name="description" content="document.writedocument.write() æ–¹æ³•å°†ä¸€ä¸ªæ–‡æœ¬å­—ç¬¦ä¸²å†™å…¥ä¸€ä¸ªç”± document.open() æ‰“å¼€çš„æ–‡æ¡£æµï¼ˆdocument streamï¼‰ã€‚ï¼ˆMDNï¼‰ ä½œç”¨ï¼š åŠ è½½åªæœ‰å¯ç”¨JavaScriptåçš„æ ·å¼æ–‡ä»¶ 12345&amp;lt;script&amp;gt;    document.open()    docuemnt.write(&apos;&amp;lt;link rel=&quot;styleshe">
<meta name="keywords" content="JavaScript">
<meta property="og:type" content="article">
<meta property="og:title" content="JavaScriptç›¸å…³-1">
<meta property="og:url" content="https://mrrs878.github.io/2020/02/11/JavaScriptç›¸å…³-1/index.html">
<meta property="og:site_name" content="Mr.RS">
<meta property="og:description" content="document.writedocument.write() æ–¹æ³•å°†ä¸€ä¸ªæ–‡æœ¬å­—ç¬¦ä¸²å†™å…¥ä¸€ä¸ªç”± document.open() æ‰“å¼€çš„æ–‡æ¡£æµï¼ˆdocument streamï¼‰ã€‚ï¼ˆMDNï¼‰ ä½œç”¨ï¼š åŠ è½½åªæœ‰å¯ç”¨JavaScriptåçš„æ ·å¼æ–‡ä»¶ 12345&amp;lt;script&amp;gt;    document.open()    docuemnt.write(&apos;&amp;lt;link rel=&quot;styleshe">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://mrrs878.github.io/2020/02/11/JavaScriptç›¸å…³-1/imgs/spa.png">
<meta property="og:updated_time" content="2020-02-12T15:16:12.295Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JavaScriptç›¸å…³-1">
<meta name="twitter:description" content="document.writedocument.write() æ–¹æ³•å°†ä¸€ä¸ªæ–‡æœ¬å­—ç¬¦ä¸²å†™å…¥ä¸€ä¸ªç”± document.open() æ‰“å¼€çš„æ–‡æ¡£æµï¼ˆdocument streamï¼‰ã€‚ï¼ˆMDNï¼‰ ä½œç”¨ï¼š åŠ è½½åªæœ‰å¯ç”¨JavaScriptåçš„æ ·å¼æ–‡ä»¶ 12345&amp;lt;script&amp;gt;    document.open()    docuemnt.write(&apos;&amp;lt;link rel=&quot;styleshe">
<meta name="twitter:image" content="https://mrrs878.github.io/2020/02/11/JavaScriptç›¸å…³-1/imgs/spa.png">
  <link rel="canonical" href="https://mrrs878.github.io/2020/02/11/JavaScriptç›¸å…³-1/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true,
    isPage: false,
    isArchive: false
  };
</script>

  <title>JavaScriptç›¸å…³-1 | Mr.RS</title>
  








  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Mr.RS</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">Read The Fucking Source Code!</p>
      
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
      
      
        
        
        <li class="menu-item menu-item-home">
      
    

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>é¦–é¡µ</a>

  </li>
      
    
      
      
        
        
        <li class="menu-item menu-item-about">
      
    

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>å…³äº</a>

  </li>
      
    
      
      
        
        
        <li class="menu-item menu-item-tags">
      
    

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>æ ‡ç­¾</a>

  </li>
      
    
      
      
        
        
        <li class="menu-item menu-item-categories">
      
    

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>åˆ†ç±»</a>

  </li>
      
    
      
      
        
        
        <li class="menu-item menu-item-archives">
      
    

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>å½’æ¡£</a>

  </li>
      
    
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
            

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://mrrs878.github.io/2020/02/11/JavaScriptç›¸å…³-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Mr.RS">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/imgs/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Mr.RS">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          
            JavaScriptç›¸å…³-1
            

          
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              
                
              

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-02-11 23:33:22" itemprop="dateCreated datePublished" datetime="2020-02-11T23:33:22+08:00">2020-02-11</time>
            </span>
          
            

            
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2020-02-12 23:16:12" itemprop="dateModified" datetime="2020-02-12T23:16:12+08:00">2020-02-12</time>
              </span>
            
          
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/JavaScript/" itemprop="url" rel="index">
                    <span itemprop="name">JavaScript</span>
                  </a>
                </span>

                
                
              
            </span>
          

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="document-write"><a href="#document-write" class="headerlink" title="document.write"></a>document.write</h2><p><code>document.write()</code> æ–¹æ³•å°†ä¸€ä¸ªæ–‡æœ¬å­—ç¬¦ä¸²å†™å…¥ä¸€ä¸ªç”± <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document/open" target="_blank" rel="noopener"><code>document.open()</code></a> æ‰“å¼€çš„æ–‡æ¡£æµï¼ˆdocument streamï¼‰ã€‚ï¼ˆ<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Document/write" target="_blank" rel="noopener">MDN</a>ï¼‰</p>
<p>ä½œç”¨ï¼š</p>
<p>åŠ è½½åªæœ‰å¯ç”¨JavaScriptåçš„æ ·å¼æ–‡ä»¶</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.open()</span></span><br><span class="line"><span class="xml">    docuemnt.write('<span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"style_neads_js.css"</span> /&gt;</span>')</span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.close()</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å¼Šç«¯ï¼š</p>
<ul>
<li>åœ¨éloadingé˜¶æ®µä½¿ç”¨<code>docuemnt.write</code>ä¼šæ¸…é™¤å·²åŠ è½½çš„é¡µé¢</li>
<li><code>docuemnt.write</code>ä¸èƒ½å¤Ÿåœ¨XHTMLä¸­ä½¿ç”¨</li>
<li>åµŒå…¥scriptä¸­çš„<code>docuemnt.write</code>ä¸èƒ½ç»™ä»»æ„èŠ‚ç‚¹æ·»åŠ å­èŠ‚ç‚¹ï¼Œå› ä¸ºå®ƒæ˜¯éšç€DOMçš„æ„å»ºæ‰§è¡Œçš„</li>
<li>åˆ©ç”¨<code>docuemnt.write</code>å†™å…¥HTMLå­—ç¬¦æµå¹¶ä¸æ˜¯ä¸€ä¸ªå¥½æ–¹æ³•ï¼Œå®ƒæœ‰è¿DOMæ“ä½œçš„æ¦‚å¿µ</li>
<li>åˆ©ç”¨<code>docuemnt.write</code>æ·»åŠ scriptåŠ è½½å¤–éƒ¨è„šæœ¬æ—¶ï¼Œæµè§ˆå™¨çš„HTMLè§£æä¼šè¢«scriptçš„åŠ è½½æ‰€é˜»å¡</li>
</ul>
<h2 id="åŠŸèƒ½æ£€æµ‹ï¼ˆfeature-detectionï¼‰ã€åŠŸèƒ½æ¨æ–­ï¼ˆfeature-inferenceï¼‰ã€å’Œä½¿ç”¨UAå­—ç¬¦ä¸²ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«"><a href="#åŠŸèƒ½æ£€æµ‹ï¼ˆfeature-detectionï¼‰ã€åŠŸèƒ½æ¨æ–­ï¼ˆfeature-inferenceï¼‰ã€å’Œä½¿ç”¨UAå­—ç¬¦ä¸²ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«" class="headerlink" title="åŠŸèƒ½æ£€æµ‹ï¼ˆfeature detectionï¼‰ã€åŠŸèƒ½æ¨æ–­ï¼ˆfeature inferenceï¼‰ã€å’Œä½¿ç”¨UAå­—ç¬¦ä¸²ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«"></a>åŠŸèƒ½æ£€æµ‹ï¼ˆfeature detectionï¼‰ã€åŠŸèƒ½æ¨æ–­ï¼ˆfeature inferenceï¼‰ã€å’Œä½¿ç”¨UAå­—ç¬¦ä¸²ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«</h2><p>åŠŸèƒ½æ£€æµ‹ï¼ˆfeature detectionï¼‰ ğŸ‘</p>
<p>åŠŸèƒ½æ£€æµ‹åŒ…æ‹¬ç¡®å®šæµè§ˆå™¨æ˜¯å¦æ”¯æŒæŸæ®µä»£ç ï¼Œä»¥åŠæ˜¯å¦èƒ½è¿è¡Œä¸åŒçš„ä»£ç ï¼ˆå–å†³äºå®ƒæ˜¯å¦æ‰§è¡Œï¼‰ï¼Œä¸€è¾¹æµè§ˆå™¨èƒ½å§‹ç»ˆæ­£ç¡®è¿è¡Œä»£ç åŠŸèƒ½ï¼Œè€Œä¸ä¼šåœ¨æŸäº›æµè§ˆå™¨ä¸­å‡ºç°å´©æºƒå’Œé”™è¯¯</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="string">"geolocation"</span> <span class="keyword">in</span> navigator) &#123;</span><br><span class="line">    <span class="comment">// å¯ä»¥ä½¿ç”¨ navigator.geolocation</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// å¤„ç† navigator.geolocation åŠŸèƒ½ç¼ºå¤±</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åŠŸèƒ½æ¨æ–­ï¼ˆfeature inferenceï¼‰ğŸ‘</p>
<p>åŠŸèƒ½æ¨æ–­ä¸åŠŸèƒ½æ£€æµ‹ä¸€æ ·ï¼Œä¼šå¯¹åŠŸèƒ½å¯ç”¨æ€§è¿›è¡Œæ£€æŸ¥ï¼Œä½†æ˜¯åœ¨åˆ¤æ–­é€šè¿‡åè¿˜ä¼šä½¿ç”¨å…¶ä»–åŠŸèƒ½ï¼Œå› ä¸ºå®ƒå‡è®¾å…¶ä»–åŠŸèƒ½ä¹Ÿå¯ç”¨</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="built_in">document</span>.getElementsByTagName) &#123;</span><br><span class="line">  element = <span class="built_in">document</span>.getElementById(id);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>UA ğŸ‘</p>
<p>è¿™æ˜¯ä¸€ä¸ªæµè§ˆå™¨æŠ¥å‘Šçš„å­—ç¬¦ä¸²ï¼Œå®ƒå…è®¸ç½‘ç»œåè®®å¯¹ç­‰æ–¹ï¼ˆnetwork protocol peersï¼‰è¯†åˆ«è¯·æ±‚ç”¨æˆ·ä»£ç†çš„åº”ç”¨ç±»å‹ã€æ“ä½œç³»ç»Ÿã€åº”ç”¨ä¾›åº”å•†å’Œåº”ç”¨ç‰ˆæœ¬ã€‚å®ƒå¯ä»¥é€šè¿‡<code>navigator.userAgent</code>è®¿é—®ã€‚ç„¶è€Œï¼Œè¿™ä¸ªå­—ç¬¦ä¸²å¾ˆå¯èƒ½å­˜åœ¨æ¬ºéª—æ€§ï¼Œä¾‹å¦‚ï¼Œchromeä¼šåŒæ—¶ä½œä¸ºchromeå’Œsafariè¿›è¡ŒæŠ¥å‘Šï¼Œå› æ­¤ï¼Œè¦æ£€æµ‹safariï¼Œé™¤äº†æ£€æŸ¥safariå­—ç¬¦ä¸²ï¼Œè¿˜è¦æ£€æŸ¥æ˜¯å¦åŒæ—¶å­˜åœ¨chromeå­—ç¬¦ä¸²ã€‚</p>
<h2 id="Ajax"><a href="#Ajax" class="headerlink" title="Ajax"></a>Ajax</h2><p><strong>WHAT</strong></p>
<p>Ajaxï¼ˆasynchronous JavaScript and XMLï¼‰æ˜¯ä½¿ç”¨å®¢æˆ·ç«¯ä¸Šçš„è®¸å¤šwebæŠ€æœ¯ï¼Œåˆ›å»ºå¼‚æ­¥webåº”ç”¨çš„ä¸€ç§<strong>æŠ€æœ¯ç»“åˆä½“</strong>ã€‚å€ŸåŠ©Ajaxï¼Œwebåº”ç”¨å¯ä»¥<strong>å¼‚æ­¥</strong>ï¼ˆåœ¨åå°ï¼‰å‘æœåŠ¡å™¨å‘é€æ•°æ®å¯ä»æœåŠ¡å™¨æ£€ç´¢æ•°æ®è€Œä¸ä¼šå¹²æ‰°ç°æœ‰é¡µé¢çš„æ˜¾ç¤ºå’Œè¡Œä¸ºã€‚é€šè¿‡å°†<strong>æ•°æ®äº¤äº’å±‚ä¸è¡¨ç¤ºå±‚åˆ†ç¦»</strong>ï¼ŒAjaxå…è®¸ç½‘é¡µå’Œæ‰©å±•webåº”ç”¨ç¨‹åºåŠ¨æ€æ›´æ”¹å†…å®¹è€Œ<strong>ä¸éœ€é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢</strong>ï¼Œå®é™…ä¸Šï¼Œç°åœ¨é€šå¸¸å°†XMLæ›¿æ¢ä¸ºJSONï¼Œå› ä¸ºJavaScriptå¯¹JSONæœ‰åŸç”Ÿæ”¯æŒä¼˜åŠ¿</p>
<p><strong>WHY</strong></p>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>äº¤äº’æ€§æ›´å¥½ï¼Œæ¥è‡ªæœåŠ¡å™¨çš„æ–°å†…å®¹å¯ä»¥åŠ¨æ€æ›´æ”¹ï¼Œæ— éœ€é‡æ–°åŠ è½½æ•´ä¸ªé¡µé¢</li>
<li>å‡å°‘ä¸æœåŠ¡å™¨çš„è¿æ¥ï¼Œå› ä¸ºè„šæœ¬å’Œæ ·å¼åªéœ€è¦è¢«è¯·æ±‚ä¸€æ¬¡</li>
<li>çŠ¶æ€å¯ä»¥ç»´æŠ¤åœ¨ä¸€ä¸ªé¡µé¢ä¸Šï¼ŒJavaScriptå˜é‡å’ŒDOMçŠ¶æ€å°†çš„åˆ°ä¿æŒï¼Œå› ä¸ºä¸»å®¹å™¨é¡µé¢æœªè¢«é‡æ–°åŠ è½½</li>
<li>åŸºæœ¬ä¸ŠåŒ…å«å¤§éƒ¨åˆ†SPAçš„ä¼˜ç‚¹</li>
</ul>
<p>ç¼ºç‚¹</p>
<ul>
<li>åŠ¨æ€ç½‘é¡µå¾ˆéš¾æ”¶è—</li>
<li>å¦‚æœJavaScriptåœ¨æµè§ˆå™¨ä¸­è¢«ç¦ç”¨åˆ™ä¸èµ·ä½œç”¨</li>
<li>æœ‰äº›ç½‘ç»œçˆ¬è™«ä¸æ‰§è¡ŒJavaScriptï¼Œä¹Ÿä¸ä¼šçœ‹åˆ°JavaScriptåŠ è½½çš„å†…å®¹</li>
</ul>
<p><strong>HOW</strong></p>
<ul>
<li>ä½¿ç”¨<code>CSS</code>å’Œ<code>XHTML</code>æ¥è¡¨ç¤º</li>
<li>ä½¿ç”¨<code>DOM</code>æ¨¡å‹æ¥äº¤äº’å’ŒåŠ¨æ€æ˜¾ç¤º</li>
<li>ä½¿ç”¨<code>XMLHttpRequest</code>æ¥å’ŒæœåŠ¡å™¨è¿›è¡Œå¼‚æ­¥é€šä¿¡</li>
<li>ä½¿ç”¨<code>JavaScript</code>æ¥ç»‘å®šå’Œè°ƒç”¨</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ajax = &#123;&#125;;</span><br><span class="line">ajax.httpRequest = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">window</span>.XMLHttpRequest) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> versions = [</span><br><span class="line">        <span class="string">"MSXML2.XmlHttp.6.0"</span>,</span><br><span class="line">        <span class="string">"MSXML2.XmlHttp.5.0"</span>,</span><br><span class="line">        <span class="string">"MSXML2.XmlHttp.4.0"</span>,</span><br><span class="line">        <span class="string">"MSXML2.XmlHttp.3.0"</span>,</span><br><span class="line">        <span class="string">"MSXML2.XmlHttp.2.0"</span>,</span><br><span class="line">        <span class="string">"Microsoft.XmlHttp"</span></span><br><span class="line">    ];</span><br><span class="line">    <span class="keyword">let</span> xhr;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; versions.length; i++) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            xhr = <span class="keyword">new</span> ActiveXObject(versions[i]);</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> xhr;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">ajax.send = <span class="function"><span class="keyword">function</span> (<span class="params">url, callback, method, data, async</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">async</span> === <span class="literal">undefined</span>) &#123;</span><br><span class="line">        <span class="keyword">async</span> = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> httpRequest = ajax.httpRequest();</span><br><span class="line">    httpRequest.open(method, url, <span class="keyword">async</span>);</span><br><span class="line">    httpRequest.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (httpRequest.readyState == <span class="number">4</span>) &#123;</span><br><span class="line">            callback(httpRequest.responseText)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">if</span> (method == <span class="string">'POST'</span>) &#123;</span><br><span class="line">        httpRequest.setRequestHeader(<span class="string">'Content-type'</span>, <span class="string">'application/x-www-form-urlencoded'</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    httpRequest.send(data);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">ajax.get = <span class="function"><span class="keyword">function</span> (<span class="params">url, data, callback, async</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> query = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> data) &#123;</span><br><span class="line">        query.push(<span class="built_in">encodeURIComponent</span>(key) + <span class="string">'='</span> + <span class="built_in">encodeURIComponent</span>(data[key]));</span><br><span class="line">    &#125;</span><br><span class="line">    ajax.send(url + (query.length ? <span class="string">'?'</span> + query.join(<span class="string">'&amp;'</span>) : <span class="string">''</span>), callback, <span class="string">'GET'</span>, <span class="literal">null</span>, <span class="keyword">async</span>)</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">ajax.post = <span class="function"><span class="keyword">function</span> (<span class="params">url, data, callback, async</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> query = [];</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> key <span class="keyword">in</span> data) &#123;</span><br><span class="line">        query.push(<span class="built_in">encodeURIComponent</span>(key) + <span class="string">'='</span> + <span class="built_in">encodeURIComponent</span>(data[key]));</span><br><span class="line">    &#125;</span><br><span class="line">    ajax.send(url, callback, <span class="string">'POST'</span>, query.join(<span class="string">'&amp;'</span>), <span class="keyword">async</span>)</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="JSONP"><a href="#JSONP" class="headerlink" title="JSONP"></a>JSONP</h2><p><strong>WHAT</strong></p>
<p>å¸¦å¡«å……çš„jsonï¼ˆp for paddingï¼‰ï¼Œæ˜¯ä¸€ç§é€šå¸¸ç”¨äºç»•è¿‡æµè§ˆå™¨ä¸­çš„è·¨åŸŸé€‰å€çš„æ–¹æ³•ï¼Œå› ä¸ºAjaxä¸å…è®¸è·¨åŸŸè¯·æ±‚ã€‚</p>
<p>åŸç†ï¼šåˆ©ç”¨ <code>&lt;script&gt;</code> æ ‡ç­¾æ²¡æœ‰è·¨åŸŸé™åˆ¶çš„æ¼æ´ã€‚é€šè¿‡ <code>&lt;script&gt;</code> æ ‡ç­¾æŒ‡å‘ä¸€ä¸ªéœ€è¦è®¿é—®çš„åœ°å€å¹¶æä¾›ä¸€ä¸ªå›è°ƒå‡½æ•°æ¥æ¥æ”¶æ•°æ®ã€‚</p>
<p><strong>WHY</strong></p>
<p>è§£å†³è·¨åŸŸï¼ˆåªé€‚ç”¨äºGETè¯·æ±‚ï¼‰</p>
<p><strong>HOW</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// jsonp.js</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">jsonp</span>(<span class="params">&#123; url, params, cb &#125;</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> script = <span class="built_in">document</span>.createElement(<span class="string">"script"</span>)</span><br><span class="line">        <span class="built_in">window</span>[cb] = <span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">            resolve(data)</span><br><span class="line">            <span class="built_in">document</span>.body.removeChild(script)</span><br><span class="line">        &#125;</span><br><span class="line">        params = &#123; ...params, cb &#125;</span><br><span class="line">        <span class="keyword">let</span> tmp = []</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">let</span> key <span class="keyword">in</span> params)</span><br><span class="line">            tmp.push(<span class="string">`<span class="subst">$&#123; key &#125;</span>=<span class="subst">$&#123; params[key] &#125;</span>`</span>)</span><br><span class="line">        script.src = <span class="string">`<span class="subst">$&#123; url &#125;</span>?<span class="subst">$&#123; tmp.join(<span class="string">"&amp;"</span>) &#125;</span>`</span></span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">jsonp(&#123; </span><br><span class="line">    url: <span class="string">"http://localhost:3000/say"</span>,</span><br><span class="line">    params: &#123; <span class="attr">wd</span>: <span class="string">"hello jsonp"</span> &#125;,</span><br><span class="line">    cb: <span class="string">"show"</span></span><br><span class="line">&#125;).then(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(data);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// server.js</span></span><br><span class="line"><span class="keyword">let</span> express = <span class="built_in">require</span>(<span class="string">"express"</span>)</span><br><span class="line"><span class="keyword">let</span> app = express()</span><br><span class="line">app.get(<span class="string">"/say"</span>, (res, res) =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> &#123; wd, cb &#125; = req.query</span><br><span class="line">    res.end(<span class="string">`<span class="subst">$&#123;cb&#125;</span>('i am fine, and you?')`</span>)</span><br><span class="line">&#125;)</span><br><span class="line">app.listen(<span class="number">3000</span>)</span><br></pre></td></tr></table></figure>

<h2 id="å˜é‡æå‡"><a href="#å˜é‡æå‡" class="headerlink" title="å˜é‡æå‡"></a>å˜é‡æå‡</h2><p>å˜é‡æå‡ï¼ˆhoistingï¼‰ç”¨äºè§£é‡Šä»£ç ä¸­å˜é‡å£°æ˜è¡Œä¸ºçš„æœ¯è¯­ã€‚ä½¿ç”¨<code>var</code>å…³é”®å­—å£°æ˜æˆ–åˆå§‹åŒ–çš„å˜é‡ä¼šå°†å£°æ˜è¯­å¥â€œæå‡â€åˆ°å½“å‰ä½œç”¨åŸŸçš„é¡¶éƒ¨ã€‚ä½†æ˜¯åªæœ‰å£°æ˜æ‰ä¼šè§¦å‘æå‡ï¼Œèµ‹å€¼è¯­å¥å°†ä¿æŒåŸæ ·ã€‚</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(foo) <span class="comment">// undefined</span></span><br><span class="line"><span class="keyword">var</span> foo = <span class="number">1</span></span><br><span class="line"><span class="built_in">console</span>.log(foo) <span class="comment">// 1</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(foo) <span class="comment">// ReferenceError: bar is not defined</span></span><br><span class="line"><span class="keyword">let</span> foo = <span class="number">1</span></span><br><span class="line"><span class="built_in">console</span>.log(foo) <span class="comment">// 1</span></span><br></pre></td></tr></table></figure>

<p>å‡½æ•°å£°æ˜ä¼šä½¿å‡½æ•°ä½“æå‡ï¼Œä½†å‡½æ•°è¡¨è¾¾å¼ï¼ˆä»¥å£°æ˜å˜é‡çš„å½¢å¼ä¹¦å†™ï¼‰åªæœ‰å˜é‡å£°æ˜ä¼šæå‡</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‡½æ•°å£°æ˜</span></span><br><span class="line"><span class="built_in">console</span>.log(foo)</span><br><span class="line">foo(); <span class="comment">// 'foo'</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'foo'</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(foo); <span class="comment">// [Function: foo]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡½æ•°è¡¨è¾¾å¼</span></span><br><span class="line"><span class="built_in">console</span>.log(bar) <span class="comment">// undefined</span></span><br><span class="line">bar(); <span class="comment">// Uncaught TypeError: bar is not a function</span></span><br><span class="line"><span class="keyword">var</span> bar = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'bar'</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">console</span>.log(bar) <span class="comment">// [Function: bar]</span></span><br></pre></td></tr></table></figure>

<h2 id="äº‹ä»¶å†’æ³¡"><a href="#äº‹ä»¶å†’æ³¡" class="headerlink" title="äº‹ä»¶å†’æ³¡"></a>äº‹ä»¶å†’æ³¡</h2><p>å½“ä¸€ä¸ªäº‹ä»¶åœ¨DOMå…ƒç´ ä¸Šè§¦å‘æ—¶ï¼Œå¦‚æœæœ‰æ—¶é—´ç›‘å¬å™¨ï¼Œå®ƒå°è¯•å¤„ç†è¯¥äº‹ä»¶ï¼Œç„¶åäº‹ä»¶å†’æ³¡åˆ°å…¶çˆ¶çº§å…ƒç´ ï¼Œå¹¶å‘ç”ŸåŒæ ·çš„äº‹æƒ…ï¼Œæœ€åç›´è‡³åˆ°è¾¾ç¥–å…ˆå…ƒç´ ã€‚æ—¶é—´å†’æ³¡æœºåˆ¶æ˜¯å®ç°äº‹ä»¶å§”æ‰˜ï¼ˆevent delegationï¼‰çš„åŸç†</p>
<h2 id="attributeå’Œproperty"><a href="#attributeå’Œproperty" class="headerlink" title="attributeå’Œproperty"></a>attributeå’Œproperty</h2><p>attributeæ˜¯åœ¨HTMLä¸­å®šä¹‰çš„ï¼Œè€Œpropertyå®åœ¨DOMä¸Šå®šä¹‰çš„ã€‚</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">id</span>=<span class="string">"input1"</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">value</span>=<span class="string">"hello"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">	<span class="keyword">const</span> input = <span class="built_in">document</span>.getElementById(<span class="string">"input1"</span>)</span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(input.getAttribute(<span class="string">"value"</span>)) <span class="comment">// hello</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(input.value) <span class="comment">// hello</span></span></span><br><span class="line">    </span><br><span class="line"><span class="javascript">    <span class="comment">// å½“åœ¨æ–‡æœ¬æ¡†ä¸­è¾“å…¥ â€˜worldâ€™ å</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(input.getAttribute(<span class="string">"value"</span>)) <span class="comment">// hello</span></span></span><br><span class="line"><span class="javascript">    <span class="built_in">console</span>.log(input.value) <span class="comment">// world</span></span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="documentçš„loadäº‹ä»¶å’ŒDOMContentLoadedäº‹ä»¶ä¹‹é—´çš„åŒºåˆ«"><a href="#documentçš„loadäº‹ä»¶å’ŒDOMContentLoadedäº‹ä»¶ä¹‹é—´çš„åŒºåˆ«" class="headerlink" title="documentçš„loadäº‹ä»¶å’ŒDOMContentLoadedäº‹ä»¶ä¹‹é—´çš„åŒºåˆ«"></a>documentçš„loadäº‹ä»¶å’ŒDOMContentLoadedäº‹ä»¶ä¹‹é—´çš„åŒºåˆ«</h2><p>DOMContentLoadedï¼šğŸ‘</p>
<p>å½“åˆå§‹çš„HTMLæ–‡æ¡£æœ¬å®Œå…¨åŠ è½½å’Œè§£æå®Œæˆä¹‹åï¼ŒDOMContentLoadedäº‹ä»¶è¢«è§¦å‘è€Œæ— éœ€ç­‰å¾…æ ·å¼è¡¨ã€å›¾åƒå’Œå­æ¡†æ¶çš„å®ŒæˆåŠ è½½</p>
<p>loadï¼š</p>
<p>windowçš„loadäº‹ä»¶ä»…åœ¨DOMå’Œæ‰€æœ‰ç›¸å…³èµ„æºå…¨éƒ¨å®ŒæˆåŠ è½½åæ‰ä¼šè§¦å‘</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">"DOMContentLoaded"</span>, event =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"DOMContentLoaded"</span>);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">"load"</span>, () =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"window loaded"</span>);</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// DOMContentLoaded</span></span><br><span class="line"><span class="comment">// window loaded</span></span><br></pre></td></tr></table></figure>

<h2 id="åŒæºç­–ç•¥"><a href="#åŒæºç­–ç•¥" class="headerlink" title="åŒæºç­–ç•¥"></a>åŒæºç­–ç•¥</h2><p>åŒæºç­–ç•¥æ˜¯ç”±Netscapeæå‡ºçš„ä¸€ä¸ªè‘—åçš„å®‰å…¨ç­–ç•¥ï¼Œæµè§ˆå™¨å‡ºäºå®‰å…¨æ–¹é¢çš„è€ƒè™‘ï¼Œåªå…è®¸æœ¬åŸŸåä¸‹çš„æ¥å£äº¤äº’ï¼Œä¸åŒæºçš„å®¢æˆ·ç«¯è„šæœ¬ï¼Œåœ¨æ²¡æœ‰æ˜ç¡®æˆæƒçš„æƒ…å†µä¸‹ï¼Œä¸èƒ½è¯»å–å¯¹æ–¹çš„èµ„æºã€‚</p>
<p><a href="https://developer.mozilla.org/zh-CN/docs/Web/Security/Same-origin_policy" target="_blank" rel="noopener">åŒæºçš„å®šä¹‰:</a></p>
<p>å¦‚æœä¸¤ä¸ªé¡µé¢çš„åè®®ï¼Œç«¯å£ï¼ˆå¦‚æœæœ‰æŒ‡å®šï¼‰å’Œä¸»æœºéƒ½ç›¸åŒï¼Œåˆ™ä¸¤ä¸ªé¡µé¢å…·æœ‰ç›¸åŒçš„<strong>æº</strong>ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥æŠŠå®ƒç§°ä¸ºâ€œåè®®/ä¸»æœº/ç«¯å£ tupleâ€ï¼Œæˆ–ç®€å•åœ°å«åšâ€œtupleâ€. (â€œtupleâ€ ï¼Œâ€œå…ƒâ€ï¼Œæ˜¯æŒ‡ä¸€äº›äº‹ç‰©ç»„åˆåœ¨ä¸€èµ·å½¢æˆä¸€ä¸ªæ•´ä½“ï¼Œæ¯”å¦‚ï¼ˆ1ï¼Œ2ï¼‰å«äºŒå…ƒï¼Œï¼ˆ1ï¼Œ2ï¼Œ3ï¼‰å«ä¸‰å…ƒ)</p>
<p>ä¸‹è¡¨ç»™å‡ºäº†ç›¸å¯¹<code>http://store.company.com/dir/page.html</code>åŒæºæ£€æµ‹çš„ç¤ºä¾‹:</p>
<table>
<thead>
<tr>
<th>URL</th>
<th>ç»“æœ</th>
<th>åŸå› </th>
</tr>
</thead>
<tbody><tr>
<td><code>http://store.company.com/dir2/other.html</code></td>
<td>æˆåŠŸ</td>
<td>åªæœ‰è·¯å¾„ä¸åŒ</td>
</tr>
<tr>
<td><code>http://store.company.com/dir/inner/another.html</code></td>
<td>æˆåŠŸ</td>
<td>åªæœ‰è·¯å¾„ä¸åŒ</td>
</tr>
<tr>
<td><code>https://store.company.com/secure.html</code></td>
<td>å¤±è´¥</td>
<td>åè®®ä¸åŒ</td>
</tr>
<tr>
<td><code>http://store.company.com:81/dir/etc.html</code></td>
<td>å¤±è´¥</td>
<td>ç«¯å£ä¸åŒ</td>
</tr>
<tr>
<td><code>http://news.company.com/dir/other.html</code></td>
<td>å¤±è´¥</td>
<td>åŸŸåä¸åŒ</td>
</tr>
</tbody></table>
<h2 id="JavaScriptä¸¥æ ¼æ¨¡å¼"><a href="#JavaScriptä¸¥æ ¼æ¨¡å¼" class="headerlink" title="JavaScriptä¸¥æ ¼æ¨¡å¼"></a>JavaScriptä¸¥æ ¼æ¨¡å¼</h2><p><strong>WHAT</strong></p>
<p>ES5æœ€æ—©å¼•å…¥äº†â€œä¸¥æ ¼æ¨¡å¼â€ï¼ˆstrict modeï¼‰çš„æ¦‚å¿µã€‚å¯é€‰æ‹©çš„ä¸€ä¸ªé™åˆ¶JavaScriptçš„å˜ä½“çš„ä¸€ç§æ–¹å¼</p>
<p><strong>WHY</strong></p>
<p>ä¼˜ç‚¹ï¼š</p>
<ul>
<li>æ— æ³•å†æ„å¤–åˆ›å»ºå…¨å±€å˜é‡</li>
<li>ä¼šå¼•èµ·é™é»˜å¤±è´¥ï¼ˆsliently failï¼Œ å³ï¼šä¸æŠ¥é”™ä¹Ÿæ²¡æœ‰ä»»ä½•æ•ˆæœï¼‰çš„æ“ä½œæŠ›å‡ºå¼‚å¸¸<ul>
<li>å¯¹å˜é‡è°ƒç”¨<code>delete</code>æ“ä½œç¬¦</li>
<li>ä¸ºåªè¯»å±æ€§èµ‹å€¼</li>
<li>å¯¹ä¸å¯é…ç½®ï¼ˆnonconfigurableï¼‰çš„å±æ€§ä½¿ç”¨<code>delete</code>æ“ä½œç¬¦</li>
</ul>
</li>
<li>è¯•å›¾åˆ é™¤ä¸å¯åˆ é™¤çš„å±æ€§æ—¶ä¼šæŠ›å‡ºå¼‚å¸¸</li>
<li>è¦æ±‚å‡½æ•°çš„å‚æ•°åå”¯ä¸€</li>
<li>æŸäº›ä¿ç•™å­—ï¼ˆ<code>interface</code>ã€<code>implements</code>ã€<code>package</code>ç­‰ï¼‰ä¸èƒ½ä½œä¸ºå˜é‡å</li>
<li>æŠ‘åˆ¶<code>this</code><ul>
<li>å…¨å±€ä½œç”¨åŸŸä¸‹ï¼Œ<code>this</code>çš„å€¼ä¸º<code>undefined</code></li>
<li><code>.call()</code>ã€<code>.apply()</code>ä¼ é€’é”™è¯¯çš„<code>this</code>ä¼šæŠ¥é”™ï¼ˆéä¸¥æ ¼æ¨¡å¼ä¸‹ä¼šè½¬æ¢ä¸ºå…¨éƒ¨å¯¹è±¡ï¼‰</li>
</ul>
</li>
<li>æ•è·äº†ä¸€äº›å¸¸è§çš„ç¼–ç é”™è¯¯ï¼Œå¹¶æŠ›å‡ºå¼‚å¸¸</li>
</ul>
<p>ç¼ºç‚¹ï¼š</p>
<ul>
<li>ç¡®å®è®¸å¤šå¼€å‘äººå‘˜å·²ç»ä¹ æƒ¯çš„åŠŸèƒ½</li>
<li>æ— æ³•è®¿é—®<code>function.caller</code>å’Œ<code>function.arguments</code></li>
<li>ä»¥ä¸åŒä¸¥æ ¼æ¨¡å¼ç¼–å†™çš„è„šæœ¬åˆå¹¶åå¯èƒ½ä¼šå¯¼è‡´é—®é¢˜</li>
</ul>
<p><strong>HOW</strong></p>
<p>åœ¨éœ€è¦å¯ç”¨ä¸¥æ ¼æ¨¡å¼çš„<strong>ä»£ç </strong>é¡¶éƒ¨æ·»åŠ ï¼š<code>&quot;use strict;&quot;</code></p>
<h2 id="SPA"><a href="#SPA" class="headerlink" title="SPA"></a>SPA</h2><p><strong>WHAT</strong></p>
<p>single page application å•é¡µé¢åº”ç”¨</p>
<p>ç°å¦‚ä»Šï¼Œwebç¨‹åºå‘˜å°†ä»–ä»¬æ„å»ºçš„äº§å“æˆä¸ºwebåº”ç”¨è€Œä¸æ˜¯ç½‘ç«™ã€‚è™½ç„¶è¿™ä¸¤ä¸ªæœ¯è¯­ä¹‹é—´æ²¡æœ‰ä¸¥æ ¼çš„åŒºåˆ«ï¼Œä½†ç½‘ç»œåº”ç”¨å¾€å¾€å…·æœ‰é«˜åº¦çš„äº¤äº’æ€§å’ŒåŠ¨æ€æ€§ï¼Œå…è®¸ç”¨æˆ·æ‰§è¡Œæ“ä½œå¹¶æ¥å—ä»–ä»¬çš„æ“ä½œå“åº”ã€‚åœ¨è¿‡å»ï¼Œæµè§ˆå™¨ä»æœåŠ¡å™¨æ¥æ”¶HTMLå¹¶æ¸²æŸ“ï¼Œå½“ç”¨æˆ·å¯¼èˆªåˆ°å…¶ä»–URLæ—¶ï¼Œéœ€è¦æ•´é¡µåˆ·æ–°ï¼ŒæœåŠ¡å™¨ä¼šä¸ºæ–°é¡µé¢å‘é€æ–°çš„HTMLï¼Œè¿™è¢«ç§°ä¸ºæœåŠ¡ç«¯æ¸²æŸ“</p>
<p>ç„¶è€Œï¼Œåœ¨ç°ä»£çš„SPAä¸­ï¼Œå®¢æˆ·ç«¯æ¸²æŸ“å–è€Œä»£ä¹‹ã€‚æµè§ˆå™¨ä»éƒ½æ­¦å™¨åŠ è½½<strong>åˆå§‹é¡µé¢</strong>ï¼Œæ•´ä¸ªåº”ç”¨ç¨‹åºæ‰€æ‰€éœ€çš„è„šæœ¬ï¼ˆåº“ã€æ¡†æ¶ã€åº”ç”¨ä»£ç ï¼‰å’Œæ ·å¼è¡¨ã€‚å½“ç”¨æˆ·å¯¼èˆªåˆ°å…¶ä»–é¡µé¢æ—¶ï¼Œ<strong>ä¸ä¼šè§¦å‘é¡µé¢åˆ·æ–°</strong>ï¼Œè¯¥é¡µé¢çš„URLé€šè¿‡<a href="https://developer.mozilla.org/en-US/docs/Web/API/History_API" target="_blank" rel="noopener">HTML5 History API</a>è¿›è¡Œæ›´æ–°ã€‚æµè§ˆå™¨é€šè¿‡Ajaxè¯·æ±‚å‘æœåŠ¡å™¨æ£€ç´¢æ‰€éœ€çš„æ•°æ®ï¼ˆé€šå¸¸é‡‡ç”¨jsonæ ¼å¼ï¼‰ï¼Œç„¶åSPA<strong>é€šè¿‡JavaScriptæ¥åŠ¨æ€æ›´æ–°é¡µé¢</strong>ï¼Œè¿™äº›JavaScriptåœ¨åˆå§‹é¡µé¢å·²ç»ä¸‹è½½ã€‚è¿™ç§æ¨¡å¼ç±»ä¼¼äºåŸç”Ÿç§»åŠ¨åº”ç”¨çš„å·¥ä½œæ–¹å¼ã€‚</p>
<p><img src="./imgs/spa.png" alt="SPA"></p>
<p><strong>WHY</strong></p>
<p>å¥½å¤„ï¼š</p>
<ul>
<li>ç”¨æˆ·æ„ŸçŸ¥å“åº”æ›´å¿«ï¼Œç”¨æˆ·åˆ‡æ¢é¡µé¢æ—¶ä¸ä¼šå†çœ‹åˆ°å› é¡µé¢åˆ·æ–°è€Œå¯¼è‡´çš„ç™½å±</li>
<li>å¯¹æœåŠ¡å™¨è¿›è¡Œçš„HTTPè¯·æ±‚å‡å°‘ï¼Œå› ä¸ºå¯¹äºæ²¡å’Œé¡µé¢çš„åŠ è½½ä¸å¿…å†æ¬¡ä¸‹è½½ç›¸åŒçš„èµ„æº</li>
<li>å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯ä¹‹é—´çš„å…³æ³¨ç‚¹åˆ†ç¦»ï¼Œå¯ä»¥ä¸ºä¸åŒå¹³å°ï¼ˆæ‰‹æœºã€æ™ºèƒ½æ‰‹è¡¨ï¼‰å»ºç«‹æ–°çš„å®¢æˆ·ç«¯è€Œä¸éœ€ä¿®æ”¹æœåŠ¡å™¨ä»£ç ã€‚</li>
</ul>
<p>å¼Šç«¯ï¼š</p>
<ul>
<li>ç”±äºåŠ è½½äº†å¤šä¸ªé¡µé¢éœ€è¦çš„æ¡†æ¶ã€åº”ç”¨ä»£ç å’Œèµ„æºå¯¼è‡´åˆå§‹é¡µé¢åŠ è½½æ—¶é—´è¿‡é•¿</li>
<li>æœåŠ¡å™¨è¿˜éœ€é¢å¤–çš„å·¥ä½œå°†æ˜¯æ‰€æœ‰è·¯ç”±è¯·æ±‚é…ç½®åˆ°å•ä¸ªå…¥å£ç‚¹ï¼Œç„¶åç”±å®¢æˆ·ç«¯æ¥ç®¡è·¯ç”±</li>
<li>SPAä¾èµ–äºJavaScriptæ¥æ¸²æŸ“é¡µé¢ï¼Œå¯¹SEOä¸å‹å¥½</li>
</ul>
<p><strong>HOW</strong></p>
<ol>
<li>å‘æœåŠ¡å™¨è¯·æ±‚åˆå§‹é¡µé¢å¹¶æ¸²æŸ“ï¼ŒåŒæ—¶è¯·æ±‚æ•´ä¸ªåº”ç”¨æ‰€éœ€çš„è„šæœ¬ã€æ ·å¼</li>
<li>ç›‘å¬ç”¨æˆ·æ“ä½œï¼š<ul>
<li>é€šè¿‡<a href="https://developer.mozilla.org/en-US/docs/Web/API/History_API" target="_blank" rel="noopener">HTML5 History API</a>è¿›è¡Œé¡µé¢å¯¼èˆª</li>
<li>é€šè¿‡Ajaxå‘æœåŠ¡å™¨è¯·æ±‚æ•°æ®å¹¶ä½¿ç”¨JavaScriptåŠ¨æ€æ¸²æŸ“åˆ°é¡µé¢ä¸Š</li>
</ul>
</li>
</ol>

    </div>

    
    
    
        
      

      <footer class="post-footer">
          
            
          
          <div class="post-tags">
            
              <a href="/tags/JavaScript/" rel="tag"># JavaScript</a>
            
          </div>
        

        

          <div class="post-nav">
            <div class="post-nav-next post-nav-item">
              
                <a href="/2020/02/10/JavaScriptç›¸å…³-0/" rel="next" title="JavaScriptç›¸å…³-0">
                  <i class="fa fa-chevron-left"></i> JavaScriptç›¸å…³-0
                </a>
              
            </div>

            <span class="post-nav-divider"></span>

            <div class="post-nav-prev post-nav-item">
              
                <a href="/2020/02/12/JavaScriptç›¸å…³-2/" rel="prev" title="JavaScriptç›¸å…³-2">
                  JavaScriptç›¸å…³-2 <i class="fa fa-chevron-right"></i>
                </a>
              
            </div>
          </div>
        
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">
        
        
        
        
      

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#document-write"><span class="nav-number">1.</span> <span class="nav-text">document.write</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#åŠŸèƒ½æ£€æµ‹ï¼ˆfeature-detectionï¼‰ã€åŠŸèƒ½æ¨æ–­ï¼ˆfeature-inferenceï¼‰ã€å’Œä½¿ç”¨UAå­—ç¬¦ä¸²ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«"><span class="nav-number">2.</span> <span class="nav-text">åŠŸèƒ½æ£€æµ‹ï¼ˆfeature detectionï¼‰ã€åŠŸèƒ½æ¨æ–­ï¼ˆfeature inferenceï¼‰ã€å’Œä½¿ç”¨UAå­—ç¬¦ä¸²ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Ajax"><span class="nav-number">3.</span> <span class="nav-text">Ajax</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JSONP"><span class="nav-number">4.</span> <span class="nav-text">JSONP</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#å˜é‡æå‡"><span class="nav-number">5.</span> <span class="nav-text">å˜é‡æå‡</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#äº‹ä»¶å†’æ³¡"><span class="nav-number">6.</span> <span class="nav-text">äº‹ä»¶å†’æ³¡</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#attributeå’Œproperty"><span class="nav-number">7.</span> <span class="nav-text">attributeå’Œproperty</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#documentçš„loadäº‹ä»¶å’ŒDOMContentLoadedäº‹ä»¶ä¹‹é—´çš„åŒºåˆ«"><span class="nav-number">8.</span> <span class="nav-text">documentçš„loadäº‹ä»¶å’ŒDOMContentLoadedäº‹ä»¶ä¹‹é—´çš„åŒºåˆ«</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#åŒæºç­–ç•¥"><span class="nav-number">9.</span> <span class="nav-text">åŒæºç­–ç•¥</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#JavaScriptä¸¥æ ¼æ¨¡å¼"><span class="nav-number">10.</span> <span class="nav-text">JavaScriptä¸¥æ ¼æ¨¡å¼</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SPA"><span class="nav-number">11.</span> <span class="nav-text">SPA</span></a></li></ol></div>
        
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image"
      src="/imgs/avatar.png"
      alt="Mr.RS">
  <p class="site-author-name" itemprop="name">Mr.RS</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        
          <a href="/archives/">
        
          <span class="site-state-item-count">30</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-categories">
        
          
            <a href="/categories/">
          
        
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">åˆ†ç±»</span>
        </a>
      </div>
    
      
      
      <div class="site-state-item site-state-tags">
        
          
            <a href="/tags/">
          
        
        <span class="site-state-item-count">29</span>
        <span class="site-state-item-name">æ ‡ç­¾</span>
        </a>
      </div>
    
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Mr.RS</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> å¼ºåŠ›é©±åŠ¨ v3.9.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">
      
    ä¸»é¢˜ â€“ <a href="https://pisces.theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.4.1
  </div>

        












        
      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js?v=3.1.0"></script>
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
<script src="/js/utils.js?v=7.4.1"></script><script src="/js/motion.js?v=7.4.1"></script>
<script src="/js/schemes/pisces.js?v=7.4.1"></script>
<script src="/js/next-boot.js?v=7.4.1"></script>



  





















  

  

  

</body>
</html>
